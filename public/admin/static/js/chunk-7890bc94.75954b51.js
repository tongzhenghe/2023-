(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7890bc94","chunk-3ce070e2","chunk-3eaeecec","chunk-3850cfbb","chunk-9f8c43b0","chunk-2d0d7805"],{"028c":function(e,t,l){"use strict";l("778c")},"0532":function(e,t,l){"use strict";l.d(t,"h",(function(){return s})),l.d(t,"g",(function(){return o})),l.d(t,"a",(function(){return n})),l.d(t,"d",(function(){return r})),l.d(t,"b",(function(){return c})),l.d(t,"c",(function(){return u})),l.d(t,"e",(function(){return d})),l.d(t,"f",(function(){return m}));var i=l("b775"),a="/admin/file.Group/";function s(e){return Object(i["a"])({url:a+"list",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"info",method:"get",params:e})}function n(e){return Object(i["a"])({url:a+"add",method:"post",data:e})}function r(e){return Object(i["a"])({url:a+"edit",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"dele",method:"post",data:e})}function u(e){return Object(i["a"])({url:a+"disable",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"file",method:"get",params:e})}function m(e){return Object(i["a"])({url:a+"fileRemove",method:"post",data:e})}},"072e":function(e,t,l){"use strict";l.d(t,"e",(function(){return s})),l.d(t,"b",(function(){return o})),l.d(t,"d",(function(){return n})),l.d(t,"a",(function(){return r})),l.d(t,"c",(function(){return c}));var i=l("b775"),a="/admin/system.Index/";function s(e){return Object(i["a"])({url:a+"notice",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"count",method:"get",params:e})}function n(e){return Object(i["a"])({url:a+"member",method:"get",params:e})}function r(e){return Object(i["a"])({url:a+"content",method:"get",params:e})}function c(e){return Object(i["a"])({url:a+"file",method:"get",params:e})}},"08b6":function(e,t,l){},"0963":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",[t("span",{staticClass:"apidoc-item"},[e._v("密码："+e._s(e.model.apidoc_pwd)+" "),t("i",{staticClass:"el-icon-copy-document",attrs:{title:"复制密码"},on:{click:function(t){return e.copy(e.model.apidoc_pwd,t)}}})]),t("span",{staticClass:"apidoc-item",attrs:{title:e.model.token}},[e._v("Token："+e._s(e.model.token_sub)+" "),t("i",{staticClass:"el-icon-copy-document",attrs:{title:"复制Token"},on:{click:function(t){return e.copy(e.model.token,t)}}})]),t("el-button",{staticClass:"filter-item",attrs:{size:"mini",circle:"",title:"刷新"},on:{click:function(t){return e.refresh()}}},[t("i",{staticClass:"el-icon-refresh"})]),t("el-link",{staticStyle:{"margin-left":"10px"},attrs:{href:e.model.apidoc_url,target:"_blank",underline:!1,title:"新标签页打开"}},[t("i",{staticClass:"el-icon-position"})])],1),t("el-col",[t("iframe",{attrs:{src:e.model.apidoc_url,frameborder:"0",width:"100%",height:e.height}})])],1)],1)},a=[],s=l("98b1"),o=l("f71e"),n=l("b775"),r="/admin/system.Apidoc/";function c(e){return Object(n["a"])({url:r+"apidoc",method:"get",params:e})}var u={name:"SystemApidoc",components:{},data:function(){return{name:"接口文档",height:680,isload:!1,model:{apidoc_url:"",apidoc_pwd:"",user_id:0,token:"",token_sub:""}}},created:function(){this.height=Object(s["a"])(150),this.isload||this.apidoc()},methods:{apidoc:function(){var e=this;c().then((function(t){e.isload=!0,e.model=t.data}))},refresh:function(){this.apidoc()},copy:function(e,t){e?Object(o["a"])(e,t):this.$message.error("复制失败")}}},d=u,m=(l("ee0c"),l("2877")),p=Object(m["a"])(d,i,a,!1,null,"6eaa065b",null);t["default"]=p.exports},"09ef":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"注册",prop:"is_register"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_register,callback:function(t){e.$set(e.model,"is_register",t)},expression:"model.is_register"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再注册（用户名、手机、邮箱） ")])],1),t("el-form-item",{attrs:{label:"登录",prop:"is_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_login,callback:function(t){e.$set(e.model,"is_login",t)},expression:"model.is_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再登录（用户名、手机、邮箱） ")])],1),t("el-form-item",{attrs:{label:"公众号注册",prop:"is_offi_register"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_offi_register,callback:function(t){e.$set(e.model,"is_offi_register",t)},expression:"model.is_offi_register"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再注册（公众号） ")])],1),t("el-form-item",{attrs:{label:"公众号登录",prop:"is_offi_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_offi_login,callback:function(t){e.$set(e.model,"is_offi_login",t)},expression:"model.is_offi_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再登录（公众号） ")])],1),t("el-form-item",{attrs:{label:"小程序注册",prop:"is_mini_register"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_mini_register,callback:function(t){e.$set(e.model,"is_mini_register",t)},expression:"model.is_mini_register"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再注册（小程序） ")])],1),t("el-form-item",{attrs:{label:"小程序登录",prop:"is_mini_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_mini_login,callback:function(t){e.$set(e.model,"is_mini_login",t)},expression:"model.is_mini_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 关闭后，不能再登录（小程序） ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("4f49"),n={name:"MemberSettingLogreg",components:{},data:function(){return{name:"登录注册设置",height:680,loading:!1,model:{is_register:1,is_login:1,is_offi_register:1,is_offi_login:1,is_mini_register:1,is_mini_login:1},rules:{}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["j"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["j"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["i"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"0ee7":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"type",label:"类型"}}),t("el-option",{attrs:{value:"title",label:"标题"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):"type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.types,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间字段"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),t("el-option",{attrs:{value:"start_time",label:"开始时间"}}),t("el-option",{attrs:{value:"end_time",label:"结束时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改类型"},on:{click:function(t){return e.selectOpen("edittype")}}},[e._v("类型")]),t("el-button",{attrs:{title:"时间范围"},on:{click:function(t){return e.selectOpen("datetime")}}},[e._v("时间")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"edittype"===e.selectType?t("el-form-item",{attrs:{label:"类型",prop:""}},[t("el-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1)],1):"datetime"===e.selectType?t("el-form-item",{attrs:{label:"时间范围",prop:""}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00",placeholder:"开始时间"},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}}),t("span",[e._v("至")]),t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",placeholder:"结束时间"},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"type_name",label:"类型","min-width":"75"}}),t("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"260","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{style:{color:l.row.title_color}},[e._v(e._s(l.row.title))])]}}])}),t("el-table-column",{attrs:{prop:"start_time",label:"开始时间","min-width":"160",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"end_time",label:"结束时间","min-width":"160",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},e._l(e.types,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1)],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"标题颜色",prop:"title_color"}},[t("el-color-picker",{model:{value:e.model.title_color,callback:function(t){e.$set(e.model,"title_color",t)},expression:"model.title_color"}})],1),t("el-form-item",{attrs:{label:"简介",prop:"intro"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",autosize:{minRows:2,maxRows:5}},model:{value:e.model.intro,callback:function(t){e.$set(e.model,"intro",t)},expression:"model.intro"}})],1),t("el-form-item",{attrs:{label:"开始时间",prop:"start_time"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00",placeholder:"禁用开始时间"},model:{value:e.model.start_time,callback:function(t){e.$set(e.model,"start_time",t)},expression:"model.start_time"}})],1),t("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",placeholder:"禁用结束时间"},model:{value:e.model.end_time,callback:function(t){e.$set(e.model,"end_time",t)},expression:"model.end_time"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入排序"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("rich-editor",{model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("6a13"),r=l("ed08"),c=l("b775"),u="/admin/setting.Notice/";function d(e){return Object(c["a"])({url:u+"list",method:"get",params:e})}function m(e){return Object(c["a"])({url:u+"info",method:"get",params:e})}function p(e){return Object(c["a"])({url:u+"add",method:"post",data:e})}function h(e){return Object(c["a"])({url:u+"edit",method:"post",data:e})}function f(e){return Object(c["a"])({url:u+"dele",method:"post",data:e})}function b(e){return Object(c["a"])({url:u+"edittype",method:"post",data:e})}function g(e){return Object(c["a"])({url:u+"datetime",method:"post",data:e})}function _(e){return Object(c["a"])({url:u+"disable",method:"post",data:e})}var v={name:"SettingNotice",components:{Pagination:o["a"],RichEditor:n["a"]},data:function(){return{name:"通告",height:680,loading:!1,idkey:"notice_id",exps:[],query:{page:1,limit:12,search_field:"title",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{notice_id:"",type:0,title:"",title_color:"#606266",start_time:"",end_time:"",intro:"",content:"",sort:250},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],start_time:[{required:!0,message:"请输入开始时间",trigger:"blur"}],end_time:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},types:[],selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",type:0,start_time:"",end_time:"",is_disable:0}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,d(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.types=t.data.types,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],m(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?(e.loading=!0,e.model[e.idkey]?h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请完善必填项*")}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(r["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","edittype"===e?this.selectTitle=this.name+"修改类型":"datetime"===e?this.selectTitle=this.name+"时间范围":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"edittype"===e?this.edittype(this.selection):"datetime"===e?this.datetime(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},edittype:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e),type:this.type}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},datetime:function(e){var t=this;e.length?(this.loading=!0,g({ids:this.selectGetIds(e),start_time:this.start_time,end_time:this.end_time}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),_({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?f({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()}}},y=v,k=l("2877"),w=Object(k["a"])(y,i,a,!1,null,null,null);t["default"]=w.exports},1:function(e,t){},"156f":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"post_pid",label:"上级"}}),t("el-option",{attrs:{value:"post_name",label:"名称"}}),t("el-option",{attrs:{value:"post_abbr",label:"简称"}}),t("el-option",{attrs:{value:"post_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"post_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",title:"收起/展开"},on:{change:e.expandAll},model:{value:e.isExpandAll,callback:function(t){e.isExpandAll=t},expression:"isExpandAll"}},[e._v("收起")]),t("el-button",{attrs:{title:"解除用户"},on:{click:function(t){return e.selectOpen("removeu")}}},[e._v("用户")]),t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removeu"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的用户吗？")])]):"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级职位",clearable:"",filterable:""},model:{value:e.post_pid,callback:function(t){e.post_pid=t},expression:"post_pid"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height+50,"row-key":e.idkey,"default-expand-all":""},on:{"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"post_name",label:"名称","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"post_abbr",label:"简称","min-width":"100"}}),t("el-table-column",{attrs:{prop:"post_desc",label:"描述","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userShow(l.row)}}},[e._v("用户")]),t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级",prop:"post_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级职位",clearable:"",filterable:""},model:{value:e.model.post_pid,callback:function(t){e.$set(e.model,"post_pid",t)},expression:"model.post_pid"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"post_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.post_name,callback:function(t){e.$set(e.model,"post_name",t)},expression:"model.post_name"}})],1),t("el-form-item",{attrs:{label:"简称",prop:"post_abbr"}},[t("el-input",{attrs:{placeholder:"请输入简称",clearable:""},model:{value:e.model.post_abbr,callback:function(t){e.$set(e.model,"post_abbr",t)},expression:"model.post_abbr"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"post_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.post_desc,callback:function(t){e.$set(e.model,"post_desc",t)},expression:"model.post_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.userDialogTitle,visible:e.userDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.userDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.userSelectOpen("userRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.userSelectTitle,visible:e.userSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.userSelectDialog=t}}},[t("el-form",{ref:"userSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.userName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.userSelectIds,callback:function(t){e.userSelectIds=t},expression:"userSelectIds"}})],1),"userRemove"===e.userSelectType?t("el-form-item",{attrs:{label:"标签ID",prop:""}},[t("span",[e._v(e._s(e.userQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.userSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.userSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoad,expression:"userLoad"}],ref:"userRef",attrs:{data:e.userData,height:e.height-20},on:{"sort-change":e.userSort,"selection-change":e.userSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"user_id",label:"用户ID","min-width":"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"post_names",label:"职位","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_super",label:"超管",width:"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_super,callback:function(t){e.$set(l.row,"is_super",t)},expression:"scope.row.is_super"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用",width:"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userSelectOpen("userRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.userCount>0,expression:"userCount>0"}],attrs:{total:e.userCount,page:e.userQuery.page,limit:e.userQuery.limit},on:{"update:page":function(t){return e.$set(e.userQuery,"page",t)},"update:limit":function(t){return e.$set(e.userQuery,"limit",t)},pagination:e.user}})],1)],1)},a=[],s=(l("d3b7"),l("159b"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/system.Post/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"editpid",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function g(e){return Object(r["a"])({url:c+"user",method:"get",params:e})}function _(e){return Object(r["a"])({url:c+"userRemove",method:"post",data:e})}var v={name:"SystemPost",components:{Pagination:o["a"]},data:function(){return{name:"职位",height:680,loading:!1,idkey:"post_id",exps:[],query:{search_field:"post_name",search_exp:"like",date_field:"create_time"},data:[],dialog:!1,dialogTitle:"",model:{post_id:"",post_name:"",post_abbr:"",post_desc:"",sort:250},rules:{post_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},trees:[],props:{checkStrictly:!0,value:"post_id",label:"post_name",emitPath:!1},isExpandAll:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",post_pid:"",is_disable:0,userPk:"user_id",userName:"用户",userDialog:!1,userDialogTitle:"",userLoad:!1,userData:[],userCount:0,userQuery:{page:1,limit:12},userSelection:[],userSelectIds:"",userSelectTitle:"选中操作",userSelectDialog:!1,userSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.post_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.list()},refresh:function(){this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.list()},expandAll:function(e){this.expandFor(this.data,!e)},expandFor:function(e,t){var l=this;e.forEach((function(e){l.$refs.table.toggleRowExpansion(e,t),e.children&&l.expandFor(e.children,t)}))},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removeu"===e?this.selectTitle=this.name+"解除用户":"editpid"===e?this.selectTitle=this.name+"修改上级":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removeu"===e?this.removeu(this.selection):"editpid"===e?this.editpid(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removeu:function(e){var t=this;e.length?(this.loading=!0,_({post_id:this.selectGetIds(e),user_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editpid:function(e){var t=this;f({ids:this.selectGetIds(e),post_pid:this.post_pid}).then((function(e){t.list(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),b({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},userShow:function(e){this.userDialog=!0,this.userDialogTitle=this.name+"用户："+e.post_name,this.userQuery.post_id=e.post_id,this.user()},user:function(){var e=this;this.userLoad=!0,g(this.userQuery).then((function(t){e.userData=t.data.list,e.userCount=t.data.count,e.userLoad=!1})).catch((function(){e.userLoad=!1}))},userSort:function(e){this.userQuery.sort_field=e.prop,this.userQuery.sort_value="","ascending"===e.order&&(this.userQuery.sort_value="asc",this.user()),"descending"===e.order&&(this.userQuery.sort_value="desc",this.user())},userSelect:function(e){this.userSelection=e,this.userSelectIds=this.userSelectGetIds(e).toString()},userSelectGetIds:function(e){return Object(n["a"])(e,this.userPk)},userSelectAlert:function(){this.$alert("请选择需要操作的"+this.userName,"提示",{type:"warning",callback:function(e){}})},userSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["userRef"].clearSelection(),this.$refs["userRef"].toggleRowSelection(t)),this.userSelection.length?(this.userSelectTitle="选中操作","userRemove"===e&&(this.userSelectTitle="解除用户"),this.userSelectDialog=!0,this.userSelectType=e):this.userSelectAlert()},userSelectCancel:function(){this.userSelectDialog=!1},userSelectSubmit:function(){if(this.userSelection.length){var e=this.userSelectType;"userRemove"===e&&this.userRemove(this.userSelection),this.userSelectDialog=!1}else this.userSelectAlert()},userRemove:function(e){var t=this;e.length?(this.userLoad=!0,_({post_id:this.userQuery.post_id,user_ids:this.userSelectGetIds(e)}).then((function(e){t.user(),t.$message.success(e.msg)})).catch((function(){t.userLoad=!1}))):this.userSelectAlert()}}},y=v,k=l("2877"),w=Object(k["a"])(y,i,a,!1,null,"28608300",null);t["default"]=w.exports},"16e3":function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",[t("el-col",[t("span",[e._v(e._s(e.name))])]),t("el-col",[t("div",{staticStyle:{height:"500px",width:"100%"},attrs:{id:"echartIndexFile"}})])],1)],1)},a=[],s=l("22b4"),o=l("1be7"),n=l("49bb"),r=l("9394"),c=l("ff32"),u=l("2da7"),d=l("f95e"),m=l("072e");s["a"]([n["a"],r["a"],c["a"],u["a"],d["a"]]);var p={name:"SystemIndexFile",components:{},data:function(){return{name:"文件统计",loading:!1,date_pie:{count:0,date:[]}}},computed:{},created:function(){this.file()},mounted:function(){},methods:{file:function(){var e=this;this.loading=!0,Object(m["c"])().then((function(t){e.echartIndexFile(t.data),e.loading=!1})).catch((function(){e.loading=!1}))},echartIndexFile:function(e){var t=o["b"](document.getElementById("echartIndexFile")),l={title:{subtext:"文件："+e.count,left:"center"},legend:{left:"center",top:"bottom"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"文件类型",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2,normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"}}},data:e.data}]};t.setOption(l)}}},h=p,f=l("2877"),b=Object(f["a"])(h,i,a,!1,null,"e863ded4",null);t["default"]=b.exports},"16e5":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-tabs",[e.checkPermission(["admin/member.Setting/captchaInfo"])?t("el-tab-pane",{attrs:{label:"验证码设置",lazy:""}},[t("setting-captcha")],1):e._e(),e.checkPermission(["admin/member.Setting/tokenInfo"])?t("el-tab-pane",{attrs:{label:"Token设置",lazy:""}},[t("setting-token")],1):e._e(),e.checkPermission(["admin/member.Setting/logInfo"])?t("el-tab-pane",{attrs:{label:"日志设置",lazy:""}},[t("setting-log")],1):e._e(),e.checkPermission(["admin/member.Setting/apiInfo"])?t("el-tab-pane",{attrs:{label:"接口设置",lazy:""}},[t("setting-api")],1):e._e(),e.checkPermission(["admin/member.Setting/logregInfo"])?t("el-tab-pane",{attrs:{label:"登录注册设置",lazy:""}},[t("setting-logreg")],1):e._e(),e.checkPermission(["admin/member.Setting/diyInfo"])?t("el-tab-pane",{attrs:{label:"自定义设置",lazy:""}},[t("setting-diy")],1):e._e()],1)],1)},a=[],s=l("e350"),o=l("dd85"),n=l("515d"),r=l("72c4"),c=l("1b95"),u=l("09ef"),d=l("ea60"),m={name:"MemberSetting",components:{SettingToken:o["default"],SettingCaptcha:n["default"],SettingLog:r["default"],SettingApi:c["default"],SettingLogreg:u["default"],SettingDiy:d["default"]},data:function(){return{name:"会员设置"}},created:function(){},methods:{checkPermission:s["a"]}},p=m,h=l("2877"),f=Object(h["a"])(p,i,a,!1,null,null,null);t["default"]=f.exports},1721:function(e,t,l){},"17f6":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",{attrs:{gutter:8}},[t("el-col",{attrs:{span:12}},[t("el-form",{attrs:{model:e.model,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"OS"}},[t("el-input",{model:{value:e.model.system_info,callback:function(t){e.$set(e.model,"system_info",t)},expression:"model.system_info"}})],1),t("el-form-item",{attrs:{label:"Web"}},[t("el-input",{model:{value:e.model.server_software,callback:function(t){e.$set(e.model,"server_software",t)},expression:"model.server_software"}})],1),t("el-form-item",{attrs:{label:"MySQL"}},[t("el-input",{model:{value:e.model.mysql,callback:function(t){e.$set(e.model,"mysql",t)},expression:"model.mysql"}})],1),t("el-form-item",{attrs:{label:"PHP"}},[t("el-input",{model:{value:e.model.php_version,callback:function(t){e.$set(e.model,"php_version",t)},expression:"model.php_version"}})],1),t("el-form-item",{attrs:{label:"Protocol"}},[t("el-input",{model:{value:e.model.server_protocol,callback:function(t){e.$set(e.model,"server_protocol",t)},expression:"model.server_protocol"}})],1),t("el-form-item",{attrs:{label:"IP"}},[t("el-input",{model:{value:e.model.ip,callback:function(t){e.$set(e.model,"ip",t)},expression:"model.ip"}})],1),t("el-form-item",{attrs:{label:"Domain"}},[t("el-input",{model:{value:e.model.domain,callback:function(t){e.$set(e.model,"domain",t)},expression:"model.domain"}})],1),t("el-form-item",{attrs:{label:"Port"}},[t("el-input",{model:{value:e.model.port,callback:function(t){e.$set(e.model,"port",t)},expression:"model.port"}})],1),t("el-form-item",{attrs:{label:"php_sapi_name"}},[t("el-input",{model:{value:e.model.php_sapi_name,callback:function(t){e.$set(e.model,"php_sapi_name",t)},expression:"model.php_sapi_name"}})],1),t("el-form-item",{attrs:{label:"max_execution_time"}},[t("el-input",{model:{value:e.model.max_execution_time,callback:function(t){e.$set(e.model,"max_execution_time",t)},expression:"model.max_execution_time"}})],1),t("el-form-item",{attrs:{label:"upload_max_filesize"}},[t("el-input",{model:{value:e.model.upload_max_filesize,callback:function(t){e.$set(e.model,"upload_max_filesize",t)},expression:"model.upload_max_filesize"}})],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"post_max_size"}},[t("el-input",{model:{value:e.model.post_max_size,callback:function(t){e.$set(e.model,"post_max_size",t)},expression:"model.post_max_size"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form",{attrs:{model:e.model,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"缓存类型",prop:"type"}},[t("el-input",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}})],1),"redis"===e.model.type?t("div",[t("el-form-item",{attrs:{label:"Redis",prop:""}},[t("el-input",{model:{value:e.model.redis_version,callback:function(t){e.$set(e.model,"redis_version",t)},expression:"model.redis_version"}})],1),t("el-form-item",{attrs:{label:"运行时长",prop:""}},[t("el-input",{model:{value:e.model.uptime_in_days,callback:function(t){e.$set(e.model,"uptime_in_days",t)},expression:"model.uptime_in_days"}})],1),t("el-form-item",{attrs:{label:"已用内存",prop:""}},[t("el-input",{model:{value:e.model.used_memory_human,callback:function(t){e.$set(e.model,"used_memory_human",t)},expression:"model.used_memory_human"}})],1),t("el-form-item",{attrs:{label:"峰值内存",prop:""}},[t("el-input",{model:{value:e.model.used_memory_peak_human,callback:function(t){e.$set(e.model,"used_memory_peak_human",t)},expression:"model.used_memory_peak_human"}})],1),t("el-form-item",{attrs:{label:"Lua内存",prop:""}},[t("el-input",{model:{value:e.model.used_memory_lua_human,callback:function(t){e.$set(e.model,"used_memory_lua_human",t)},expression:"model.used_memory_lua_human"}})],1),t("el-form-item",{attrs:{label:"客户端数",prop:""}},[t("el-input",{model:{value:e.model.connected_clients,callback:function(t){e.$set(e.model,"connected_clients",t)},expression:"model.connected_clients"}})],1),t("el-form-item",{attrs:{label:"总连接数",prop:""}},[t("el-input",{model:{value:e.model.total_connections_received,callback:function(t){e.$set(e.model,"total_connections_received",t)},expression:"model.total_connections_received"}})],1),t("el-form-item",{attrs:{label:"总命令数",prop:""}},[t("el-input",{model:{value:e.model.total_commands_processed,callback:function(t){e.$set(e.model,"total_commands_processed",t)},expression:"model.total_commands_processed"}})],1),t("el-form-item",{attrs:{label:"内存碎片比率",prop:""}},[t("el-input",{model:{value:e.model.mem_fragmentation_ratio,callback:function(t){e.$set(e.model,"mem_fragmentation_ratio",t)},expression:"model.mem_fragmentation_ratio"}})],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"DB0",prop:""}},[t("el-input",{model:{value:e.model.db0,callback:function(t){e.$set(e.model,"db0",t)},expression:"model.db0"}})],1)],1):"memcache"===e.model.type?t("div",[t("el-form-item",{attrs:{label:"memcache",prop:""}},[t("el-input",{model:{value:e.model.version,callback:function(t){e.$set(e.model,"version",t)},expression:"model.version"}})],1),t("el-form-item",{attrs:{label:"运行秒数",prop:""}},[t("el-input",{model:{value:e.model.uptime,callback:function(t){e.$set(e.model,"uptime",t)},expression:"model.uptime"}})],1),t("el-form-item",{attrs:{label:"读取字节总数",prop:""}},[t("el-input",{model:{value:e.model.bytes_read,callback:function(t){e.$set(e.model,"bytes_read",t)},expression:"model.bytes_read"}})],1),t("el-form-item",{attrs:{label:"写入字节总数",prop:""}},[t("el-input",{model:{value:e.model.bytes_written,callback:function(t){e.$set(e.model,"bytes_written",t)},expression:"model.bytes_written"}})],1),t("el-form-item",{attrs:{label:"分配的内存数",prop:""}},[t("el-input",{model:{value:e.model.limit_maxbytes,callback:function(t){e.$set(e.model,"limit_maxbytes",t)},expression:"model.limit_maxbytes"}})],1),t("el-form-item",{attrs:{label:"当前打开链接数",prop:""}},[t("el-input",{model:{value:e.model.curr_connections,callback:function(t){e.$set(e.model,"curr_connections",t)},expression:"model.curr_connections"}})],1),t("el-form-item",{attrs:{label:"曾打开连接总数",prop:""}},[t("el-input",{model:{value:e.model.total_connections,callback:function(t){e.$set(e.model,"total_connections",t)},expression:"model.total_connections"}})],1),t("el-form-item",{attrs:{label:"执行get命令总数",prop:""}},[t("el-input",{model:{value:e.model.cmd_get,callback:function(t){e.$set(e.model,"cmd_get",t)},expression:"model.cmd_get"}})],1),t("el-form-item",{attrs:{label:"执行set命令总数",prop:""}},[t("el-input",{model:{value:e.model.cmd_set,callback:function(t){e.$set(e.model,"cmd_set",t)},expression:"model.cmd_set"}})],1),t("el-form-item",{attrs:{label:"flush_all命令总数",prop:""}},[t("el-input",{model:{value:e.model.cmd_flush,callback:function(t){e.$set(e.model,"cmd_flush",t)},expression:"model.cmd_flush"}})],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"当前服务器时间",prop:""}},[t("el-input",{model:{value:e.model.time,callback:function(t){e.$set(e.model,"time",t)},expression:"model.time"}})],1)],1):"wincache"===e.model.type?t("div",[t("el-form-item",{attrs:{label:"缓存信息",prop:"wincache_info"}},[t("pre",[e._v(e._s(e.model.wincache_info))])])],1):e._e(),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{loading:e.loading,icon:"el-icon-refresh",title:"刷新"},on:{click:function(t){return e.refresh()}}})],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingServer",components:{},data:function(){return{name:"服务器信息",height:680,loading:!1,model:{}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["l"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["l"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,"7fd979fd",null);t["default"]=u.exports},1849:function(e,t,l){},"190b":function(e,t,l){},"1b95":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"会员接口",prop:"is_member_api"}},[t("el-col",{attrs:{span:24}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_member_api,callback:function(t){e.$set(e.model,"is_member_api",t)},expression:"model.is_member_api"}})],1),t("el-col",{attrs:{span:24}},[e._v(" 关闭后，不再校验接口和权限，所有接口（免登除外）均需登录访问。 ")])],1),t("el-form-item",{attrs:{label:"接口速率"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number",placeholder:"次数"},model:{value:e.model.api_rate_num,callback:function(t){e.$set(e.model,"api_rate_num",t)},expression:"model.api_rate_num"}},[t("template",{slot:"append"},[e._v("次")])],2)],1),t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("/")]),t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number",placeholder:"时间"},model:{value:e.model.api_rate_time,callback:function(t){e.$set(e.model,"api_rate_time",t)},expression:"model.api_rate_time"}},[t("template",{slot:"append"},[e._v("秒")])],2)],1),t("el-col",{attrs:{span:24}},[e._v(" 3/1：3次1秒；次数 0 不限率。")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("4f49"),n={name:"MemberSettingApi",components:{},data:function(){return{name:"接口设置",height:680,loading:!1,model:{is_member_api:0,api_rate_num:3,api_rate_time:1},rules:{}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["b"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["b"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["a"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"20d7":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"缓存类型",prop:"cache_type"}},[t("el-col",{attrs:{span:8}},[t("el-input",{model:{value:e.model.cache_type,callback:function(t){e.$set(e.model,"cache_type",t)},expression:"model.cache_type"}})],1)],1),t("el-form-item",{attrs:{label:"",prop:""}},[t("el-col",{attrs:{span:12}},[e._v(" 手动清除所有缓存，后台登录状态不会清除。 ")])],1),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.clear()}}},[e._v("清除")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingCache",components:{},data:function(){return{name:"缓存设置",height:680,loading:!1,model:{cache_type:""},rules:{}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["d"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["d"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},clear:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["c"])().then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"259d":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"user_id",label:"用户"}}),t("el-option",{attrs:{value:"menu_id",label:"菜单"}}),t("el-option",{attrs:{value:"request_ip",label:"请求IP"}}),t("el-option",{attrs:{value:"request_region",label:"请求地区"}}),t("el-option",{attrs:{value:"request_isp",label:"请求ISP"}}),t("el-option",{attrs:{value:"response_code",label:"返回码"}}),t("el-option",{attrs:{value:"log_type",label:"日志类型"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"user_id"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"用户",clearable:"",filterable:"","collapse-tags":"",multiple:"","allow-create":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.userData,(function(l){return t("el-option",{key:l.user_id,attrs:{value:l.user_id,label:l.nickname}},[e._v(" "+e._s(l.nickname)+" ("+e._s(l.username)+") ")])})),1):"menu_id"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"菜单",options:e.menuData,props:e.menuProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"log_type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"日志类型",clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.logTypes,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"删除选择"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{title:"删除查询结果"},on:{click:function(t){return e.clear()}}},[e._v("清空")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"user_id",label:"用户ID","min-width":"70"}}),t("el-table-column",{attrs:{prop:"nickname",label:"用户昵称","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"用户账号","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"menu_id",label:"菜单ID","min-width":"70"}}),t("el-table-column",{attrs:{prop:"menu_name",label:"菜单名称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"menu_url",label:"菜单链接","min-width":"195","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_ip",label:"请求IP","min-width":"125","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_region",label:"请求地区","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_isp",label:"请求ISP","min-width":"110","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_code",label:"返回码","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_msg",label:"返回描述","min-width":"115","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"create_time",label:"请求时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"85"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.info(l.row)}}},[e._v("详情")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count > 0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"用户ID",prop:"user_id"}},[t("el-input",{model:{value:e.model.user_id,callback:function(t){e.$set(e.model,"user_id",t)},expression:"model.user_id"}})],1),t("el-form-item",{attrs:{label:"用户昵称",prop:"nickname"}},[t("el-input",{model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),t("el-form-item",{attrs:{label:"用户账号",prop:"username"}},[t("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("el-form-item",{attrs:{label:"菜单ID",prop:"menu_id"}},[t("el-input",{model:{value:e.model.menu_id,callback:function(t){e.$set(e.model,"menu_id",t)},expression:"model.menu_id"}})],1),t("el-form-item",{attrs:{label:"菜单名称",prop:"menu_name"}},[t("el-input",{model:{value:e.model.menu_name,callback:function(t){e.$set(e.model,"menu_name",t)},expression:"model.menu_name"}})],1),t("el-form-item",{attrs:{label:"菜单链接",prop:"menu_url"}},[t("el-input",{model:{value:e.model.menu_url,callback:function(t){e.$set(e.model,"menu_url",t)},expression:"model.menu_url"}})],1),t("el-form-item",{attrs:{label:"请求方式",prop:"request_method"}},[t("el-input",{model:{value:e.model.request_method,callback:function(t){e.$set(e.model,"request_method",t)},expression:"model.request_method"}})],1),t("el-form-item",{attrs:{label:"请求IP",prop:"request_ip"}},[t("el-input",{model:{value:e.model.request_ip,callback:function(t){e.$set(e.model,"request_ip",t)},expression:"model.request_ip"}})],1),t("el-form-item",{attrs:{label:"请求地区",prop:"request_region"}},[t("el-input",{model:{value:e.model.request_region,callback:function(t){e.$set(e.model,"request_region",t)},expression:"model.request_region"}})],1),t("el-form-item",{attrs:{label:"请求ISP",prop:"request_isp"}},[t("el-input",{model:{value:e.model.request_isp,callback:function(t){e.$set(e.model,"request_isp",t)},expression:"model.request_isp"}})],1),t("el-form-item",{attrs:{label:"请求时间",prop:"create_time"}},[t("el-input",{model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1),t("el-form-item",{attrs:{label:"返回码",prop:"response_code"}},[t("el-input",{model:{value:e.model.response_code,callback:function(t){e.$set(e.model,"response_code",t)},expression:"model.response_code"}})],1),t("el-form-item",{attrs:{label:"返回描述",prop:"response_msg"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.response_msg,callback:function(t){e.$set(e.model,"response_msg",t)},expression:"model.response_msg"}})],1),t("el-form-item",{attrs:{label:"用户代理",prop:"user_agent"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.user_agent,callback:function(t){e.$set(e.model,"user_agent",t)},expression:"model.user_agent"}})],1),t("el-form-item",{attrs:{label:"请求参数",prop:"request_param"}},[t("pre",[e._v(e._s(e.model.request_param))])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/system.UserLog/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"clear",method:"post",data:e})}var h={name:"SystemUserLog",components:{Pagination:o["a"]},directives:{},data:function(){return{name:"用户日志",height:680,loading:!1,idkey:"log_id",exps:[],query:{page:1,limit:12,search_field:"user_id",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{},rules:{},userData:[],menuData:[],menuProps:{checkStrictly:!0,value:"menu_id",label:"menu_name",multiple:!0,emitPath:!1},logTypes:[],selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.userData=t.data.user,e.menuData=t.data.menu,e.logTypes=t.data.log_types,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},info:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"详情："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){this.dialog=!1,this.reset()},reset:function(e){this.model=e||this.$options.data().model},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,m({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},clear:function(){var e=this;this.$confirm("确定要清空"+this.name+"(查询结果或所有)吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e.query).then((function(t){e.list(),e.$message.success("清空"+e.name+"记录 "+t.data.count+" 条")})).catch((function(){}))})).catch((function(){}))}}},f=h,b=l("2877"),g=Object(b["a"])(f,i,a,!1,null,null,null);t["default"]=g.exports},"26b0":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",[e.checkPermission(["admin/system.Index/count"])?t("index-count"):e._e()],1)],1),t("div",{staticClass:"app-container"},[t("el-row",{staticStyle:{"margin-bottom":"15px"}},[t("el-col",[e.checkPermission(["admin/system.Index/member"])?t("index-member"):e._e()],1)],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{xs:24,sm:14}},[e.checkPermission(["admin/system.Index/content"])?t("index-content"):e._e()],1),t("el-col",{attrs:{xs:24,sm:10}},[e.checkPermission(["admin/system.Index/file"])?t("index-file"):e._e()],1)],1)],1),t("index-notice")],1)},a=[],s=l("98b1"),o=l("e350"),n=l("8967"),r=l("88d4"),c=l("aa8c"),u=l("e521"),d=l("16e3"),m={name:"Dashboard",components:{IndexNotice:n["default"],IndexCount:r["default"],IndexMember:c["default"],IndexFile:d["default"],IndexContent:u["default"]},data:function(){return{name:"控制台",height:680}},created:function(){this.height=Object(s["a"])(100)},methods:{checkPermission:o["a"]}},p=m,h=l("2877"),f=Object(h["a"])(p,i,a,!1,null,null,null);t["default"]=f.exports},"29be":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"name",label:"名称"}}),t("el-option",{attrs:{value:"unique",label:"标识"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"220",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"unique",label:"标识","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.name,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"标识",prop:"unique"}},[t("el-input",{attrs:{placeholder:"请输入标识（唯一）",clearable:""},model:{value:e.model.unique,callback:function(t){e.$set(e.model,"unique",t)},expression:"model.unique"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.unique,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("rich-editor",{model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("6a13"),r=l("f71e"),c=l("ed08"),u=l("b775"),d="/admin/setting.Accord/";function m(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function f(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"disable",method:"post",data:e})}var _={name:"SettingAccord",components:{Pagination:o["a"],RichEditor:n["a"]},directives:{},data:function(){return{name:"协议",height:680,loading:!1,idkey:"accord_id",exps:[],query:{page:1,limit:12,search_field:"name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{accord_id:"",unique:"",name:"",content:"",sort:250,is_disable:0},rules:{unique:[{required:!0,message:"请输入标识",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,m(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],p(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),g({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},copy:function(e,t){Object(r["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},v=_,y=l("2877"),k=Object(y["a"])(v,i,a,!1,null,null,null);t["default"]=k.exports},"2cbb":function(e,t,l){"use strict";l("daea")},"30b56":function(e,t,l){"use strict";l("9eb0")},"333d":function(e,t,l){"use strict";l("c96a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-container",class:{hidden:e.hidden},style:{"text-align":e.align}},[t("el-pagination",e._b({attrs:{small:e.small,background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];l("a9e3");Math.easeInOutQuad=function(e,t,l,i){return e/=i/2,e<1?l/2*e*e+t:(e--,-l/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,l){var i=n(),a=e-i,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var n=Math.easeInOutQuad(c,i,a,t);o(n),c<t?s(e):l&&"function"===typeof l&&l()};u()}var c={name:"Pagination",props:{align:{type:String,default:"left"},total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,12,15,18,20,30,50,80,100,150,200,300,500,800,1e3]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},u=c,d=(l("028c"),l("2877")),m=Object(d["a"])(u,i,a,!1,null,"5985cea8",null);t["a"]=m.exports},3659:function(e,t,l){"use strict";l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"搜索字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"file_name",label:"名称"}}),t("el-option",{attrs:{value:"file_ext",label:"后缀"}}),t("el-option",{attrs:{value:"domain",label:"域名"}}),t("el-option",{attrs:{value:"file_path",label:"路径"}}),t("el-option",{attrs:{value:"file_md5",label:"MD5"}}),t("el-option",{attrs:{value:"file_hash",label:"散列"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"搜索内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),e.recycle?t("el-option",{attrs:{value:"delete_time",label:"删除时间"}}):e._e()],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}}),e.checkPermission(["admin/file.File/recycle"])?t("el-button",{staticStyle:{float:"right"},attrs:{type:e.recycle?"primary":""},on:{click:e.showRecycle}},[e._v("回收站")]):e._e(),t("el-radio-group",{staticStyle:{float:"right"},on:{change:e.showChange},model:{value:e.showMode,callback:function(t){e.showMode=t},expression:"showMode"}},[t("el-radio-button",{attrs:{label:"card"}},[e._v("卡片")]),t("el-radio-button",{attrs:{label:"table"}},[e._v("表格")])],1)],1)],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",indeterminate:e.selectAllInd},on:{change:e.selectAlls},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")]),t("el-button",{attrs:{title:"修改分组"},on:{click:function(t){return e.selectOpen("editgroup")}}},[e._v("分组")]),t("el-button",{attrs:{title:"修改标签"},on:{click:function(t){return e.selectOpen("edittag")}}},[e._v("标签")]),t("el-button",{attrs:{title:"修改类型"},on:{click:function(t){return e.selectOpen("edittype")}}},[e._v("类型")]),t("el-button",{attrs:{title:"修改域名"},on:{click:function(t){return e.selectOpen("editdomain")}}},[e._v("域名")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除文件"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{title:"添加文件"},on:{click:function(t){return e.add()}}},[e._v("添加")]),e.recycle?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.selectOpen("reco")}}},[e._v("恢复")]):t("el-upload",{staticClass:"ya-upload",attrs:{name:"file",limit:e.uploadLimit,"file-list":e.uploadFilelist,multiple:!0,"show-file-list":!1,"auto-upload":!0,action:e.uploadAction,headers:e.uploadHeaders,data:e.uploadData,accept:e.uploadAccept,"before-upload":e.uploadBefore,"on-success":e.uploadSuccess,"on-error":e.uploadError,"on-change":e.uploadChange,"on-exceed":e.uploadExceed}},[t("el-button",{attrs:{type:"primary",title:"上传文件"},on:{click:e.uploadClear}},[e._v("上传")])],1),t("el-select",{staticClass:"filter-item ya-search-field ya-margin-left",attrs:{filterable:"",clearable:"",placeholder:"排序字段"},on:{change:e.sort},model:{value:e.query.sort_field,callback:function(t){e.$set(e.query,"sort_field",t)},expression:"query.sort_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"file_name",label:"名称"}}),t("el-option",{attrs:{value:"file_md5",label:"MD5"}}),t("el-option",{attrs:{value:"file_hash",label:"散列"}}),t("el-option",{attrs:{value:"file_ext",label:"后缀"}}),t("el-option",{attrs:{value:"file_size",label:"大小"}}),t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),e.recycle?t("el-option",{attrs:{value:"delete_time",label:"删除时间"}}):e._e()],1),t("el-select",{staticClass:"filter-item ya-search-field",attrs:{filterable:"",clearable:"",placeholder:"排序类型"},on:{change:e.sort},model:{value:e.query.sort_value,callback:function(t){e.$set(e.query,"sort_value",t)},expression:"query.sort_value"}},[t("el-option",{attrs:{value:"asc",label:"升序"}}),t("el-option",{attrs:{value:"desc",label:"降序"}})],1),t("el-select",{staticClass:"filter-item ya-search-field ya-margin-left",attrs:{filterable:"",clearable:"",placeholder:"分组"},on:{change:e.groupSelect},model:{value:e.query.group_id,callback:function(t){e.$set(e.query,"group_id",t)},expression:"query.group_id"}},e._l(e.groupData,(function(e,l){return t("el-option",{key:l,attrs:{value:e.group_id,label:e.group_name}})})),1),t("el-button-group",[t("el-button",{attrs:{type:"text",icon:"el-icon-plus",title:"添加"+e.groupName},on:{click:function(t){return e.groupAdd()}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-edit",title:"修改"+e.groupName},on:{click:function(t){return e.groupEdit()}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-delete",title:"删除"+e.groupName},on:{click:function(t){return e.groupDele()}}})],1),t("el-select",{staticClass:"filter-item ya-margin-left",attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":"",placeholder:"标签"},on:{change:e.tagSelect},model:{value:e.query.tag_ids,callback:function(t){e.$set(e.query,"tag_ids",t)},expression:"query.tag_ids"}},e._l(e.tagData,(function(e,l){return t("el-option",{key:l,attrs:{value:e.tag_id,label:e.tag_name}})})),1),t("el-button-group",[t("el-button",{attrs:{type:"text",icon:"el-icon-plus",title:"添加"+e.tagName},on:{click:function(t){return e.tagAdd()}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-edit",title:"修改"+e.tagName},on:{click:function(t){return e.tagEdit()}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-delete",title:"删除"+e.tagName},on:{click:function(t){return e.tagDele()}}})],1)],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"editgroup"===e.selectType?t("el-form-item",{attrs:{label:"文件分组",prop:""}},[t("el-select",{attrs:{clearable:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},e._l(e.groupData,(function(e,l){return t("el-option",{key:l,attrs:{value:e.group_id,label:e.group_name}})})),1)],1):"edittag"===e.selectType?t("el-form-item",{attrs:{label:"文件标签",prop:""}},[t("el-select",{staticClass:"ya-width-100p",attrs:{multiple:"",clearable:"",filterable:""},model:{value:e.tag_ids,callback:function(t){e.tag_ids=t},expression:"tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1):"edittype"===e.selectType?t("el-form-item",{attrs:{label:"文件类型",prop:"file_type"}},[t("el-select",{model:{value:e.file_type,callback:function(t){e.file_type=t},expression:"file_type"}},e._l(e.filetype,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1)],1):"editdomain"===e.selectType?t("el-form-item",{attrs:{label:"文件域名",prop:""}},[t("el-input",{attrs:{clearable:""},model:{value:e.domain,callback:function(t){e.domain=t},expression:"domain"}}),t("span",{staticClass:"ya-margin-left"},[e._v("修改文件域名会影响文件的访问，请确认无误后修改！")])],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}}),e.is_disable?t("span",{staticClass:"ya-margin-left",staticStyle:{color:"red"}},[e._v("禁用会对已使用该文件的业务造成影响！")]):e._e()],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[e.recycle?t("span",{staticClass:"ya-margin-left",staticStyle:{color:"red"}},[e._v("确定要彻底删除选中的"+e._s(e.name)+"吗？删除后不可恢复！")]):t("span",{staticClass:"ya-margin-left",staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？删除会对已使用该文件的业务造成影响！")])]):"reco"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticClass:"ya-margin-left",staticStyle:{color:"red"}},[e._v("确定要恢复选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.groupTitle,visible:e.groupDialog,"before-close":e.groupCancel,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.groupDialog=t}}},[t("el-form",{ref:"groupRef",staticClass:"dialog-body",attrs:{rules:e.groupRules,model:e.groupModel,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"group_name"}},[t("el-input",{attrs:{placeholder:"请输入分组名称",clearable:""},model:{value:e.groupModel.group_name,callback:function(t){e.$set(e.groupModel,"group_name",t)},expression:"groupModel.group_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"group_desc"}},[t("el-input",{attrs:{clearable:""},model:{value:e.groupModel.group_desc,callback:function(t){e.$set(e.groupModel,"group_desc",t)},expression:"groupModel.group_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.groupModel.sort,callback:function(t){e.$set(e.groupModel,"sort",t)},expression:"groupModel.sort"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.groupCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.groupSubmit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.tagTitle,visible:e.tagDialog,"before-close":e.tagCancel,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.tagDialog=t}}},[t("el-form",{ref:"tagRef",staticClass:"dialog-body",attrs:{rules:e.tagRules,model:e.tagModel,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"tag_name"}},[t("el-input",{attrs:{placeholder:"请输入标签名称",clearable:""},model:{value:e.tagModel.tag_name,callback:function(t){e.$set(e.tagModel,"tag_name",t)},expression:"tagModel.tag_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"tag_desc"}},[t("el-input",{attrs:{clearable:""},model:{value:e.tagModel.tag_desc,callback:function(t){e.$set(e.tagModel,"tag_desc",t)},expression:"tagModel.tag_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.tagModel.sort,callback:function(t){e.$set(e.tagModel,"sort",t)},expression:"tagModel.sort"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.tagCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.tagSubmit}},[e._v("提交")])],1)],1),t("el-row",{attrs:{gutter:3}},[t("el-col",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{span:3}},[t("el-row",[t("el-col",[t("el-button",{staticClass:"ya-color-inherit",attrs:{type:"text"}},[e._v("类型：")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:""===e.query.file_type?"primary":"",underline:!1},on:{click:function(t){return e.typeSelect("")}}},[e._v("全部")])],1),e._l(e.filetype,(function(l,i){return t("el-col",{key:i,staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:e.query.file_type===i?"primary":"",underline:!1},on:{click:function(t){return e.typeSelect(i)}}},[e._v(e._s(l))])],1)}))],2),t("el-row",[t("el-col",[t("el-button",{staticClass:"ya-color-inherit",attrs:{type:"text"}},[e._v("禁用：")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:""===e.query.is_disable?"primary":"",underline:!1},on:{click:function(t){return e.disableSelect("")}}},[e._v("全部")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:0===e.query.is_disable?"primary":"",underline:!1},on:{click:function(t){return e.disableSelect(0)}}},[e._v("已启用")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:1===e.query.is_disable?"primary":"",underline:!1},on:{click:function(t){return e.disableSelect(1)}}},[e._v("已禁用")])],1)],1),t("el-row",[t("el-col",[t("el-button",{staticClass:"ya-color-inherit",attrs:{type:"text"}},[e._v("上传：")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:""===e.query.is_front?"primary":"",underline:!1},on:{click:function(t){return e.frontSelect("")}}},[e._v("全部")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:0===e.query.is_front?"primary":"",underline:!1},on:{click:function(t){return e.frontSelect(0)}}},[e._v("后台")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:1===e.query.is_front?"primary":"",underline:!1},on:{click:function(t){return e.frontSelect(1)}}},[e._v("前台")])],1)],1),t("el-row",[t("el-col",[t("el-button",{staticClass:"ya-color-inherit",attrs:{type:"text"}},[e._v("存储：")])],1),t("el-col",{staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:""===e.query.storage?"primary":"",underline:!1},on:{click:function(t){return e.storageSelect("")}}},[e._v("全部")])],1),e._l(e.storage,(function(l,i){return t("el-col",{key:i,staticClass:"ya-padding-left"},[t("el-link",{staticClass:"ya-height-26",attrs:{type:e.query.storage===i?"primary":"",underline:!1},on:{click:function(t){return e.storageSelect(i)}}},[e._v(e._s(l))])],1)}))],2)],1),"card"==e.showMode?t("div",[e.count>0?t("el-col",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{span:21}},[t("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"6px"},attrs:{gutter:3}},[t("el-checkbox-group",{on:{change:e.select},model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}},e._l(e.data,(function(l,i){return t("el-col",{key:i,staticStyle:{"margin-bottom":"6px","text-align":"center"},attrs:{span:4}},[t("el-card",{staticClass:"ya-file-card",attrs:{"body-style":{minWidth:"16.5%",height:(e.height-.1*e.height)/3+"px",minHeight:"126px",padding:"0 6px"}}},[t("div",{staticStyle:{"text-align":"left"}},[t("el-checkbox",{key:l[e.idkey],attrs:{label:l[e.idkey]}},[e._v(e._s(l[e.idkey])+" ("+e._s(l.file_size)+"，"+e._s(l.file_ext)+")")])],1),t("div",{style:{width:"100%",height:(e.height-.1*e.height)/3-(e.height-.1*e.height)/3*.5+"px",minHeight:"62px"}},["image"===l.file_type?t("el-image",{staticStyle:{height:"100%"},attrs:{fit:"contain",src:l.file_url,"preview-src-list":e.fileImgPre,title:"点击看大图",lazy:""}}):"video"===l.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.file_url,height:"100%"}},[t("embed",{attrs:{src:l.file_url,height:"100%"}})])]):"audio"===l.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.file_url,height:"100%"}})]):"word"===l.file_type?t("div",[t("i",{staticClass:"el-icon-document ya-file-icon"})]):t("div",[t("i",{staticClass:"el-icon-folder ya-file-icon"})])],1),t("div",{style:{paddingTop:"5px",minHeight:"50px"}},[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("div",{staticClass:"bottom clearfix"},[l.is_disable?t("el-button",{attrs:{type:"text",icon:"el-icon-warning",title:"已禁用,点击修改"},on:{click:function(t){return e.selectOpen("disable",[l.file_id])}}}):t("el-button",{attrs:{type:"text",icon:"el-icon-warning-outline",title:"已启用,点击修改"},on:{click:function(t){return e.selectOpen("disable",[l.file_id])}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-download",title:"下载文件"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",title:"详情/修改"},on:{click:function(t){return e.edit(l)}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-delete",title:"删除文件"},on:{click:function(t){return e.selectOpen("dele",[l.file_id])}}})],1)])])],1)})),1)],1)],1):t("el-col",{attrs:{span:21}},[t("el-empty",{attrs:{description:"暂无"+e.name}})],1)],1):t("div",[t("el-col",{staticStyle:{padding:"0"},attrs:{span:21}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_url",label:"文件","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},["image"===l.row.file_type?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.file_url,"preview-src-list":e.fileImgPre,title:"点击看大图",lazy:"","scroll-container":".el-table__body-wrapper"}}):"video"===l.row.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.row.file_url,height:"100%"}},[t("embed",{attrs:{src:l.row.file_url,height:"100%"}})])]):"audio"===l.row.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.row.file_url,height:"100%"}})]):"word"===l.row.file_type?t("div",[t("i",{staticClass:"el-icon-document"})]):t("div",[t("i",{staticClass:"el-icon-folder"})])],1)]}}])}),t("el-table-column",{attrs:{prop:"file_type_name",label:"类型","min-width":"55"}}),t("el-table-column",{attrs:{prop:"file_name",label:"名称","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"file_ext",label:"后缀","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_size",label:"大小","min-width":"85",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_name",label:"分组","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"73",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"73",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"152",sortable:"custom"}}),e.recycle?t("el-table-column",{attrs:{prop:"delete_time",label:"删除时间","min-width":"152",sortable:"custom"}}):t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"152",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(l){return[e.recycle?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.selectOpen("reco",[l.row])}}},[e._v("恢复")]):e._e(),t("el-button",{attrs:{type:"text",size:"mini",title:"下载文件"},on:{click:function(t){return e.fileDownload(l.row,t)}}},[e._v("下载")]),t("el-button",{attrs:{type:"text",size:"mini",title:"详情/修改"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{type:"text",size:"mini",title:"删除文件"},on:{click:function(t){return e.selectOpen("dele",[l.row])}}},[e._v("删除")])]}}])})],1)],1)],1)],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[e.model.file_id?t("el-form-item",{attrs:{label:"文件",prop:"file"}},[t("el-col",{attrs:{span:18}},[t("div",{staticStyle:{height:"200px"}},["image"===e.model.file_type?t("el-image",{staticStyle:{height:"200px"},attrs:{fit:"contain",src:e.model.file_url,"preview-src-list":[e.model.file_url],title:"点击看大图"}}):"video"===e.model.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:e.model.file_url,type:"video/mp4"}}),t("object",{attrs:{data:e.model.file_url,height:"100%"}},[t("embed",{attrs:{src:e.model.file_url,height:"100%"}})])]):"audio"===e.model.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:e.model.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:e.model.file_url,height:"100%"}})]):"word"===e.model.file_type?t("div",[t("i",{staticClass:"el-icon-document ya-file-icon"})]):t("div",[t("i",{staticClass:"el-icon-folder ya-file-icon"})])],1)]),t("el-col",{staticClass:"ya-center",attrs:{span:6}},[t("el-button",{attrs:{size:"mini",title:"下载文件"},on:{click:function(t){return e.fileDownload(e.model,t)}}},[e._v("下载")])],1)],1):e._e(),t("el-form-item",{attrs:{label:"文件名称",prop:"file_name",rules:{required:"url"!=e.model.type,message:"请输入文件名称",trigger:"blur"}}},[t("el-input",{attrs:{placeholder:"请输入文件名称",title:e.model.file_name,clearable:""},model:{value:e.model.file_name,callback:function(t){e.$set(e.model,"file_name",t)},expression:"model.file_name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.file_name,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"文件分组",prop:"group_id"}},[t("el-select",{attrs:{clearable:""},model:{value:e.model.group_id,callback:function(t){e.$set(e.model,"group_id",t)},expression:"model.group_id"}},e._l(e.groupData,(function(e,l){return t("el-option",{key:l,attrs:{value:e.group_id,label:e.group_name}})})),1)],1),t("el-form-item",{attrs:{label:"文件标签",prop:"tag_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.model.tag_ids,callback:function(t){e.$set(e.model,"tag_ids",t)},expression:"model.tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1),t("el-form-item",{attrs:{label:"文件类型",prop:"file_type"}},[t("el-select",{model:{value:e.model.file_type,callback:function(t){e.$set(e.model,"file_type",t)},expression:"model.file_type"}},e._l(e.filetype,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1)],1),t("el-form-item",{attrs:{label:"文件排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"250",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model.file_id?t("el-form-item",{attrs:{label:"文件域名",prop:"domain"}},[t("el-input",{attrs:{placeholder:"请输入域名",clearable:""},model:{value:e.model.domain,callback:function(t){e.$set(e.model,"domain",t)},expression:"model.domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.domain,t)}},slot:"append"})],1)],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"文件路径",prop:"file_path"}},[t("el-input",{attrs:{placeholder:"请输入路径",title:e.model.file_path,disabled:!!e.model.file_id},model:{value:e.model.file_path,callback:function(t){e.$set(e.model,"file_path",t)},expression:"model.file_path"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.file_path,t)}},slot:"append"})],1)],1):e._e(),t("el-form-item",{attrs:{label:"文件链接",prop:"file_url"}},[t("el-input",{attrs:{placeholder:"请输入链接",title:e.model.file_url,clearable:"",disabled:!!e.model.file_id},model:{value:e.model.file_url,callback:function(t){e.$set(e.model,"file_url",t)},expression:"model.file_url"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.file_url,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"存储方式",prop:"storage"}},[t("el-select",{attrs:{placeholder:"",disabled:!!e.model.file_id},model:{value:e.model.storage,callback:function(t){e.$set(e.model,"storage",t)},expression:"model.storage"}},e._l(e.storage,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1)],1),e.model.file_id?t("el-form-item",{attrs:{label:"是否禁用",prop:"is_disable"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:e.model.is_disable,callback:function(t){e.$set(e.model,"is_disable",t)},expression:"model.is_disable"}})],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"文件大小",prop:"file_size"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.file_size,callback:function(t){e.$set(e.model,"file_size",t)},expression:"model.file_size"}})],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"文件后缀",prop:"file_ext"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.file_ext,callback:function(t){e.$set(e.model,"file_ext",t)},expression:"model.file_ext"}})],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"文件MD5",prop:"file_md5"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.file_md5,callback:function(t){e.$set(e.model,"file_md5",t)},expression:"model.file_md5"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.file_md5,t)}},slot:"append"})],1)],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"文件散列",prop:"file_hash"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.file_hash,callback:function(t){e.$set(e.model,"file_hash",t)},expression:"model.file_hash"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-copy-document",title:"复制"},on:{click:function(t){return e.copy(e.model.file_hash,t)}},slot:"append"})],1)],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model.file_id?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-row",{directives:[{name:"show",rawName:"v-show",value:e.fileType,expression:"fileType"}]},[t("el-col",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t("el-button",{on:{click:function(t){return e.fileCancel()}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fileSubmit(e.selection)}}},[e._v("确定")])],1)],1)],1)},a=[],s=(l("a9e3"),l("d3b7"),l("25f0"),l("14d9"),l("e350")),o=l("98b1"),n=l("333d"),r=l("f71e"),c=l("4360"),u=l("ed08"),d=l("5f87"),m=l("b775"),p="/admin/file.File/";function h(e){return Object(m["a"])({url:p+"list",method:"get",params:e})}function f(e){return Object(m["a"])({url:p+"info",method:"get",params:e})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"upl";return"url"===t?Object(m["a"])({url:p+"add",method:"post",data:e}):p+"add"}function g(e){return Object(m["a"])({url:p+"edit",method:"post",data:e})}function _(e){return Object(m["a"])({url:p+"dele",method:"post",data:e})}function v(e){return Object(m["a"])({url:p+"editgroup",method:"post",data:e})}function y(e){return Object(m["a"])({url:p+"edittag",method:"post",data:e})}function k(e){return Object(m["a"])({url:p+"edittype",method:"post",data:e})}function w(e){return Object(m["a"])({url:p+"editdomain",method:"post",data:e})}function x(e){return Object(m["a"])({url:p+"disable",method:"post",data:e})}function S(e){return Object(m["a"])({url:p+"recycle",method:"get",params:e})}function $(e){return Object(m["a"])({url:p+"recycleReco",method:"post",data:e})}function q(e){return Object(m["a"])({url:p+"recycleDele",method:"post",data:e})}var C=l("0532"),T=l("505c"),O={name:"FileManage",components:{Pagination:n["a"]},directives:{},props:{isRecycle:{type:Number,default:0},fileType:{type:String,default:""}},data:function(){return{name:"文件",recycle:0,height:680,loading:!1,idkey:"file_id",exps:[],query:{page:1,limit:18,storage:"",file_type:"",is_front:0,is_disable:"",search_field:"file_name",search_exp:"like",date_field:"create_time"},data:[],count:0,showMode:"card",dialog:!1,dialogTitle:"",model:{type:"upl",file_id:"",group_id:"",tag_ids:[],storage:"local",domain:"",file_md5:"",file_hash:"",file_name:"",file_type:"",file_path:"",file_size:"",file_ext:"",file_url:"",sort:250,is_front:0,is_disable:0,is_delete:0},rules:{file_type:[{required:!0,message:"请选择文件类型",trigger:"blur"}],file_url:[{required:!0,message:"请输入文件链接",trigger:"blur"}]},storage:[],fileIds:[],filetype:[],fileImgPre:[],selectAll:!1,selectAllInd:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",group_id:0,tag_ids:[],domain:"",file_type:"image",is_disable:0,uploadAction:b(),uploadHeaders:{},uploadData:{},uploadLimit:9,uploadAccept:"",uploadFilelist:[],uploadCount:0,uploadNumber:0,groupPk:"group_id",groupName:"分组",groupData:[],groupDialog:!1,groupTitle:"",groupModel:{group_id:"",group_name:"",group_desc:"",sort:250},groupRules:{group_name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},tagPk:"tag_id",tagName:"标签",tagData:[],tagDialog:!1,tagTitle:"",tagModel:{tag_id:"",tag_name:"",tag_desc:"",sort:250},tagRules:{tag_name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]}}},watch:{isRecycle:{handler:function(e){this.recycle=e,this.list()}},fileType:{handler:function(e){this.recycle=this.isRecycle,this.query.file_type=e,this.query.page=1,this.list()}}},created:function(){this.height=Object(o["a"])(),this.recycle=this.isRecycle,this.fileType&&(this.query.is_disable=0,this.query.file_type=this.fileType,this.height=this.height-105),this.list();var e=c["a"].getters.tokenType,t=c["a"].getters.tokenName,l=Object(d["e"])();if("header"===e){var i={};i[t]=l,this.uploadHeaders=i}else{var a={group_id:0};a[t]=l,this.uploadData=a}},methods:{checkPermission:s["a"],list:function(){var e=this;this.loading=!0,this.recycle?S(this.query).then((function(t){e.listData(t.data)})).catch((function(){e.loading=!1})):h(this.query).then((function(t){e.listData(t.data)})).catch((function(){e.loading=!1}))},listData:function(e){this.data=e.list,this.count=e.count,this.fileIds=e.ids,this.uploadLimit=e.setting.limit_max,this.uploadAccept=e.setting.accept_ext,this.storage=e.storage,this.filetype=e.filetype,this.groupData=e.group,this.tagData=e.tag,this.exps=e.exps,this.loading=!1,this.imagePreview(e.list)},uploadBefore:function(){this.loading=!0,this.model.type="upl"},uploadSuccess:function(e){this.uploadNumber++,200===e.code?this.uploadNumber>=this.uploadCount&&(this.uploadNumber=this.uploadCount=0,this.query=this.$options.data().query,this.list(),this.$message.success(e.msg)):(this.$message.error(e.msg),this.uploadNumber>=this.uploadCount&&(this.loading=!1))},uploadError:function(e){this.loading=!1,this.$message.error(e.msg||"上传出错")},uploadChange:function(e,t){this.loading=!0,this.uploadCount=t.length,this.uploadNumber>=this.uploadCount&&(this.loading=!1)},uploadExceed:function(){this.$message.error("每次最多只能选择 ".concat(this.uploadLimit," 个文件"))},uploadClear:function(){this.uploadNumber=this.uploadCount=0,this.uploadFilelist=[]},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),this.model.type="url"},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e.file_id,f({file_id:e.file_id}).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model.file_id?g(e.model).then((function(t){e.list(),e.reset(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):b(e.model,"url").then((function(t){e.list(),e.reset(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.query.limit=e,this.reset(),this.list()},sort:function(e){"card"===this.showMode?this.query.sort_value&&this.query.sort_value&&this.list():(this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list()))},reset:function(e){this.model=e||this.$options.data().model,this.selection=[],this.selectIds="",this.selectAll=!1,this.selectAllInd=!1,void 0!==this.$refs["ref"]&&this.$refs["ref"].resetFields(),void 0!==this.$refs["table"]&&(this.$refs["table"].clearSelection(),this.$refs["table"].clearSort())},showChange:function(){this.selectAlls(!1)},showRecycle:function(){this.recycle=!this.recycle,this.list()},select:function(e){this.selection=e,this.selectIds=this.selectGetIds().toString(),this.selectAll=e.length===this.fileIds.length,this.selectAllInd=e.length>0&&e.length<this.fileIds.length},selectAlls:function(e){e?(this.selection=this.fileIds,void 0!==this.$refs["table"]&&this.$refs["table"].toggleAllSelection()):(this.selection=[],void 0!==this.$refs["table"]&&this.$refs["table"].clearSelection()),this.select(this.selection)},selectGetIds:function(){return"card"===this.showMode?this.selection:Object(u["a"])(this.selection,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&("card"===this.showMode?this.selection=[]:void 0!==this.$refs["table"]&&this.$refs["table"].clearSelection(),this.select(t)),this.selection.length?(this.selectTitle="选中操作","editgroup"===e?this.selectTitle=this.name+"修改分组":"edittag"===e?this.selectTitle=this.name+"修改标签":"edittype"===e?this.selectTitle=this.name+"修改类型":"editdomain"===e?this.selectTitle=this.name+"修改域名":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e?this.selectTitle=this.name+"删除":"reco"===e&&(this.selectTitle=this.name+"恢复"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"editgroup"===e?this.editgroup():"edittag"===e?this.edittag(this.selection):"edittype"===e?this.edittype():"editdomain"===e?this.editdomain():"disable"===e?this.disable(this.selection,!0):"dele"===e?this.dele():"reco"===e&&this.reco(),this.selectDialog=!1}else this.selectAlert()},editgroup:function(){var e=this;this.selection.length?(this.loading=!0,v({ids:this.selectGetIds(),group_id:this.group_id}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},edittag:function(){var e=this;this.selection.length?(this.loading=!0,y({ids:this.selectGetIds(),tag_ids:this.tag_ids}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},edittype:function(){var e=this;this.selection.length?(this.loading=!0,k({ids:this.selectGetIds(),file_type:this.file_type}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},editdomain:function(){var e=this;this.selection.length?(this.loading=!0,w({ids:this.selectGetIds(),domain:this.domain}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),this.select(e),x({ids:this.selectGetIds(),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(){var e=this;this.selection.length?(this.loading=!0,this.recycle?q({ids:this.selectGetIds()}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1})):_({ids:this.selectGetIds()}).then((function(t){e.list(),e.reset(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},reco:function(){var e=this;this.selection.length?(this.loading=!0,$({ids:this.selectGetIds()}).then((function(t){e.list(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):this.selectAlert()},imagePreview:function(e){for(var t=[],l=e.length,i=0;i<l;i++)"image"===e[i]["file_type"]&&t.push(e[i]["file_url"]);this.fileImgPre=t},fileDownload:function(e,t){Object(r["a"])(e.file_name,t,"文件名复制成功"),setTimeout((function(){window.open(e.file_url,"_blank")}),500)},groupSelect:function(){this.uploadData.group_id=this.query.group_id,this.list()},tagSelect:function(){this.uploadData.tag_ids=this.query.tag_ids,this.list()},typeSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.query.file_type=e,this.list()},disableSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.query.is_disable=e,this.list()},frontSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.query.is_front=e,this.list()},storageSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.query.storage=e,this.list()},groupList:function(e){e?this.group=e:(this.query.is_extra=1,this.list())},groupAdd:function(){this.groupDialog=!0,this.groupTitle=this.groupName+"添加",this.groupReset()},groupEdit:function(){var e=this,t=this.query.group_id;t?(this.groupDialog=!0,this.groupTitle=this.groupName+"修改："+this.query.group_id,Object(C["g"])({group_id:this.query.group_id}).then((function(t){e.groupReset(t.data)})).catch((function(t){e.groupDialog=!1}))):this.$alert("请选择需要修改的"+this.groupName,"提示",{type:"warning",callback:function(e){}})},groupCancel:function(){this.groupDialog=!1,this.groupReset()},groupSubmit:function(){var e=this;this.$refs["groupRef"].validate((function(t){t&&(e.loading=!0,e.groupModel.group_id?Object(C["d"])(e.groupModel).then((function(t){e.groupList(),e.groupDialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(C["a"])(e.groupModel).then((function(t){e.groupList(),e.groupDialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},groupDele:function(){var e=this,t=this.query.group_id;if(t){for(var l=this.group,i=l.length,a=this.groupName+"删除："+t,s="",o=0;o<i;o++)if(l[o].group_id===t){s=l[o].group_name;break}var n="确定要删除"+this.groupName+' <span style="color:red">'+s+" </span>吗？";this.$confirm(n,a,{type:"warning",dangerouslyUseHTMLString:!0}).then((function(){e.loading=!0,Object(C["b"])({ids:[t]}).then((function(t){e.groupList(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))})).catch((function(){}))}else this.$alert("请选择需要删除的"+this.groupName,"提示",{type:"warning",callback:function(e){}})},groupReset:function(e){this.groupModel=e||this.$options.data().groupModel},tagList:function(e){e?this.tag=e:(this.query.is_extra=1,this.list())},tagAdd:function(){this.tagDialog=!0,this.tagTitle=this.tagName+"添加",this.tagReset()},tagEdit:function(){var e=this,t=this.query.tag_ids,l=t[0];l?(this.tagDialog=!0,this.tagTitle=this.tagName+"修改："+l,Object(T["g"])({tag_id:l}).then((function(t){e.tagReset(t.data)})).catch((function(t){e.tagDialog=!1}))):this.$alert("请选择需要修改的"+this.tagName,"提示",{type:"warning",callback:function(e){}})},tagCancel:function(){this.tagDialog=!1,this.tagReset()},tagSubmit:function(){var e=this;this.$refs["tagRef"].validate((function(t){t&&(e.loading=!0,e.tagModel.tag_id?Object(T["d"])(e.tagModel).then((function(t){e.tagList(),e.tagReset(),e.tagDialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(T["a"])(e.tagModel).then((function(t){e.tagList(),e.tagReset(),e.tagDialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},tagDele:function(){var e=this,t=this.query.tag_ids,l=t[0];if(l){for(var i=this.tag,a=i.length,s=this.tagName+"删除："+l,o="",n=0;n<a;n++)if(i[n].tag_id===l){o=i[n].tag_name;break}var r="确定要删除"+this.tagName+' <span style="color:red">'+o+" </span>吗？";this.$confirm(r,s,{type:"warning",dangerouslyUseHTMLString:!0}).then((function(){e.loading=!0,Object(T["b"])({ids:[l]}).then((function(t){e.tagList(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))})).catch((function(){}))}else this.$alert("请选择需要删除的"+this.tagName,"提示",{type:"warning",callback:function(e){}})},tagReset:function(e){this.tagModel=e||this.$options.data().tagModel},fileCancel:function(){this.reset(),this.$emit("fileCancel")},fileSubmit:function(e){if(e.length){for(var t=[],l=this.data,i=e.length,a=l.length,s=0;s<i;s++)for(var o=0;o<a;o++)if("card"===this.showMode){if(e[s]===l[o][this.idkey]){t.push(l[o]);break}}else if(e[s][this.idkey]===l[o][this.idkey]){t.push(l[o]);break}this.reset(),this.$emit("fileSubmit",t,this.fileType)}else this.$alert("请选择文件")},copy:function(e,t){Object(r["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},D=O,I=(l("7d48"),l("2877")),j=Object(I["a"])(D,i,a,!1,null,"becbd37c",null);t["a"]=j.exports},"3a09":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"request_ip",label:"请求IP"}}),t("el-option",{attrs:{value:"request_region",label:"请求地区"}}),t("el-option",{attrs:{value:"request_isp",label:"请求ISP"}}),t("el-option",{attrs:{value:"log_type",label:"日志类型"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"log_type"==e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"日志类型",clearable:""},model:{value:e.query.log_type,callback:function(t){e.$set(e.query,"log_type",t)},expression:"query.log_type"}},[t("el-option",{attrs:{value:1,label:"登录日志"}}),t("el-option",{attrs:{value:2,label:"操作日志"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort}},[t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"menu_id",label:"菜单ID","min-width":"100"}}),t("el-table-column",{attrs:{prop:"menu_name",label:"菜单名称","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"menu_url",label:"菜单链接","min-width":"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_ip",label:"请求IP","min-width":"130"}}),t("el-table-column",{attrs:{prop:"request_region",label:"请求地区","min-width":"160","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_isp",label:"请求ISP","min-width":"110","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_code",label:"返回码","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_msg",label:"返回描述","min-width":"115","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"create_time",label:"请求时间","min-width":"155",sortable:"custom"}})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}})],1)},a=[],s=l("98b1"),o=l("333d"),n=l("ebb5"),r={name:"SystemUserCenterLog",components:{Pagination:o["a"]},data:function(){return{name:"我的日志",height:680,loading:!0,idkey:"log_id",exps:[],query:{page:1,limit:12,search_field:"request_region",date_field:"create_time"},data:[],count:0}},created:function(){this.height=Object(s["a"])(280),this.list()},methods:{list:function(){var e=this;this.loading=!0,Object(n["c"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())}}},c=r,u=l("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"4b3b":function(e,t,l){var i={"./content/category":"f4e4","./content/category.vue":"f4e4","./content/content":"4e2a","./content/content.vue":"4e2a","./content/setting":"a202","./content/setting.vue":"a202","./content/tag":"612c","./content/tag.vue":"612c","./file/file":"c3a4","./file/file.vue":"c3a4","./file/group":"ca2b","./file/group.vue":"ca2b","./file/setting":"bb8b","./file/setting.vue":"bb8b","./file/tag":"f170","./file/tag.vue":"f170","./member/api":"ef5c","./member/api.vue":"ef5c","./member/components/SettingApi":"1b95","./member/components/SettingApi.vue":"1b95","./member/components/SettingCaptcha":"515d","./member/components/SettingCaptcha.vue":"515d","./member/components/SettingDiy":"ea60","./member/components/SettingDiy.vue":"ea60","./member/components/SettingLog":"72c4","./member/components/SettingLog.vue":"72c4","./member/components/SettingLogreg":"09ef","./member/components/SettingLogreg.vue":"09ef","./member/components/SettingToken":"dd85","./member/components/SettingToken.vue":"dd85","./member/group":"75bf","./member/group.vue":"75bf","./member/log":"8374","./member/log.vue":"8374","./member/member":"4b59","./member/member.vue":"4b59","./member/setting":"16e5","./member/setting.vue":"16e5","./member/statistic":"d344","./member/statistic.vue":"d344","./member/tag":"7ad1","./member/tag.vue":"7ad1","./setting/accord":"29be","./setting/accord.vue":"29be","./setting/carousel":"747b","./setting/carousel.vue":"747b","./setting/components/WechatMini":"889d","./setting/components/WechatMini.vue":"889d","./setting/components/WechatOffi":"9401","./setting/components/WechatOffi.vue":"9401","./setting/feedback":"d05f","./setting/feedback.vue":"d05f","./setting/notice":"0ee7","./setting/notice.vue":"0ee7","./setting/region":"a9ab","./setting/region.vue":"a9ab","./setting/setting":"e0df","./setting/setting.vue":"e0df","./setting/wechat":"dbe5","./setting/wechat.vue":"dbe5","./system":"26b0","./system/":"26b0","./system/apidoc":"0963","./system/apidoc.vue":"0963","./system/components/IndexContent":"e521","./system/components/IndexContent.vue":"e521","./system/components/IndexCount":"88d4","./system/components/IndexCount.vue":"88d4","./system/components/IndexFile":"16e3","./system/components/IndexFile.vue":"16e3","./system/components/IndexMember":"aa8c","./system/components/IndexMember.vue":"aa8c","./system/components/IndexNotice":"8967","./system/components/IndexNotice.vue":"8967","./system/components/SettingApi":"f72b","./system/components/SettingApi.vue":"f72b","./system/components/SettingCache":"20d7","./system/components/SettingCache.vue":"20d7","./system/components/SettingCaptcha":"73c5","./system/components/SettingCaptcha.vue":"73c5","./system/components/SettingEmail":"f940","./system/components/SettingEmail.vue":"f940","./system/components/SettingLog":"9c2c","./system/components/SettingLog.vue":"9c2c","./system/components/SettingServer":"17f6","./system/components/SettingServer.vue":"17f6","./system/components/SettingSystem":"6a69","./system/components/SettingSystem.vue":"6a69","./system/components/SettingToken":"9079","./system/components/SettingToken.vue":"9079","./system/components/UserCenterEdit":"a05d","./system/components/UserCenterEdit.vue":"a05d","./system/components/UserCenterInfo":"ebdc","./system/components/UserCenterInfo.vue":"ebdc","./system/components/UserCenterLog":"3a09","./system/components/UserCenterLog.vue":"3a09","./system/components/UserCenterPwd":"bb60","./system/components/UserCenterPwd.vue":"bb60","./system/components/UserCenterSetting":"50da","./system/components/UserCenterSetting.vue":"50da","./system/components/system401":"a17d","./system/components/system401.vue":"a17d","./system/components/system404":"7880","./system/components/system404.vue":"7880","./system/components/systemRedirect":"76a1","./system/components/systemRedirect.vue":"76a1","./system/dept":"88b6","./system/dept.vue":"88b6","./system/index":"26b0","./system/index.vue":"26b0","./system/login":"e6ef","./system/login.vue":"e6ef","./system/logout":"9cd6","./system/logout.vue":"9cd6","./system/menu":"5d8a","./system/menu.vue":"5d8a","./system/notice":"89a4","./system/notice.vue":"89a4","./system/post":"156f","./system/post.vue":"156f","./system/role":"f982","./system/role.vue":"f982","./system/setting":"f9fe","./system/setting.vue":"f9fe","./system/user":"b979","./system/user-center":"ddf0","./system/user-center.vue":"ddf0","./system/user-log":"259d","./system/user-log.vue":"259d","./system/user.vue":"b979"};function a(e){var t=s(e);return l(t)}function s(e){if(!l.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id="4b3b"},"4b59":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"nickname",label:"昵称"}}),t("el-option",{attrs:{value:"username",label:"用户名"}}),t("el-option",{attrs:{value:"phone",label:"手机"}}),t("el-option",{attrs:{value:"email",label:"邮箱"}}),t("el-option",{attrs:{value:"tag_ids",label:"标签"}}),t("el-option",{attrs:{value:"group_ids",label:"分组"}}),t("el-option",{attrs:{value:"is_super",label:"超会"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}}),t("el-option",{attrs:{value:"remark",label:"备注"}}),t("el-option",{attrs:{value:"name",label:"姓名"}}),t("el-option",{attrs:{value:"gender",label:"性别"}}),t("el-option",{attrs:{value:"region_id",label:"所在地"}}),t("el-option",{attrs:{value:"reg_channel",label:"注册渠道"}}),t("el-option",{attrs:{value:"reg_type",label:"注册方式"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"tag_ids"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1):"group_ids"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.groupData,(function(e){return t("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})),1):"is_super"===e.query.search_field||"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):"reg_channel"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.reg_channels,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1):"region_id"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.regionData,props:e.regionQueryProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"reg_type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.reg_types,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1):"gender"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.genders,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间字段"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"注册时间"}}),t("el-option",{attrs:{value:"login_time",label:"登录时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改所在地"},on:{click:function(t){return e.selectOpen("region")}}},[e._v("所在地")]),t("el-button",{attrs:{title:"修改标签"},on:{click:function(t){return e.selectOpen("edittag")}}},[e._v("标签")]),t("el-button",{attrs:{title:"修改分组"},on:{click:function(t){return e.selectOpen("editgroup")}}},[e._v("分组")]),t("el-button",{attrs:{title:"重置密码"},on:{click:function(t){return e.selectOpen("repwd")}}},[e._v("密码")]),t("el-button",{attrs:{title:"是否超会"},on:{click:function(t){return e.selectOpen("super")}}},[e._v("超会")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")]),t("el-button",{staticStyle:{float:"right"},attrs:{title:"导出"},on:{click:function(t){return e.selectOpen("export")}}},[e._v("导出")]),t("el-tooltip",{attrs:{effect:"dark",content:"表头：昵称，用户名，手机，邮箱，密码",placement:"left"}},[e.checkPermission(["admin/member.Member/export"])?t("excel-import",{attrs:{"limit-size":1,title:"导入"},on:{"on-import":e.imports}}):e._e()],1)],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"region"===e.selectType?t("el-form-item",{attrs:{label:"所在地",prop:""}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.regionData,props:e.regionProps,clearable:"",filterable:""},model:{value:e.region_id,callback:function(t){e.region_id=t},expression:"region_id"}})],1):"edittag"===e.selectType?t("el-form-item",{attrs:{label:"标签",prop:""}},[t("el-select",{staticClass:"ya-width-100p",attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.tag_ids,callback:function(t){e.tag_ids=t},expression:"tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1):"editgroup"===e.selectType?t("el-form-item",{attrs:{label:"分组",prop:""}},[t("el-select",{staticClass:"ya-width-100p",attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.group_ids,callback:function(t){e.group_ids=t},expression:"group_ids"}},e._l(e.groupData,(function(e){return t("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})),1)],1):"super"===e.selectType?t("el-form-item",{attrs:{label:"是否超会",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_super,callback:function(t){e.is_super=t},expression:"is_super"}}),t("span",[e._v(" 超级会员，拥有所有权限。")])],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}}),e.is_disable?t("span",{staticStyle:{color:"red"}},[e._v(" 禁用后无法登录！")]):e._e()],1):"repwd"===e.selectType?t("el-form-item",{attrs:{label:"新密码",prop:""}},[t("el-input",{attrs:{placeholder:"请输入新密码",clearable:"","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):"export"===e.selectType?t("div",[t("el-form-item",{attrs:{label:"文件名称",prop:""}},[t("el-input",{attrs:{placeholder:"请输入文件名称",clearable:""},model:{value:e.exportFileName,callback:function(t){e.exportFileName=t},expression:"exportFileName"}})],1),t("el-form-item",{attrs:{label:"文件类型",prop:""}},[t("el-select",{model:{value:e.exportBookType,callback:function(t){e.exportBookType=t},expression:"exportBookType"}},e._l(["xlsx","csv","txt"],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"自动宽度",prop:""}},[t("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:e.exportAutoWidth,callback:function(t){e.exportAutoWidth=t},expression:"exportAutoWidth"}}),t("span",[e._v(" 宽度是否自适应")])],1)],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"avatar_id",label:"头像","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.avatar_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.avatar_url,"preview-src-list":[l.row.avatar_url],title:"点击看大图",lazy:"","scroll-container":".el-table__body-wrapper"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"170",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"170",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"phone",label:"手机","min-width":"112",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"200",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_names",label:"分组","min-width":"135","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_super",label:"超会","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.issuper([l.row])}},model:{value:l.row.is_super,callback:function(t){e.$set(l.row,"is_super",t)},expression:"scope.row.is_super"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序",width:"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"头像",prop:"avatar_url"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:12}},[e.model.avatar_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.avatar_url,"preview-src-list":[e.model.avatar_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload()}}},[e._v("上传头像")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete()}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[t("el-input",{key:"nickname",attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.nickname,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{key:"username",attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.username,t)}},slot:"append"})],1)],1),""==e.model.member_id?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{key:"password",attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1):e._e(),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.phone,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.email,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.name,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-select",{model:{value:e.model.gender,callback:function(t){e.$set(e.model,"gender",t)},expression:"model.gender"}},e._l(e.genders,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1)],1),t("el-form-item",{attrs:{label:"标签",prop:"tag_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{multiple:"",clearable:"",filterable:""},model:{value:e.model.tag_ids,callback:function(t){e.$set(e.model,"tag_ids",t)},expression:"model.tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1),t("el-form-item",{attrs:{label:"分组",prop:"group_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.model.group_ids,callback:function(t){e.$set(e.model,"group_ids",t)},expression:"model.group_ids"}},e._l(e.groupData,(function(e){return t("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})),1)],1),t("el-form-item",{attrs:{label:"所在地",prop:"region_id"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.regionData,props:e.regionProps,clearable:""},model:{value:e.model.region_id,callback:function(t){e.$set(e.model,"region_id",t)},expression:"model.region_id"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"openid",prop:"openid"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.openid,callback:function(t){e.$set(e.model,"openid",t)},expression:"model.openid"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"unionid",prop:"unionid"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.unionid,callback:function(t){e.$set(e.model,"unionid",t)},expression:"model.unionid"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"注册时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录时间",prop:"login_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_time,callback:function(t){e.$set(e.model,"login_time",t)},expression:"model.login_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录地区",prop:"login_region"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_region,callback:function(t){e.$set(e.model,"login_region",t)},expression:"model.login_region"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"注册渠道",prop:"reg_channel_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.reg_channel_name,callback:function(t){e.$set(e.model,"reg_channel_name",t)},expression:"model.reg_channel_name"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"注册方式",prop:"reg_type_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.reg_type_name,callback:function(t){e.$set(e.model,"reg_type_name",t)},expression:"model.reg_type_name"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"接口(权限)",prop:"api_ids"}},[t("span",[t("el-checkbox",{on:{change:e.apiExpandAllChange},model:{value:e.apiExpandAll,callback:function(t){e.apiExpandAll=t},expression:"apiExpandAll"}},[e._v("展开")])],1),t("el-tree",{ref:"apiRef",attrs:{data:e.model.api_tree,props:e.apiProps,"default-checked-keys":e.model.api_ids,"expand-on-click-node":!0,"default-expand-all":!1,"check-strictly":!0,"node-key":"api_id","highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label)),l.data.is_check?t("i",{staticClass:"el-icon-check",staticStyle:{color:"#1890ff"},attrs:{title:"已分配"}}):e._e()]),t("span",[l.data.api_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.api_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_group?t("i",{staticClass:"el-icon-s-custom",staticStyle:{"margin-left":"10px"},attrs:{title:"分组"}}):t("i",{staticClass:"el-icon-s-custom",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}],null,!1,1114442010)})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"上传头像",visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("3ca3"),l("ddb0"),l("e350")),o=l("98b1"),n=l("333d"),r=l("3659"),c=l("f71e"),u=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex",float:"right"}},[t("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls, .csv"},on:{change:e.handleClick}}),t("el-button",{attrs:{loading:e.loading},on:{click:e.handleUpload}},[e._v(e._s(e.title))]),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogSync,top:"5vh",width:"70%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogSync=t}}},[t("el-form",{attrs:{"label-width":"0"}},[t("el-form-item",{attrs:{label:"",prop:""}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.excelData.results,height:e.height}},e._l(e.excelData.header,(function(e){return t("el-table-column",{key:e,attrs:{prop:e,label:e,sortable:"","show-overflow-tooltip":""}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("导入")])],1)],1)],1)},d=[],m=(l("a9e3"),l("14d9"),l("00b4"),l("25ca")),p={props:{limitSize:{type:Number,default:1},title:{type:String,default:"导入"}},data:function(){return{loading:!1,height:580,dialogTitle:"导入预览",dialogSync:!1,excelData:{header:null,results:null}}},created:function(){this.height=Object(o["a"])()},methods:{cancel:function(){this.dialogSync=!1},submit:function(){this.dialogSync=!1,this.$emit("on-import",this.excelData)},generateData:function(e){var t=e.header,l=e.results;this.excelData.header=t,this.excelData.results=l,this.dialogSync=!0},handleDrop:function(e){if(e.stopPropagation(),e.preventDefault(),!this.loading){var t=e.dataTransfer.files;if(1===t.length){var l=t[0];if(!this.isExcel(l))return this.$message.error("文件类型仅支持 xlsx、xls、csv"),!1;this.upload(l),e.stopPropagation(),e.preventDefault()}else this.$message.error("只能上传一个文件")}},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files,l=t[0];l&&this.upload(l)},upload:function(e){if(this.$refs["excel-upload-input"].value=null,this.beforeUpload){var t=this.beforeUpload(e);t&&this.readerData(e)}else this.readerData(e)},beforeUpload:function(e){var t=this.limitSize,l=e.size/1024/1024;return!(l>t)||(this.$message.error("文件大小不能大于 ".concat(t," m")),!1)},readerData:function(e){var t=this;return this.loading=!0,new Promise((function(l,i){var a=new FileReader;a.onload=function(e){var i=e.target.result,a=m["a"](i,{type:"array"}),s=a.SheetNames[0],o=a.Sheets[s],n=t.getHeaderRow(o),r=m["b"].sheet_to_json(o);t.generateData({header:n,results:r}),t.loading=!1,l()},a.readAsArrayBuffer(e)}))},getHeaderRow:function(e){var t,l=[],i=m["b"].decode_range(e["!ref"]),a=i.s.r;for(t=i.s.c;t<=i.e.c;++t){var s=e[m["b"].encode_cell({c:t,r:a})],o="UNKNOWN "+t;s&&s.t&&(o=m["b"].format_cell(s)),l.push(o)}return l},isExcel:function(e){return/\.(xlsx|xls|csv)$/.test(e.name)}}},h=p,f=(l("c03c"),l("2877")),b=Object(f["a"])(h,u,d,!1,null,"2de61e28",null),g=b.exports,_=l("ed08"),v=l("69f9"),y={name:"Member",components:{Pagination:n["a"],FileManage:r["a"],ExcelImport:g},data:function(){return{name:"会员",height:680,loading:!1,idkey:"member_id",exps:[],query:{page:1,limit:12,search_field:"nickname",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{member_id:"",avatar_id:0,avatar_url:"",tag_ids:[],group_ids:[],nickname:"",username:"",password:"",phone:"",email:"",name:"",gender:0,region_id:"",remark:"",sort:250,api_ids:[]},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},genders:[],reg_channels:[],reg_types:[],regionData:[],regionProps:{checkStrictly:!0,value:"region_id",label:"region_name",emitPath:!1},regionQueryProps:{checkStrictly:!0,value:"region_id",label:"region_name",multiple:!0,emitPath:!1},tagData:[],groupData:[],selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",region_id:0,tag_ids:[],group_ids:[],password:"",is_super:0,is_disable:0,fileDialog:!1,exportFileName:"",exportBookType:"xlsx",exportAutoWidth:!1,apiProps:{label:"api_name",children:"children"},apiCheckAll:!1,apiExpandAll:!1}},created:function(){this.height=Object(o["a"])(),this.list()},methods:{checkPermission:s["a"],list:function(){var e=this;this.loading=!0,Object(v["j"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.genders=t.data.genders,e.reg_channels=t.data.reg_channels,e.reg_types=t.data.reg_types,e.regionData=t.data.region,e.tagData=t.data.tag,e.groupData=t.data.group,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],Object(v["h"])(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?(e.loading=!0,e.model[e.idkey]?Object(v["d"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(v["a"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请完善必填项*")}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()),this.apiExpandAll=!1},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(_["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length){if(this.selectTitle="选中操作","region"===e)this.selectTitle=this.name+"修改所在地";else if("edittag"===e)this.selectTitle=this.name+"修改标签";else if("editgroup"===e)this.selectTitle=this.name+"修改分组";else if("repwd"===e)this.selectTitle=this.name+"重置密码";else if("super"===e)this.selectTitle=this.name+"是否超会";else if("disable"===e)this.selectTitle=this.name+"是否禁用";else if("dele"===e)this.selectTitle=this.name+"删除";else if("export"===e){var l=new Date,i=l.getMonth()+1;i=i<10?"0"+i:i,this.exportFileName=this.name+l.getFullYear()+"-"+i+"-"+l.getDate(),this.selectTitle=this.name+"导出"}else"import"===e&&(this.selectTitle=this.name+"导入");this.selectDialog=!0,this.selectType=e}else this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"region"===e?this.region(this.selection):"edittag"===e?this.edittag(this.selection):"editgroup"===e?this.editgroup(this.selection):"repwd"===e?this.repwd(this.selection):"super"===e?this.issuper(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e?this.dele(this.selection):"export"===e?this.export(this.selection):"import"===e&&this.import(this.selection),this.selectDialog=!1}else this.selectAlert()},region:function(e){var t=this;e.length?(this.loading=!0,Object(v["k"])({ids:this.selectGetIds(e),region_id:this.region_id}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},edittag:function(e){var t=this;e.length?(this.loading=!0,Object(v["f"])({ids:this.selectGetIds(e),tag_ids:this.tag_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editgroup:function(e){var t=this;e.length?(this.loading=!0,Object(v["e"])({ids:this.selectGetIds(e),group_ids:this.group_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},repwd:function(e){var t=this;e.length?this.password?(this.loading=!0,Object(v["l"])({ids:this.selectGetIds(e),password:this.password}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.$message.error("请输入新密码"):this.selectAlert()},issuper:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_super;l&&(i=this.is_super),Object(v["i"])({ids:this.selectGetIds(e),is_super:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),Object(v["c"])({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,Object(v["b"])({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},imports:function(e){var t=this,l=e.results;e.header;this.loading=!0,Object(v["g"])({import:l}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},export:function(e){var t=this;this.loading=!0,l.e("chunk-54912b74").then(l.bind(null,"2a80")).then((function(l){var i=[{member_id:"ID"},{nickname:"昵称"},{username:"用户名"},{phone:"手机"},{email:"邮箱"},{is_super:"超会"},{is_disable:"禁用"},{remark:"备注"},{create_time:"注册时间"}];l.excelExport(e,i,t.exportFileName,t.exportBookType,t.exportAutoWidth),t.loading=!1}))},apiExpandAllChange:function(){for(var e=this.apiExpandAll,t=this.$refs.apiRef.store._getAllNodes().length,l=0;l<t;l++)this.$refs.apiRef.store._getAllNodes()[l].expanded=e},fileUpload:function(){this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=e.length;if(t){var l=t-1;this.model.avatar_id=e[l]["file_id"],this.model.avatar_url=e[l]["file_url"]}},fileDelete:function(){this.model.avatar_id=0,this.model.avatar_url=""},copy:function(e,t){Object(c["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},k=y,w=Object(f["a"])(k,i,a,!1,null,null,null);t["default"]=w.exports},"4bd9":function(e,t,l){},"4cea":function(e,t,l){"use strict";l("4bd9")},"4e2a":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82"),l("a4d3"),l("e01a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"name",label:"名称"}}),t("el-option",{attrs:{value:"unique",label:"标识"}}),t("el-option",{attrs:{value:"category_ids",label:"分类"}}),t("el-option",{attrs:{value:"tag_ids",label:"标签"}}),t("el-option",{attrs:{value:"is_top",label:"置顶"}}),t("el-option",{attrs:{value:"is_hot",label:"热门"}}),t("el-option",{attrs:{value:"is_rec",label:"推荐"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"category_ids"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.categoryData,props:e.categoryProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"tag_ids"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1):"is_top"===e.query.search_field||"is_hot"===e.query.search_field||"is_rec"===e.query.search_field||"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改分类"},on:{click:function(t){return e.selectOpen("editcate")}}},[e._v("分类")]),t("el-button",{attrs:{title:"修改标签"},on:{click:function(t){return e.selectOpen("edittag")}}},[e._v("标签")]),t("el-button",{attrs:{title:"是否置顶"},on:{click:function(t){return e.selectOpen("istop")}}},[e._v("置顶")]),t("el-button",{attrs:{title:"是否热门"},on:{click:function(t){return e.selectOpen("ishot")}}},[e._v("热门")]),t("el-button",{attrs:{title:"是否推荐"},on:{click:function(t){return e.selectOpen("isrec")}}},[e._v("推荐")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"editcate"===e.selectType?t("el-form-item",{attrs:{label:"分类",prop:""}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.categoryData,props:e.categoryProps,clearable:"",filterable:""},model:{value:e.category_ids,callback:function(t){e.category_ids=t},expression:"category_ids"}})],1):"edittag"===e.selectType?t("el-form-item",{attrs:{label:"标签",prop:""}},[t("el-select",{staticClass:"ya-width-100p",attrs:{multiple:"",clearable:"",filterable:""},model:{value:e.tag_ids,callback:function(t){e.tag_ids=t},expression:"tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1):"istop"===e.selectType?t("el-form-item",{attrs:{label:"是否置顶",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_top,callback:function(t){e.is_top=t},expression:"is_top"}})],1):"ishot"===e.selectType?t("el-form-item",{attrs:{label:"是否热门",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_hot,callback:function(t){e.is_hot=t},expression:"is_hot"}})],1):"isrec"===e.selectType?t("el-form-item",{attrs:{label:"是否推荐",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_rec,callback:function(t){e.is_rec=t},expression:"is_rec"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"cover_url",label:"封面","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.cover_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.cover_url,"preview-src-list":[l.row.cover_url],title:"点击看大图",lazy:"","scroll-container":".el-table__body-wrapper"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"unique",label:"标识","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"category_names",label:"分类","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_top",label:"置顶","min-width":"72",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.istop([l.row])}},model:{value:l.row.is_top,callback:function(t){e.$set(l.row,"is_top",t)},expression:"scope.row.is_top"}})]}}])}),t("el-table-column",{attrs:{prop:"is_hot",label:"热门","min-width":"72",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.ishot([l.row])}},model:{value:l.row.is_hot,callback:function(t){e.$set(l.row,"is_hot",t)},expression:"scope.row.is_hot"}})]}}])}),t("el-table-column",{attrs:{prop:"is_rec",label:"推荐","min-width":"72",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.isrec([l.row])}},model:{value:l.row.is_rec,callback:function(t){e.$set(l.row,"is_rec",t)},expression:"scope.row.is_rec"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"72",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"hits",label:"点击","min-width":"72",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"72",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text",title:"信息/修改"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"封面",prop:"cover_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:12}},[e.model.cover_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.cover_url,"preview-src-list":[e.model.cover_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","cover_id","上传封面")}}},[e._v("上传封面")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete(0,"cover_id")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("el-form-item",{attrs:{label:"标识",prop:"unique"}},[t("el-input",{attrs:{placeholder:"请输入标识（唯一）",clearable:""},model:{value:e.model.unique,callback:function(t){e.$set(e.model,"unique",t)},expression:"model.unique"}})],1),t("el-form-item",{attrs:{label:"分类",prop:"category_ids"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.categoryData,props:e.categoryProps,clearable:"",filterable:""},model:{value:e.model.category_ids,callback:function(t){e.$set(e.model,"category_ids",t)},expression:"model.category_ids"}})],1),t("el-form-item",{attrs:{label:"标签",prop:"tag_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{multiple:"",clearable:"",filterable:""},model:{value:e.model.tag_ids,callback:function(t){e.$set(e.model,"tag_ids",t)},expression:"model.tag_ids"}},e._l(e.tagData,(function(e){return t("el-option",{key:e.tag_id,attrs:{label:e.tag_name,value:e.tag_id}})})),1)],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"title",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[t("el-input",{attrs:{placeholder:"keywords",clearable:""},model:{value:e.model.keywords,callback:function(t){e.$set(e.model,"keywords",t)},expression:"model.keywords"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"description",clearable:""},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),t("el-form-item",{attrs:{label:"作者",prop:"author"}},[t("el-input",{attrs:{placeholder:"author",clearable:""},model:{value:e.model.author,callback:function(t){e.$set(e.model,"author",t)},expression:"model.author"}})],1),t("el-form-item",{attrs:{label:"链接",prop:"url"}},[t("el-input",{attrs:{placeholder:"url",clearable:""},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"sort",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"images"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","images","上传图片")}}},[e._v("上传图片")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("图片文件。")])])],1),t("el-row",e._l(e.model.images,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:l.file_url,"preview-src-list":[l.file_url],title:"点击看大图"}}),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"images")}}})],1)],1)})),1)],1),t("el-form-item",{attrs:{label:"视频",prop:"videos"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("video","videos","上传视频")}}},[e._v("上传视频")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("视频文件。")])])],1),t("el-row",e._l(e.model.videos,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[t("div",{style:{width:"100%",height:(e.height-.1*e.height)/3-(e.height-.1*e.height)/3*.5+"px"}},[t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.file_url,height:"100%"}},[t("embed",{attrs:{src:l.file_url,height:"100%"}})])])]),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"videos","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"videos","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"videos")}}})],1)])})),1)],1),t("el-form-item",{attrs:{label:"音频",prop:"audios"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("audio","audios","上传音频")}}},[e._v("上传音频")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("音频文件。")])])],1),t("el-row",e._l(e.model.audios,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[t("div",{style:{width:"100%",height:(e.height-.1*e.height)/3-(e.height-.1*e.height)/3*.5+"px"}},[t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.file_url,height:"100%"}})])]),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"audios","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"audios","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"audios")}}})],1)])})),1)],1),t("el-form-item",{attrs:{label:"文档",prop:"words"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("word","words","上传文档")}}},[e._v("上传文档")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("文档文件。")])])],1),e._l(e.model.words,(function(l,i){return t("el-row",{key:i},[t("el-col",{staticClass:"ya-file-name",attrs:{span:18}},[t("i",{staticClass:"el-icon-document"}),t("span",{staticStyle:{"margin-left":"5px"},attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))])]),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-top",title:"向上移动"},on:{click:function(t){return e.fileRemoval(i,"words","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-bottom",title:"向下移动"},on:{click:function(t){return e.fileRemoval(i,"words","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"words")}}})],1)],1)}))],2),t("el-form-item",{attrs:{label:"其它",prop:"others"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("other","others","上传其它")}}},[e._v("上传其它")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("其它文件。")])])],1),e._l(e.model.others,(function(l,i){return t("el-row",{key:i},[t("el-col",{staticClass:"ya-file-name",attrs:{span:18}},["image"===l.file_type?t("i",{staticClass:"el-icon-picture"}):"audio"===l.file_type?t("i",{staticClass:"el-icon-headset"}):"video"===l.file_type?t("i",{staticClass:"el-icon-video-play"}):"word"===l.file_type?t("i",{staticClass:"el-icon-document"}):t("i",{staticClass:"el-icon-folder"}),t("span",{staticStyle:{"margin-left":"5px"},attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))])]),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-top",title:"向上移动"},on:{click:function(t){return e.fileRemoval(i,"others","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-bottom",title:"向下移动"},on:{click:function(t){return e.fileRemoval(i,"others","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"others")}}})],1)],1)}))],2),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("rich-editor",{model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("14d9"),l("a434"),l("98b1")),o=l("333d"),n=l("3659"),r=l("6a13"),c=l("f71e"),u=l("ed08"),d=l("b775"),m="/admin/content.Content/";function p(e){return Object(d["a"])({url:m+"list",method:"get",params:e})}function h(e){return Object(d["a"])({url:m+"info",method:"get",params:e})}function f(e){return Object(d["a"])({url:m+"add",method:"post",data:e})}function b(e){return Object(d["a"])({url:m+"edit",method:"post",data:e})}function g(e){return Object(d["a"])({url:m+"dele",method:"post",data:e})}function _(e){return Object(d["a"])({url:m+"editcate",method:"post",data:e})}function v(e){return Object(d["a"])({url:m+"edittag",method:"post",data:e})}function y(e){return Object(d["a"])({url:m+"istop",method:"post",data:e})}function k(e){return Object(d["a"])({url:m+"ishot",method:"post",data:e})}function w(e){return Object(d["a"])({url:m+"isrec",method:"post",data:e})}function x(e){return Object(d["a"])({url:m+"disable",method:"post",data:e})}var S={name:"ContentContent",components:{Pagination:o["a"],FileManage:n["a"],RichEditor:r["a"]},directives:{},data:function(){return{name:"内容",height:680,loading:!1,idkey:"content_id",exps:[],query:{page:1,limit:12,search_field:"name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{content_id:"",category_ids:[],tag_ids:[],cover_id:0,cover_url:"",name:"",title:"",keywords:"",description:"",content:"",author:"",url:"",images:[],videos:[],audios:[],words:[],others:[],sort:250},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},tagData:[],categoryData:[],categoryProps:{checkStrictly:!0,value:"category_id",label:"category_name",multiple:!0,emitPath:!1},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",category_ids:0,tag_ids:[],is_top:0,is_hot:0,is_rec:0,is_disable:0,fileDialog:!1,fileTitle:"文件管理",fileType:"image",fileField:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,p(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.categoryData=t.data.category,e.tagData=t.data.tag,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],h(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?e.model[e.idkey]?b(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){})):f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){})):e.$message.error("请完善必填项*")}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(u["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","editcate"===e?this.selectTitle=this.name+"修改分类":"edittag"===e?this.selectTitle=this.name+"修改标签":"istop"===e?this.selectTitle=this.name+"是否置顶":"ishot"===e?this.selectTitle=this.name+"是否热门":"isrec"===e?this.selectTitle=this.name+"是否推荐":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"editcate"===e?this.editcate(this.selection):"edittag"===e?this.edittag(this.selection):"istop"===e?this.istop(this.selection,!0):"ishot"===e?this.ishot(this.selection,!0):"isrec"===e?this.isrec(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},editcate:function(e){var t=this;_({ids:this.selectGetIds(e),category_ids:this.category_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},edittag:function(e){var t=this;e.length?(this.loading=!0,v({ids:this.selectGetIds(e),tag_ids:this.tag_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},istop:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_top;l&&(i=this.is_top),y({ids:this.selectGetIds(e),is_top:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},ishot:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_hot;l&&(i=this.is_hot),k({ids:this.selectGetIds(e),is_hot:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},isrec:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_rec;l&&(i=this.is_rec),w({ids:this.selectGetIds(e),is_rec:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),x({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,g({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"文件管理";this.fileType=e,this.fileField=t,this.fileTitle=l,this.fileDialog=!0},fileCancel:function(){this.fileType="image",this.fileField="",this.fileTitle="文件管理",this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l)if("cover_id"===t){var i=l-1;this.model.cover_id=e[i]["file_id"],this.model.cover_url=e[i]["file_url"]}else for(var a=0;a<l;a++)"images"===t?this.model.images.push(e[a]):"videos"===t?this.model.videos.push(e[a]):"audios"===t?this.model.audios.push(e[a]):"words"===t?this.model.words.push(e[a]):"others"===t&&this.model.others.push(e[a])},fileRemoval:function(e,t,l){var i=this.model[t].length,a=e;if("left"===l){if(e<=0)return!1;--a}else{if(e>=i-1)return!1;++a}var s=this.model[t][e],o=this.model[t][a];this.model[t][e]=o,this.model[t][a]=s,this.$forceUpdate()},fileDownload:function(e,t){Object(c["a"])(e.file_name,t,"文件名复制成功"),setTimeout((function(){window.open(e.file_url,"_blank")}),500)},fileDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"cover_id"===t?(this.model.cover_id=0,this.model.cover_url=""):"images"===t?this.model.images.splice(e,1):"videos"===t?this.model.videos.splice(e,1):"audios"===t?this.model.audios.splice(e,1):"words"===t?this.model.words.splice(e,1):"others"===t&&this.model.others.splice(e,1)}}},$=S,q=(l("6ea0"),l("2877")),C=Object(q["a"])($,i,a,!1,null,"de0a2f7a",null);t["default"]=C.exports},"4f49":function(e,t,l){"use strict";l.d(t,"l",(function(){return s})),l.d(t,"k",(function(){return o})),l.d(t,"d",(function(){return n})),l.d(t,"c",(function(){return r})),l.d(t,"h",(function(){return c})),l.d(t,"g",(function(){return u})),l.d(t,"b",(function(){return d})),l.d(t,"a",(function(){return m})),l.d(t,"j",(function(){return p})),l.d(t,"i",(function(){return h})),l.d(t,"f",(function(){return f})),l.d(t,"e",(function(){return b}));var i=l("b775"),a="/admin/member.Setting/";function s(e){return Object(i["a"])({url:a+"tokenInfo",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"tokenEdit",method:"post",data:e})}function n(e){return Object(i["a"])({url:a+"captchaInfo",method:"get",params:e})}function r(e){return Object(i["a"])({url:a+"captchaEdit",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"logInfo",method:"get",params:e})}function u(e){return Object(i["a"])({url:a+"logEdit",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"apiInfo",method:"get",params:e})}function m(e){return Object(i["a"])({url:a+"apiEdit",method:"post",data:e})}function p(e){return Object(i["a"])({url:a+"logregInfo",method:"get",params:e})}function h(e){return Object(i["a"])({url:a+"logregEdit",method:"post",data:e})}function f(e){return Object(i["a"])({url:a+"diyInfo",method:"get",params:e})}function b(e){return Object(i["a"])({url:a+"diyEdit",method:"post",data:e})}},"505c":function(e,t,l){"use strict";l.d(t,"h",(function(){return s})),l.d(t,"g",(function(){return o})),l.d(t,"a",(function(){return n})),l.d(t,"d",(function(){return r})),l.d(t,"b",(function(){return c})),l.d(t,"c",(function(){return u})),l.d(t,"e",(function(){return d})),l.d(t,"f",(function(){return m}));var i=l("b775"),a="/admin/file.Tag/";function s(e){return Object(i["a"])({url:a+"list",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"info",method:"get",params:e})}function n(e){return Object(i["a"])({url:a+"add",method:"post",data:e})}function r(e){return Object(i["a"])({url:a+"edit",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"dele",method:"post",data:e})}function u(e){return Object(i["a"])({url:a+"disable",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"file",method:"get",params:e})}function m(e){return Object(i["a"])({url:a+"fileRemove",method:"post",data:e})}},"50da":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{xs:24,sm:22,md:20,lg:16,xl:12}},[t("el-form",{ref:"ref",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"设置主题"}},[t("theme-picker",{on:{change:e.themeChange}}),t("span",[e._v(" 设置主题（部分样式）")])],1),t("el-form-item",{attrs:{label:"便签导航"}},[t("el-switch",{staticClass:"drawer-switch",model:{value:e.tagsView,callback:function(t){e.tagsView=t},expression:"tagsView"}}),t("span",[e._v(" 是否显示便签导航")])],1),t("el-form-item",{attrs:{label:"固定头部"}},[t("el-switch",{staticClass:"drawer-switch",model:{value:e.fixedHeader,callback:function(t){e.fixedHeader=t},expression:"fixedHeader"}}),t("span",[e._v(" 便签导航和头部是否固定")])],1),t("el-form-item",{attrs:{label:"logo名称"}},[t("el-switch",{staticClass:"drawer-switch",model:{value:e.sidebarLogo,callback:function(t){e.sidebarLogo=t},expression:"sidebarLogo"}}),t("span",[e._v(" 左上角是否显示logo名称")])],1),t("el-form-item",{attrs:{label:"本地缓存"}},[t("el-button",{attrs:{loading:e.loading,type:"primary",size:"mini"},on:{click:e.localCacheClear}},[e._v("清除")]),t("span",[e._v(" 清除后需要重新登录")])],1)],1)],1)],1)],1)],1)},a=[],s=(l("ac1f"),l("466d"),l("14d9"),l("98b1")),o=function(){var e=this,t=e._self._c;return t("el-color-picker",{staticClass:"theme-picker",attrs:{predefine:["#409EFF","#1890ff","#304156","#212121","#11a983","#13c2c2","#6959CD","#f5222d"],"popper-class":"theme-picker-dropdown"},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}})},n=[],r=l("c7eb"),c=l("1da1"),u=(l("5319"),l("4de4"),l("d3b7"),l("fb6a"),l("00b4"),l("4d63"),l("c607"),l("2c3e"),l("25f0"),l("159b"),l("a15b"),l("99af"),l("a9e3"),l("b680"),l("f6f8").version),d="#409EFF",m={data:function(){return{chalk:"",theme:""}},computed:{defaultTheme:function(){return this.$store.state.settings.theme}},watch:{defaultTheme:{handler:function(e,t){this.theme=e},immediate:!0},theme:function(e){var t=this;return Object(c["a"])(Object(r["a"])().mark((function l(){var i,a,s,o,n,c,m,p;return Object(r["a"])().wrap((function(l){while(1)switch(l.prev=l.next){case 0:if(i=t.chalk?t.theme:d,"string"===typeof e){l.next=3;break}return l.abrupt("return");case 3:if(a=t.getThemeCluster(e.replace("#","")),s=t.getThemeCluster(i.replace("#","")),o=t.$message({message:"  Compiling the theme",customClass:"theme-message",type:"success",duration:0,iconClass:"el-icon-loading"}),n=function(e,l){return function(){var i=t.getThemeCluster(d.replace("#","")),s=t.updateStyle(t[e],i,a),o=document.getElementById(l);o||(o=document.createElement("style"),o.setAttribute("id",l),document.head.appendChild(o)),o.innerText=s}},t.chalk){l.next=11;break}return c="https://unpkg.com/element-ui@".concat(u,"/lib/theme-chalk/index.css"),l.next=11,t.getCSSString(c,"chalk");case 11:m=n("chalk","chalk-style"),m(),p=[].slice.call(document.querySelectorAll("style")).filter((function(e){var t=e.innerText;return new RegExp(i,"i").test(t)&&!/Chalk Variables/.test(t)})),p.forEach((function(e){var l=e.innerText;"string"===typeof l&&(e.innerText=t.updateStyle(l,s,a))})),t.$emit("change",e),o.close();case 17:case"end":return l.stop()}}),l)})))()}},methods:{updateStyle:function(e,t,l){var i=e;return t.forEach((function(e,t){i=i.replace(new RegExp(e,"ig"),l[t])})),i},getCSSString:function(e,t){var l=this;return new Promise((function(i){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(l[t]=a.responseText.replace(/@font-face{[^}]+}/,""),i())},a.open("GET",e),a.send()}))},getThemeCluster:function(e){for(var t=function(e,t){var l=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),a=parseInt(e.slice(4,6),16);return 0===t?[l,i,a].join(","):(l+=Math.round(t*(255-l)),i+=Math.round(t*(255-i)),a+=Math.round(t*(255-a)),l=l.toString(16),i=i.toString(16),a=a.toString(16),"#".concat(l).concat(i).concat(a))},l=function(e,t){var l=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),a=parseInt(e.slice(4,6),16);return l=Math.round((1-t)*l),i=Math.round((1-t)*i),a=Math.round((1-t)*a),l=l.toString(16),i=i.toString(16),a=a.toString(16),"#".concat(l).concat(i).concat(a)},i=[e],a=0;a<=9;a++)i.push(t(e,Number((a/10).toFixed(2))));return i.push(l(e,.1)),i}}},p=m,h=(l("5c6c0"),l("2877")),f=Object(h["a"])(p,o,n,!1,null,null,null),b=f.exports,g={name:"SystemUserCenterSetting",components:{ThemePicker:b},data:function(){return{name:"我的设置",height:680,loading:!1}},computed:{tagsView:{get:function(){return this.$store.state.settings.tagsView},set:function(e){this.$store.dispatch("settings/changeSetting",{key:"tagsView",value:e})}},fixedHeader:{get:function(){return this.$store.state.settings.fixedHeader},set:function(e){this.$store.dispatch("settings/changeSetting",{key:"fixedHeader",value:e})}},sidebarLogo:{get:function(){return this.$store.state.settings.sidebarLogo},set:function(e){this.$store.dispatch("settings/changeSetting",{key:"sidebarLogo",value:e})}}},created:function(){this.height=Object(s["a"])(180)},methods:{themeChange:function(e){this.$store.dispatch("settings/changeSetting",{key:"theme",value:e})},localCacheClear:function(){this.loading=!0,localStorage.clear(),sessionStorage.clear();var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;path=/;expires="+new Date(0).toUTCString(),document.cookie=e[t]+"=0;path=/;domain="+document.domain+";expires="+new Date(0).toUTCString();this.$router.push("/login"),this.loading=!1,this.$message.success("本地缓存已清除")}}},_=g,v=Object(h["a"])(_,i,a,!1,null,null,null);t["default"]=v.exports},"515d":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"注册验证码",prop:"captcha_register"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.captcha_register,callback:function(t){e.$set(e.model,"captcha_register",t)},expression:"model.captcha_register"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后，会员注册需要输入验证码。 ")])],1),t("el-form-item",{attrs:{label:"登录验证码",prop:"captcha_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.captcha_login,callback:function(t){e.$set(e.model,"captcha_login",t)},expression:"model.captcha_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后，会员登录需要输入验证码。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("4f49"),n={name:"MemberSettingCaptcha",components:{},data:function(){return{name:"验证码设置",height:680,loading:!1,model:{captcha_register:0,captcha_login:0},rules:{}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["d"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["d"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["c"])(e.model).then((function(t){e.info(),e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"5c6c0":function(e,t,l){"use strict";l("5d22")},"5d22":function(e,t,l){},"5d8a":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"menu_pid",label:"上级"}}),t("el-option",{attrs:{value:"menu_name",label:"名称"}}),t("el-option",{attrs:{value:"menu_url",label:"链接"}}),t("el-option",{attrs:{value:"menu_type",label:"类型"}}),t("el-option",{attrs:{value:"is_unlogin",label:"免登"}}),t("el-option",{attrs:{value:"is_unauth",label:"免权"}}),t("el-option",{attrs:{value:"is_unrate",label:"免限"}}),t("el-option",{attrs:{value:"hidden",label:"隐藏"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"menu_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"menu_type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:0,label:"目录"}}),t("el-option",{attrs:{value:1,label:"菜单"}}),t("el-option",{attrs:{value:2,label:"按钮"}})],1):"is_unlogin"===e.query.search_field||"is_unauth"===e.query.search_field||"is_unrate"===e.query.search_field||"hidden"===e.query.search_field||"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",title:"收起/展开"},on:{change:e.expandAll},model:{value:e.isExpandAll,callback:function(t){e.isExpandAll=t},expression:"isExpandAll"}},[e._v("收起")]),t("el-button",{attrs:{title:"解除角色"},on:{click:function(t){return e.selectOpen("remover")}}},[e._v("角色")]),t("el-button",{attrs:{title:"修改排序"},on:{click:function(t){return e.selectOpen("editsort")}}},[e._v("排序")]),t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"是否免登"},on:{click:function(t){return e.selectOpen("unlogin")}}},[e._v("免登")]),t("el-button",{attrs:{title:"是否免权"},on:{click:function(t){return e.selectOpen("unauth")}}},[e._v("免权")]),t("el-button",{attrs:{title:"是否免限"},on:{click:function(t){return e.selectOpen("unrate")}}},[e._v("免限")]),t("el-button",{attrs:{title:"是否隐藏"},on:{click:function(t){return e.selectOpen("hidden")}}},[e._v("隐藏")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"remover"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的角色吗？")])]):"editsort"===e.selectType?t("el-form-item",{attrs:{label:"排序",prop:""}},[t("el-input",{attrs:{type:"number",placeholder:"250"},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}}),t("el-input",{attrs:{type:"text",placeholder:"0"},model:{value:e.sort_incdec,callback:function(t){e.sort_incdec=t},expression:"sort_incdec"}},[t("template",{slot:"append"},[e._v("按"+e._s(e.name)+"ID顺序递增或递减排序")])],2)],1):"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级菜单",clearable:"",filterable:""},model:{value:e.menu_pid,callback:function(t){e.menu_pid=t},expression:"menu_pid"}})],1):"unlogin"===e.selectType?t("el-form-item",{attrs:{label:"是否免登",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unlogin,callback:function(t){e.is_unlogin=t},expression:"is_unlogin"}})],1):"unauth"===e.selectType?t("el-form-item",{attrs:{label:"是否免权",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unauth,callback:function(t){e.is_unauth=t},expression:"is_unauth"}})],1):"unrate"===e.selectType?t("el-form-item",{attrs:{label:"是否免限",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unrate,callback:function(t){e.is_unrate=t},expression:"is_unrate"}})],1):"hidden"===e.selectType?t("el-form-item",{attrs:{label:"是否隐藏",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.hidden,callback:function(t){e.hidden=t},expression:"hidden"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height,"row-key":e.idkey,"default-expand-all":""},on:{"selection-change":e.select,"select-all":e.selectAll,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"menu_name",label:"菜单名称","min-width":"210","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"meta_icon",label:"图标","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("i",{class:e.row.meta_icon})]}}])}),t("el-table-column",{attrs:{prop:"menu_url",label:"菜单链接","min-width":"235","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"path",label:"路由地址","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"name",label:"路由名称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"component",label:"组件路径","min-width":"135","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"menu_type",label:"类型","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(l){return[0==l.row.menu_type?t("i",{staticClass:"el-icon-folder",attrs:{title:"目录"}}):1==l.row.menu_type?t("i",{staticClass:"el-icon-menu",attrs:{title:"菜单"}}):2==l.row.menu_type?t("i",{staticClass:"el-icon-open",attrs:{title:"按钮"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_unlogin",label:"免登","min-width":"66"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.menu_url?t("el-switch",{attrs:{width:35,"active-value":1,"inactive-value":0},on:{change:function(t){return e.unlogin([l.row])}},model:{value:l.row.is_unlogin,callback:function(t){e.$set(l.row,"is_unlogin",t)},expression:"scope.row.is_unlogin"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_unauth",label:"免权","min-width":"66"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.menu_url?t("el-switch",{attrs:{width:35,"active-value":1,"inactive-value":0},on:{change:function(t){return e.unauth([l.row])}},model:{value:l.row.is_unauth,callback:function(t){e.$set(l.row,"is_unauth",t)},expression:"scope.row.is_unauth"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_unrate",label:"免限","min-width":"66"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.menu_url?t("el-switch",{attrs:{width:35,"active-value":1,"inactive-value":0},on:{change:function(t){return e.unrate([l.row])}},model:{value:l.row.is_unrate,callback:function(t){e.$set(l.row,"is_unrate",t)},expression:"scope.row.is_unrate"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"66"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.menu_url?t("el-switch",{attrs:{width:35,"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"hidden",label:"隐藏","min-width":"66"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{width:35,"active-value":1,"inactive-value":0},on:{change:function(t){return e.ishidden([l.row])}},model:{value:l.row.hidden,callback:function(t){e.$set(l.row,"hidden",t)},expression:"scope.row.hidden"}})]}}])}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"55"}}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"50"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.roleShow(l.row)}}},[e._v("角色")]),t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height-50+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"菜单上级",prop:"menu_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级菜单",clearable:"",filterable:""},model:{value:e.model.menu_pid,callback:function(t){e.$set(e.model,"menu_pid",t)},expression:"model.menu_pid"}})],1),t("el-form-item",{attrs:{label:"菜单类型",prop:"menu_type"}},[t("el-radio-group",{model:{value:e.model.menu_type,callback:function(t){e.$set(e.model,"menu_type",t)},expression:"model.menu_type"}},[t("el-radio",{attrs:{label:0}},[e._v("目录"),t("i",{staticClass:"el-icon-folder"})]),t("el-radio",{attrs:{label:1}},[e._v("菜单"),t("i",{staticClass:"el-icon-menu"})]),t("el-radio",{attrs:{label:2}},[e._v("按钮"),t("i",{staticClass:"el-icon-open"})])],1)],1),2!==e.model.menu_type?t("el-form-item",{attrs:{label:"菜单图标",prop:"meta_icon"}},[t("e-icon-picker",{attrs:{options:{ElementUI:!0},"z-index":3500},model:{value:e.model.meta_icon,callback:function(t){e.$set(e.model,"meta_icon",t)},expression:"model.meta_icon"}})],1):e._e(),t("el-form-item",{attrs:{label:"菜单名称",prop:"menu_name"}},[t("el-input",{attrs:{clearable:"",placeholder:"meta.title；侧边栏菜单名称"},model:{value:e.model.menu_name,callback:function(t){e.$set(e.model,"menu_name",t)},expression:"model.menu_name"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"meta.title；侧边栏菜单名称"}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.menu_name,t)}}})],1)],2)],1),t("el-form-item",{attrs:{label:"菜单链接",prop:"menu_url"}},[t("el-input",{attrs:{clearable:"",placeholder:"roles；权限标识：应用/控制器/操作；区分大小写"},model:{value:e.model.menu_url,callback:function(t){e.$set(e.model,"menu_url",t)},expression:"model.menu_url"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"roles；权限标识：应用/控制器/操作，区分大小写"}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.menu_url,t)}}})],1)],2)],1),2!==e.model.menu_type?t("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[t("el-input",{attrs:{clearable:"",placeholder:"path；路由地址，如：member，一级菜单需在前面加斜杠/；外链为 http 地址"},model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"path；路由地址，如：member，一级菜单需在前面加斜杠/；外链为 http 地址"}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.path,t)}}})],1)],2)],1):e._e(),1===e.model.menu_type?t("el-form-item",{attrs:{label:"路由名称",prop:"name"}},[t("el-input",{attrs:{clearable:"",placeholder:"name；组件name属性，如：Member，<keep-alive> 用到；外链可随意填写"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"name；组件的name属性，如：Member，<keep-alive> 用到；外链可随意填写"}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.name,t)}}})],1)],2)],1):e._e(),0===e.model.menu_type||1===e.model.menu_type?t("el-form-item",{attrs:{label:"组件地址",prop:"component"}},[t("el-input",{attrs:{clearable:"",placeholder:"component；组件路径，如：member/member，默认在 views 目录下"},model:{value:e.model.component,callback:function(t){e.$set(e.model,"component",t)},expression:"model.component"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"component；组件路径，如：member/member，默认在 views 目录下"}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.component,t)}}})],1)],2)],1):e._e(),1===e.model.menu_type?t("el-form-item",{attrs:{label:"路由参数",prop:"meta_query"}},[t("el-input",{attrs:{clearable:"",placeholder:'meta.query；路由的默认传递参数，如：{ "recycle": 0 }'},model:{value:e.model.meta_query,callback:function(t){e.$set(e.model,"meta_query",t)},expression:"model.meta_query"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:'meta.query；路由的默认传递参数，如：{ "recycle": 0 }'}})],1),t("template",{slot:"append"},[t("el-button",{attrs:{icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.meta_query,t)}}})],1)],2)],1):e._e(),2!==e.model.menu_type?t("el-form-item",{attrs:{label:"是否隐藏",prop:"hidden"}},[t("el-button",{attrs:{icon:"el-icon-question",title:"hidden；隐藏后侧边栏不显示，但仍然可以访问"}}),t("el-radio-group",{staticStyle:{"margin-left":"10px"},model:{value:e.model.hidden,callback:function(t){e.$set(e.model,"hidden",t)},expression:"model.hidden"}},[t("el-radio",{attrs:{label:0}},[e._v("否")]),t("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1):e._e(),t("el-form-item",{attrs:{label:"菜单排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"250"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}},[t("template",{slot:"prepend"},[t("el-button",{attrs:{icon:"el-icon-question",title:"降序，数值越大越排在前面"}})],1)],2)],1),1===e.model.menu_type?t("el-form-item",{attrs:{label:"快速添加",prop:"add"}},[t("el-button",{staticClass:"ya-margin-right",attrs:{icon:"el-icon-question",title:"快速添加，需要输入菜单链接：应用/控制器/操作；区分大小写"}}),t("el-checkbox",{model:{value:e.model.add_info,callback:function(t){e.$set(e.model,"add_info",t)},expression:"model.add_info"}},[e._v("信息")]),t("el-checkbox",{model:{value:e.model.add_add,callback:function(t){e.$set(e.model,"add_add",t)},expression:"model.add_add"}},[e._v("添加")]),t("el-checkbox",{model:{value:e.model.add_edit,callback:function(t){e.$set(e.model,"add_edit",t)},expression:"model.add_edit"}},[e._v("修改")]),t("el-checkbox",{model:{value:e.model.add_dele,callback:function(t){e.$set(e.model,"add_dele",t)},expression:"model.add_dele"}},[e._v("删除")])],1):e._e(),1===e.model.menu_type?t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.model[e.idkey],expression:"model[idkey]"}],attrs:{label:"快速修改",prop:"edit"}},[t("el-button",{staticClass:"ya-margin-right",attrs:{icon:"el-icon-question",title:"快速修改，需要输入菜单链接：应用/控制器/操作；区分大小写"}}),t("el-checkbox",{model:{value:e.model.edit_info,callback:function(t){e.$set(e.model,"edit_info",t)},expression:"model.edit_info"}},[e._v("信息")]),t("el-checkbox",{model:{value:e.model.edit_add,callback:function(t){e.$set(e.model,"edit_add",t)},expression:"model.edit_add"}},[e._v("添加")]),t("el-checkbox",{model:{value:e.model.edit_edit,callback:function(t){e.$set(e.model,"edit_edit",t)},expression:"model.edit_edit"}},[e._v("修改")]),t("el-checkbox",{model:{value:e.model.edit_dele,callback:function(t){e.$set(e.model,"edit_dele",t)},expression:"model.edit_dele"}},[e._v("删除")])],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.reset("")}}},[e._v("重置")]),t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.roleDialogTitle,visible:e.roleDialog,width:"65%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.roleDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.roleSelectOpen("roleRemove")}}},[e._v("解除")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoad,expression:"roleLoad"}],ref:"roleRef",attrs:{data:e.roleData,height:e.height-70},on:{"sort-change":e.roleSort,"selection-change":e.roleSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.rolePk,label:"角色ID",width:"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"role_name",label:"名称","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"role_desc",label:"描述","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.roleSelectOpen("roleRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.roleCount>0,expression:"roleCount>0"}],attrs:{total:e.roleCount,page:e.roleQuery.page,limit:e.roleQuery.limit},on:{"update:page":function(t){return e.$set(e.roleQuery,"page",t)},"update:limit":function(t){return e.$set(e.roleQuery,"limit",t)},pagination:e.roleList}})],1),t("el-dialog",{attrs:{title:e.roleSelectTitle,visible:e.roleSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.roleSelectDialog=t}}},[t("el-form",{ref:"roleSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.roleName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.roleSelectIds,callback:function(t){e.roleSelectIds=t},expression:"roleSelectIds"}})],1),"roleRemove"===e.roleSelectType?t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("span",[e._v(e._s(e.roleQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.roleSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.roleSelectSubmit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("159b"),l("25f0"),l("14d9"),l("98b1")),o=l("333d"),n=l("f71e"),r=l("0b49"),c=l("ed08"),u=l("b775"),d="/admin/system.Menu/";function m(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function f(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"editsort",method:"post",data:e})}function _(e){return Object(u["a"])({url:d+"editpid",method:"post",data:e})}function v(e){return Object(u["a"])({url:d+"unlogin",method:"post",data:e})}function y(e){return Object(u["a"])({url:d+"unauth",method:"post",data:e})}function k(e){return Object(u["a"])({url:d+"unrate",method:"post",data:e})}function w(e){return Object(u["a"])({url:d+"hidden",method:"post",data:e})}function x(e){return Object(u["a"])({url:d+"disable",method:"post",data:e})}function S(e){return Object(u["a"])({url:d+"role",method:"get",params:e})}function $(e){return Object(u["a"])({url:d+"roleRemove",method:"post",data:e})}var q={name:"SystemMenu",components:{Pagination:o["a"],EIconPicker:r["EIconPicker"]},directives:{},data:function(){return{name:"菜单",height:680,loading:!1,idkey:"menu_id",exps:[],query:{search_field:"menu_name",search_exp:"like",date_field:"create_time"},data:[],dialog:!1,dialogTitle:"",model:{menu_id:"",menu_pid:0,menu_type:0,meta_icon:"",menu_name:"",menu_url:"",path:"",name:"",component:"",meta_query:"",hidden:0,sort:250,add_info:!1,add_add:!1,add_edit:!1,add_dele:!1,edit_info:!1,edit_add:!1,edit_edit:!1,edit_dele:!1},rules:{menu_name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],name:[{required:!0,message:"请输入路由名称",trigger:"blur"}]},trees:[],props:{checkStrictly:!0,value:"menu_id",label:"menu_name",emitPath:!1},isExpandAll:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",sort:250,sort_incdec:"0",menu_pid:0,is_unlogin:0,is_unauth:0,is_unrate:0,is_disable:0,hidden:0,rolePk:"role_id",roleName:"角色",roleDialog:!1,roleDialogTitle:"",roleLoad:!1,roleData:[],roleCount:0,roleQuery:{page:1,limit:12},roleSelection:[],roleSelectIds:"",roleSelectTitle:"选中操作",roleSelectDialog:!1,roleSelectType:""}},created:function(){this.height=Object(s["a"])(210),this.list()},methods:{list:function(){var e=this;this.loading=!0,m(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.isExpandAll=!1,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.menu_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],p(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()),this.model.add_info=this.model.add_add=this.model.add_edit=this.model.add_dele=!1,this.model.edit_info=this.model.edit_add=this.model.edit_edit=this.model.edit_dele=!1},search:function(){this.list()},refresh:function(){this.query=this.$options.data().query,this.list()},expandAll:function(e){this.expandFor(this.data,!e)},expandFor:function(e,t){var l=this;e.forEach((function(e){l.$refs.table.toggleRowExpansion(e,t),e.children&&l.expandFor(e.children,t)}))},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectAll:function(e){e?(this.selectAllKeys(e),this.selectIds=this.selectGetIds(this.selection).toString()):this.selectIds=""},selectAllKeys:function(e){for(var t in e)this.selection.push(e[t]),e[t].children&&this.selectAllKeys(e[t].children)},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","remover"===e?this.selectTitle=this.name+"解除角色":"editsort"===e?this.selectTitle=this.name+"修改排序":"editpid"===e?this.selectTitle=this.name+"修改上级":"unlogin"===e?this.selectTitle=this.name+"是否免登":"unauth"===e?this.selectTitle=this.name+"是否免权":"unrate"===e?this.selectTitle=this.name+"是否免限":"hidden"===e?this.selectTitle=this.name+"是否隐藏":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"remover"===e?this.remover(this.selection):"editsort"===e?this.editsort(this.selection):"editpid"===e?this.editpid(this.selection):"unlogin"===e?this.unlogin(this.selection,!0):"unauth"===e?this.unauth(this.selection,!0):"unrate"===e?this.unrate(this.selection,!0):"hidden"===e?this.ishidden(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},remover:function(e){var t=this;e.length?(this.loading=!0,$({menu_id:this.selectGetIds(e),role_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editsort:function(e){var t=this;this.loading=!0,g({ids:this.selectGetIds(e),sort:this.sort,sort_incdec:this.sort_incdec}).then((function(e){t.list(),t.sort_incdec="0",t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},editpid:function(e){var t=this;this.loading=!0,_({ids:this.selectGetIds(e),menu_pid:this.menu_pid}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},unlogin:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unlogin;l&&(i=this.is_unlogin),v({ids:this.selectGetIds(e),is_unlogin:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},unauth:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unauth;l&&(i=this.is_unauth),y({ids:this.selectGetIds(e),is_unauth:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},unrate:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unrate;l&&(i=this.is_unrate),k({ids:this.selectGetIds(e),is_unrate:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},ishidden:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].hidden;l&&(i=this.hidden),w({ids:this.selectGetIds(e),hidden:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),x({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},roleShow:function(e){this.roleDialog=!0,this.roleDialogTitle=this.name+this.roleName+"："+e.menu_name,this.roleQuery.menu_id=e.menu_id,this.roleList()},roleList:function(){var e=this;this.roleLoad=!0,S(this.roleQuery).then((function(t){e.roleData=t.data.list,e.roleCount=t.data.count,e.roleLoad=!1})).catch((function(){e.roleLoad=!1}))},roleSort:function(e){this.roleQuery.sort_field=e.prop,this.roleQuery.sort_value="","ascending"===e.order&&(this.roleQuery.sort_value="asc",this.roleList()),"descending"===e.order&&(this.roleQuery.sort_value="desc",this.roleList())},roleSelect:function(e){this.roleSelection=e,this.roleSelectIds=this.roleSelectGetIds(e).toString()},roleSelectGetIds:function(e){return Object(c["a"])(e,this.rolePk)},roleSelectAlert:function(){this.$alert("请选择需要操作的"+this.roleName,"提示",{type:"warning",callback:function(e){}})},roleSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["roleRef"].clearSelection(),this.$refs["roleRef"].toggleRowSelection(t)),this.roleSelection.length?(this.roleSelectTitle="选中操作","roleRemove"===e&&(this.roleSelectTitle=this.name+"解除"+this.roleName),this.roleSelectDialog=!0,this.roleSelectType=e):this.roleSelectAlert()},roleSelectCancel:function(){this.roleSelectDialog=!1},roleSelectSubmit:function(){if(this.roleSelection.length){var e=this.roleSelectType;"roleRemove"===e&&this.roleRemove(this.roleSelection),this.roleSelectDialog=!1}else this.roleSelectAlert()},roleRemove:function(e){var t=this;e.length?(this.roleLoad=!0,$({menu_id:this.roleQuery.menu_id,role_ids:this.roleSelectGetIds(e)}).then((function(e){t.roleList(),t.$message.success(e.msg)})).catch((function(){t.roleLoad=!1}))):this.roleSelectAlert()},copy:function(e,t){Object(n["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},C=q,T=(l("2cbb"),l("2877")),O=Object(T["a"])(C,i,a,!1,null,"77f44439",null);t["default"]=O.exports},"612c":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"tag_name",label:"名称"}}),t("el-option",{attrs:{value:"tag_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除内容"},on:{click:function(t){return e.selectOpen("removec")}}},[e._v("内容")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removec"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的内容吗？")])]):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"tag_name",label:"名称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_desc",label:"描述","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.contentShow(l.row)}}},[e._v("内容")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"tag_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.tag_name,callback:function(t){e.$set(e.model,"tag_name",t)},expression:"model.tag_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"tag_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.tag_desc,callback:function(t){e.$set(e.model,"tag_desc",t)},expression:"model.tag_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.contentDialogTitle,visible:e.contentDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.contentDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.contentSelectOpen("contentRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.contentSelectTitle,visible:e.contentSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.contentSelectDialog=t}}},[t("el-form",{ref:"contentSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.contentName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.contentSelectIds,callback:function(t){e.contentSelectIds=t},expression:"contentSelectIds"}})],1),"contentRemove"===e.contentSelectType?t("el-form-item",{attrs:{label:"标签ID",prop:""}},[t("span",[e._v(e._s(e.contentQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.contentSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.contentSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.contentLoad,expression:"contentLoad"}],ref:"contentRef",attrs:{data:e.contentData,height:e.height-20},on:{"sort-change":e.contentSort,"selection-change":e.contentSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.contentPk,label:"内容ID","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"cover_url",label:"封面","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.cover_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.cover_url,"preview-src-list":[l.row.cover_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"230","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"unique",label:"标识","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"category_name",label:"分类","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_top",label:"置顶","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_top,callback:function(t){e.$set(l.row,"is_top",t)},expression:"scope.row.is_top"}})]}}])}),t("el-table-column",{attrs:{prop:"is_hot",label:"热门","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_hot,callback:function(t){e.$set(l.row,"is_hot",t)},expression:"scope.row.is_hot"}})]}}])}),t("el-table-column",{attrs:{prop:"is_rec",label:"推荐","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_rec,callback:function(t){e.$set(l.row,"is_rec",t)},expression:"scope.row.is_rec"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.contentSelectOpen("contentRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.contentCount>0,expression:"contentCount>0"}],attrs:{total:e.contentCount,page:e.contentQuery.page,limit:e.contentQuery.limit},on:{"update:page":function(t){return e.$set(e.contentQuery,"page",t)},"update:limit":function(t){return e.$set(e.contentQuery,"limit",t)},pagination:e.content}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/content.Tag/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"content",method:"get",params:e})}function g(e){return Object(r["a"])({url:c+"contentRemove",method:"post",data:e})}var _={name:"ContentTag",components:{Pagination:o["a"]},data:function(){return{name:"内容标签",height:680,loading:!1,idkey:"tag_id",exps:[],query:{page:1,limit:12,search_field:"tag_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{tag_id:"",tag_name:"",tag_desc:"",sort:250},rules:{tag_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,contentPk:"content_id",contentName:"内容",contentDialog:!1,contentDialogTitle:"",contentLoad:!1,contentData:[],contentCount:0,contentQuery:{page:1,limit:12},contentSelection:[],contentSelectIds:"",contentSelectTitle:"选中操作",contentSelectDialog:!1,contentSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removec"===e?this.selectTitle=this.name+"解除内容":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removec"===e?this.removec(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection,!0),this.selectDialog=!1}else this.selectAlert()},removec:function(e){var t=this;e.length?(this.loading=!0,g({tag_id:this.selectGetIds(e),content_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),f({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},contentShow:function(e){this.contentDialog=!0,this.contentDialogTitle=this.name+"内容："+e.tag_name,this.contentQuery.tag_id=e.tag_id,this.content()},content:function(){var e=this;this.contentLoad=!0,b(this.contentQuery).then((function(t){e.contentData=t.data.list,e.contentCount=t.data.count,e.contentLoad=!1})).catch((function(){e.contentLoad=!1}))},contentSort:function(e){this.contentQuery.sort_field=e.prop,this.contentQuery.sort_value="","ascending"===e.order&&(this.contentQuery.sort_value="asc",this.content()),"descending"===e.order&&(this.contentQuery.sort_value="desc",this.content())},contentSelect:function(e){this.contentSelection=e,this.contentSelectIds=this.contentSelectGetIds(e).toString()},contentSelectGetIds:function(e){return Object(n["a"])(e,this.contentPk)},contentSelectAlert:function(){this.$alert("请选择需要操作的"+this.contentName,"提示",{type:"warning",callback:function(e){}})},contentSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["contentRef"].clearSelection(),this.$refs["contentRef"].toggleRowSelection(t)),this.contentSelection.length?(this.contentSelectTitle="选中操作","contentRemove"===e&&(this.contentSelectTitle="解除标签"),this.contentSelectDialog=!0,this.contentSelectType=e):this.contentSelectAlert()},contentSelectCancel:function(){this.contentSelectDialog=!1},contentSelectSubmit:function(){if(this.contentSelection.length){var e=this.contentSelectType;"contentRemove"===e&&this.contentRemove(this.contentSelection),this.contentSelectDialog=!1}else this.contentSelectAlert()},contentRemove:function(e){var t=this;e.length?(this.contentLoad=!0,g({tag_id:this.contentQuery.tag_id,content_ids:this.contentSelectGetIds(e)}).then((function(e){t.content(),t.$message.success(e.msg)})).catch((function(){t.contentLoad=!1}))):this.contentSelectAlert()}}},v=_,y=l("2877"),k=Object(y["a"])(v,i,a,!1,null,"bb834698",null);t["default"]=k.exports},"69f9":function(e,t,l){"use strict";l.d(t,"j",(function(){return s})),l.d(t,"h",(function(){return o})),l.d(t,"a",(function(){return n})),l.d(t,"d",(function(){return r})),l.d(t,"b",(function(){return c})),l.d(t,"k",(function(){return u})),l.d(t,"f",(function(){return d})),l.d(t,"e",(function(){return m})),l.d(t,"l",(function(){return p})),l.d(t,"i",(function(){return h})),l.d(t,"c",(function(){return f})),l.d(t,"g",(function(){return b})),l.d(t,"m",(function(){return g}));var i=l("b775"),a="/admin/member.Member/";function s(e){return Object(i["a"])({url:a+"list",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"info",method:"get",params:e})}function n(e){return Object(i["a"])({url:a+"add",method:"post",data:e})}function r(e){return Object(i["a"])({url:a+"edit",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"dele",method:"post",data:e})}function u(e){return Object(i["a"])({url:a+"region",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"edittag",method:"post",data:e})}function m(e){return Object(i["a"])({url:a+"editgroup",method:"post",data:e})}function p(e){return Object(i["a"])({url:a+"repwd",method:"post",data:e})}function h(e){return Object(i["a"])({url:a+"super",method:"post",data:e})}function f(e){return Object(i["a"])({url:a+"disable",method:"post",data:e})}function b(e){return Object(i["a"])({url:a+"import",method:"post",data:e})}function g(e){return Object(i["a"])({url:a+"statistic",method:"get",params:e})}},"6a13":function(e,t,l){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:e.editorId}}),t("el-dialog",{attrs:{visible:e.fileDialog,title:e.fileTitle,width:"80%",top:"1vh","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=l("d4ec"),o=l("bee2"),n=l("262e"),r=l("2caf"),c=(l("a9e3"),l("99af"),l("6fad")),u=l.n(c),d=l("ed08"),m=l("3659"),p={name:"RichEditor",components:{FileManage:m["a"]},directives:{},model:{prop:"content",event:"change"},props:{id:{type:String,default:"wangeditor"+Object(d["b"])()},content:{type:String,default:""},excludeMenus:{type:Array,default:function(){return["image","video"]}},zIndex:{type:Number,default:1e4},height:{type:Number,default:500},focus:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{name:"富文本编辑器",editor:null,editorId:this.id,editorContent:this.content,editorContentNew:"",fileDialog:!1,fileTitle:"文件管理",fileType:"image"}},watch:{content:function(e){e!==this.editor.txt.html()&&this.editor.txt.html(this.content)}},created:function(){},mounted:function(){this.editorCreate()},destroyed:function(){this.editorDestroy()},methods:{editorCreate:function(){var e=this,t=this,l=u.a.BtnMenu,i=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="上传图片"><el-button>图片</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.fileType="image",t.fileTitle="上传图片",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),i}(l),a=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="上传视频"><el-button>视频</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.fileType="video",t.fileTitle="上传视频",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),i}(l),c=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="上传音频"><el-button>音频</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.fileType="audio",t.fileTitle="上传音频",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),i}(l),d=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="上传文档"><el-button>文档</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.fileType="word",t.fileTitle="上传文档",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),i}(l),m=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="上传附件"><el-button>附件</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.fileType="other",t.fileTitle="上传附件",t.fileDialog=!0}},{key:"tryChangeActive",value:function(){}}]),i}(l),p=function(e){Object(n["a"])(i,e);var l=Object(r["a"])(i);function i(e){Object(s["a"])(this,i);var t=u.a.$('<div class="w-e-menu" data-title="清空内容"><el-button>清空</el-button></div>');return l.call(this,t,e)}return Object(o["a"])(i,[{key:"clickHandler",value:function(){t.editor.txt.clear()}},{key:"tryChangeActive",value:function(){}}]),i}(l);t.editor=new u.a("#"+t.editorId),t.editor.config.excludeMenus=t.excludeMenus,t.editor.menus.extend("upimgKey",i),t.editor.config.menus=t.editor.config.menus.concat("upimgKey"),t.editor.menus.extend("upvideoKey",a),t.editor.config.menus=t.editor.config.menus.concat("upvideoKey"),t.editor.menus.extend("upaudioKey",c),t.editor.config.menus=t.editor.config.menus.concat("upaudioKey"),t.editor.menus.extend("upwordKey",d),t.editor.config.menus=t.editor.config.menus.concat("upwordKey"),t.editor.menus.extend("upotherKey",m),t.editor.config.menus=t.editor.config.menus.concat("upotherKey"),t.editor.menus.extend("clearKey",p),t.editor.config.menus=t.editor.config.menus.concat("clearKey"),t.editor.config.zIndex=t.zIndex,t.editor.config.height=t.height,t.editor.config.focus=t.focus,t.editor.config.placeholder=t.placeholder,t.editor.config.onchange=function(l){t.editorContentNew=l,e.$emit("change",t.editorContentNew)},t.editor.create(),t.editor.txt.clear(),t.editor.txt.html(t.editorContent)},editorDestroy:function(){this.editor&&(this.editor.destroy(),this.editor=null)},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e,t){this.fileDialog=!1,this.fileTitle="";var l=e.length;if(l)for(var i=0;i<l;i++)"image"===t?this.editor.cmd.do("insertHTML",'<img file-id="'.concat(e[i]["file_id"],'" src="').concat(e[i]["file_url"],'" style="max-width:50%;"/>')):"video"===t?this.editor.cmd.do("insertHTML",'<video width="50%" height="50%" controls>\n                <source file-id="'.concat(e[i]["file_id"],'" src="').concat(e[i]["file_url"],'" type="video/mp4">\n                <object file-id="').concat(e[i]["file_id"],'" data="').concat(e[i]["file_url"],'" width="50%" height="50%">\n                  <embed file-id="').concat(e[i]["file_id"],'" src="').concat(e[i]["file_url"],'" width="50%" height="50%">\n                </object>\n              </video>')):"audio"===t?this.editor.cmd.do("insertHTML",'<audio width="50%" height="50%" controls>\n                <source file-id="'.concat(e[i]["file_id"],'" src="').concat(e[i]["file_url"],'" type="audio/mp3">\n                <embed file-id="').concat(e[i]["file_id"],'" src="').concat(e[i]["file_url"],'" width="50%" height="50%">\n              </audio>')):this.editor.cmd.do("insertHTML",'<a file-id="'.concat(e[i]["file_id"],'" href="').concat(e[i]["file_url"],'" download="').concat(e[i]["file_url"],'" target="_blank">').concat(e[i]["file_name"],".").concat(e[i]["file_ext"],"</el-link>"))}}},h=p,f=l("2877"),b=Object(f["a"])(h,i,a,!1,null,null,null);t["a"]=b.exports},"6a69":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"* 系统简称",prop:"system_name"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.system_name,callback:function(t){e.$set(e.model,"system_name",t)},expression:"model.system_name"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 侧边栏、登录页显示，12字以内。 ")])],1),t("el-form-item",{attrs:{label:"* 页面标题",prop:"page_title"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.page_title,callback:function(t){e.$set(e.model,"page_title",t)},expression:"model.page_title"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 浏览器页面标题后缀，128字以内。 ")])],1),t("el-form-item",{attrs:{label:"favicon",prop:"favicon_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:8}},[e.model.favicon_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.favicon_url,"preview-src-list":[e.model.favicon_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:16}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("favicon","上传favicon")}}},[e._v("上传favicon")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("favicon")}}},[e._v("删除")]),t("p",[e._v("图片小于 50 KB，jpg、png、ico格式，128 x 128。")])],1)],1),t("el-form-item",{attrs:{label:"logo",prop:"logo_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:8}},[e.model.logo_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.logo_url,"preview-src-list":[e.model.logo_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:16}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("logo","上传logo")}}},[e._v("上传logo")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("logo")}}},[e._v("删除")]),t("p",[e._v("图片小于 100 KB，jpg、png格式，200 x 200。")])],1)],1),t("el-form-item",{attrs:{label:"登录背景图",prop:"login_bg_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:8}},[e.model.login_bg_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.login_bg_url,"preview-src-list":[e.model.login_bg_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:16}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("login_bg","上传登录背景")}}},[e._v("上传背景图")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("login_bg")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式，1920 x 1080。")])],1)],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=l("98b1"),o=l("3659"),n=l("074b"),r={name:"SystemSettingSystem",components:{FileManage:o["a"]},data:function(){return{name:"系统设置",loading:!1,model:{system_name:"",page_title:"",favicon_id:0,favicon_url:"",logo_id:0,logo_url:"",login_bg_id:0,login_bg_url:""},fileDialog:!1,fileField:"logo",fileTitle:"文件管理",rules:{}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(n["n"])().then((function(t){e.model=t.data,e.$store.dispatch("settings/changeSetting",{key:"systemName",value:t.data.system_name}),e.$store.dispatch("settings/changeSetting",{key:"pageTitle",value:t.data.page_title}),e.$store.dispatch("settings/changeSetting",{key:"faviconUrl",value:t.data.favicon_url}),e.$store.dispatch("settings/changeSetting",{key:"logoUrl",value:t.data.logo_url}),e.$forceUpdate()}))},refresh:function(){var e=this;this.loading=!0,Object(n["n"])().then((function(t){e.model=t.data,e.loading=!1,e.$forceUpdate(),e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(n["m"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.fileField=e,this.fileTitle=t,this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l){var i=l-1;"favicon"===t?(this.model.favicon_id=e[i]["file_id"],this.model.favicon_url=e[i]["file_url"]):"logo"===t?(this.model.logo_id=e[i]["file_id"],this.model.logo_url=e[i]["file_url"]):"login_bg"===t&&(this.model.login_bg_id=e[i]["file_id"],this.model.login_bg_url=e[i]["file_url"])}},fileDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"favicon"===e?(this.model.favicon_id=0,this.model.favicon_url=""):"logo"===e?(this.model.logo_id=0,this.model.logo_url=""):"login_bg"===e&&(this.model.login_bg_id=0,this.model.login_bg_url="")}}},c=r,u=l("2877"),d=Object(u["a"])(c,i,a,!1,null,"404e5a31",null);t["default"]=d.exports},"6b94":function(e,t,l){"use strict";l("e86e")},"6ea0":function(e,t,l){"use strict";l("cda6")},"72c4":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"日志记录开关",prop:"log_switch"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.log_switch,callback:function(t){e.$set(e.model,"log_switch",t)},expression:"model.log_switch"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后，会记录会员日志。 ")])],1),t("el-form-item",{attrs:{label:"日志保留时间",prop:"log_save_time"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.log_save_time,callback:function(t){e.$set(e.model,"log_save_time",t)},expression:"model.log_save_time"}},[t("template",{slot:"append"},[e._v("天")])],2)],1),t("el-col",{attrs:{span:16}},[e._v(" 会员日志保留天数，0永久保留。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("4f49"),n={name:"MemberSettingLog",components:{},data:function(){return{name:"日志设置",height:680,loading:!1,model:{log_switch:0,log_save_time:0},rules:{}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["h"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["h"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["g"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"73c5":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"验证码开关",prop:"captcha_switch"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.captcha_switch,callback:function(t){e.$set(e.model,"captcha_switch",t)},expression:"model.captcha_switch"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后，后台登录需要输入验证码。 ")])],1),t("el-form-item",{attrs:{label:"验证码方式",prop:"captcha_mode"}},[t("el-col",{attrs:{span:8}},[t("el-select",{attrs:{placeholder:""},on:{change:e.moldChange},model:{value:e.model.captcha_mode,callback:function(t){e.$set(e.model,"captcha_mode",t)},expression:"model.captcha_mode"}},e._l(e.mold,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:16}},[e._v(" 字符：输入字符；行为：滑动或点选。 ")])],1),t("el-form-item",{attrs:{label:"验证码类型",prop:"captcha_type"}},[t("el-col",{attrs:{span:8}},[1==e.model.captcha_mode?t("el-select",{attrs:{placeholder:""},model:{value:e.model.captcha_type,callback:function(t){e.$set(e.model,"captcha_type",t)},expression:"model.captcha_type"}},e._l(e.typestr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):t("el-select",{attrs:{placeholder:""},model:{value:e.model.captcha_type,callback:function(t){e.$set(e.model,"captcha_type",t)},expression:"model.captcha_type"}},e._l(e.typeaj,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingCaptcha",components:{},data:function(){return{name:"验证码设置",height:680,loading:!1,model:{captcha_switch:0,captcha_mode:1,captcha_type:1},rules:{},mold:[{value:1,label:"字符"},{value:2,label:"行为"}],typestr:[{value:1,label:"数字"},{value:2,label:"字母"},{value:3,label:"数字字母"},{value:4,label:"算术"},{value:5,label:"中文"}],typeaj:[{value:1,label:"滑动拼图"},{value:2,label:"点选文字"}]}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["f"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["f"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["e"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},moldChange:function(e){this.model.captcha_type=1}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"747b":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82"),l("9911");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"title",label:"标题"}}),t("el-option",{attrs:{value:"unique",label:"标识"}}),t("el-option",{attrs:{value:"position",label:"位置"}}),t("el-option",{attrs:{value:"desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改位置"},on:{click:function(t){return e.selectOpen("editpos")}}},[e._v("位置")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"editpos"===e.selectType?t("el-form-item",{attrs:{label:"位置",prop:""}},[t("el-input",{attrs:{placeholder:"请输入位置",clearable:""},model:{value:e.positions,callback:function(t){e.positions=t},expression:"positions"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_url",label:"文件","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.file_url?t("div",{staticStyle:{height:"30px"}},["image"===l.row.file_type?t("div",[t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.file_url,"preview-src-list":[l.row.file_url],title:"点击看大图",lazy:"","scroll-container":".el-table__body-wrapper"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"video"===l.row.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.row.file_url,height:"100%"}},[t("embed",{attrs:{src:l.row.file_url,height:"100%"}})])]):"audio"===l.row.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.row.file_url,height:"100%"}})]):"word"===l.row.file_type?t("div",[t("i",{staticClass:"el-icon-document ya-file-icon"})]):t("div",[t("i",{staticClass:"el-icon-folder ya-file-icon"})])]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"file_type_name",label:"类型","min-width":"75"}}),t("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"150",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"unique",label:"标识","min-width":"100",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"link",label:"链接","min-width":"180",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"position",label:"位置","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"desc",label:"描述","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count > 0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"文件",prop:"file_id"}},[t("el-col",{attrs:{span:16}},[t("div",{staticStyle:{height:"180px"}},[e.model.file_url?t("div",["image"===e.model.file_type?t("div",[t("el-image",{staticStyle:{height:"180px"},attrs:{fit:"contain",src:e.model.file_url,"preview-src-list":[e.model.file_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"video"===e.model.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:e.model.file_url,type:"video/mp4"}}),t("object",{attrs:{data:e.model.file_url,height:"100%"}},[t("embed",{attrs:{src:e.model.file_url,height:"100%"}})])]):"audio"===e.model.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:e.model.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:e.model.file_url,height:"100%"}})]):"word"===e.model.file_type?t("div",[t("i",{staticClass:"el-icon-document ya-file-icon"})]):"other"===e.model.file_type?t("div",[t("i",{staticClass:"el-icon-folder ya-file-icon"})]):t("div")]):e._e()])]),t("el-col",{attrs:{span:8}},[t("el-col",{attrs:{span:24}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","file","上传文件")}}},[e._v("上传")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete(0,"file")}}},[e._v("删除")])],1),t("el-col",{attrs:{span:24}},[t("div",[e._v("图片小于 200 KB，jpg、png格式。")])]),t("el-col",{attrs:{span:24}},[t("span",[e._v(e._s(e.model.file_name)+"."+e._s(e.model.file_ext))])])],1)],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.title,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"标识",prop:"unique"}},[t("el-input",{attrs:{placeholder:"请输入标识（唯一）",clearable:""},model:{value:e.model.unique,callback:function(t){e.$set(e.model,"unique",t)},expression:"model.unique"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.unique,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"链接",prop:"link"}},[t("el-input",{attrs:{placeholder:"请输入链接",clearable:""},model:{value:e.model.link,callback:function(t){e.$set(e.model,"link",t)},expression:"model.link"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.link,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"描述",prop:"desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.desc,callback:function(t){e.$set(e.model,"desc",t)},expression:"model.desc"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.desc,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"文件列表",prop:"file_list"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","file_list","上传文件列表")}}},[e._v("上传文件")])],1)],1),t("el-row",e._l(e.model.file_list,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[l.file_url?t("div",{staticStyle:{height:"100px"}},["image"===l.file_type?t("div",[t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:l.file_url,"preview-src-list":[l.file_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1):"video"===l.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.file_url,height:"100%"}},[t("embed",{attrs:{src:l.file_url,height:"100%"}})])]):"audio"===l.file_type?t("audio",{staticStyle:{width:"100%"},attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.file_url,height:"100%",type:"audio/mp3"}}),t("embed",{attrs:{src:l.file_url,height:"100%"}})]):"word"===l.file_type?t("div",[t("i",{staticClass:"el-icon-document ya-file-icon"})]):t("div",[t("i",{staticClass:"el-icon-folder ya-file-icon"})])]):e._e(),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"file_list","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"file_list","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"file_list")}}})],1)])})),1)],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("14d9"),l("a434"),l("98b1")),o=l("333d"),n=l("3659"),r=l("f71e"),c=l("ed08"),u=l("b775"),d="/admin/setting.Carousel/";function m(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function f(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"position",method:"post",data:e})}function _(e){return Object(u["a"])({url:d+"disable",method:"post",data:e})}var v={name:"SettingCarousel",components:{Pagination:o["a"],FileManage:n["a"]},directives:{},data:function(){return{name:"轮播",height:680,loading:!1,idkey:"carousel_id",exps:[],query:{page:1,limit:12,search_field:"title",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{carousel_id:"",unique:"",file_id:0,file_url:"",file_type:"",file_name:"",file_ext:"",title:"",link:"",position:"",desc:"",sort:250,is_disable:0,file_list:[]},rules:{file_type:[{required:!0,message:"请选择类型",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",positions:"",is_disable:0,fileDialog:!1,fileTitle:"文件管理",fileType:"image",fileField:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,m(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],p(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?(e.loading=!0,e.model[e.idkey]?f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请完善必填项*")}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","editpos"===e?this.selectTitle=this.name+"修改位置":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"editpos"===e?this.editpos(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},editpos:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].position;l&&(i=this.positions),g({ids:this.selectGetIds(e),position:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),_({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"文件管理";this.fileType=e,this.fileField=t,this.fileTitle=l,this.fileDialog=!0},fileCancel:function(){this.fileType="image",this.fileField="",this.fileTitle="文件管理",this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l)if("file"===t){var i=l-1;this.model.file_id=e[i]["file_id"],this.model.file_url=e[i]["file_url"],this.model.file_type=e[i]["file_type"],this.model.file_name=e[i]["file_name"],this.model.file_ext=e[i]["file_ext"]}else for(var a=0;a<l;a++)"file_list"===t&&this.model.file_list.push(e[a])},fileRemoval:function(e,t,l){var i=this.model[t].length,a=e;if("left"===l){if(e<=0)return!1;--a}else{if(e>=i-1)return!1;++a}var s=this.model[t][e],o=this.model[t][a];this.model[t][e]=o,this.model[t][a]=s,this.$forceUpdate()},fileDownload:function(e,t){Object(r["a"])(e.file_name,t,"文件名复制成功"),setTimeout((function(){window.open(e.file_url,"_blank")}),500)},fileDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"file"===t?(this.model.file_id=0,this.model.file_url="",this.model.file_type="",this.model.file_name="",this.model.file_ext=""):"file_list"===t&&this.model.file_list.splice(e,1)},copy:function(e,t){Object(r["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},y=v,k=(l("30b56"),l("2877")),w=Object(k["a"])(y,i,a,!1,null,"04ae2671",null);t["default"]=w.exports},"75bf":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"group_name",label:"名称"}}),t("el-option",{attrs:{value:"group_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_default",label:"默认"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field||"is_default"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除会员"},on:{click:function(t){return e.selectOpen("removem")}}},[e._v("会员")]),t("el-button",{attrs:{title:"修改接口"},on:{click:function(t){return e.selectOpen("editapi")}}},[e._v("接口")]),t("el-button",{attrs:{title:"是否默认"},on:{click:function(t){return e.selectOpen("defaults")}}},[e._v("默认")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",staticClass:"dialog-body",style:{height:e.height-200+"px"},attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removem"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的会员吗？")])]):"editapi"===e.selectType?t("el-form-item",{attrs:{label:"会员接口",prop:""}},[t("span",[t("el-checkbox",{attrs:{title:"展开/收起"},on:{change:function(t){return e.apiExpandAllChange("selApiRef")}},model:{value:e.apiExpandAll,callback:function(t){e.apiExpandAll=t},expression:"apiExpandAll"}},[e._v("展开")]),t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.apiCheckAllChange("selApiRef")}},model:{value:e.apiCheckAll,callback:function(t){e.apiCheckAll=t},expression:"apiCheckAll"}},[e._v("全选")])],1),t("el-tree",{ref:"selApiRef",attrs:{data:e.apiData,props:e.apiProps,"default-checked-keys":e.api_ids,"node-key":"api_id","show-checkbox":"","check-strictly":"","expand-on-click-node":!1},on:{check:function(t){return e.apiCheck("selApiRef")}},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label))]),l.data.children?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.apiCheckAllChangePid(l.node,l.data,"selApiRef")}}},[e._v("全选")])],1):e._e(),t("span",[l.data.api_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.api_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}])})],1):"defaults"===e.selectType?t("el-form-item",{attrs:{label:"是否默认",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_default,callback:function(t){e.is_default=t},expression:"is_default"}}),t("span",[e._v(" "+e._s(e.memberName)+" 新增时默认的分组")])],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"group_name",label:"名称","min-width":"160"}}),t("el-table-column",{attrs:{prop:"group_desc",label:"描述","min-width":"160"}}),t("el-table-column",{attrs:{prop:"is_default",label:"默认","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.defaults([l.row])}},model:{value:l.row.is_default,callback:function(t){e.$set(l.row,"is_default",t)},expression:"scope.row.is_default"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.memberShow(l.row)}}},[e._v("会员")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"group_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.group_name,callback:function(t){e.$set(e.model,"group_name",t)},expression:"model.group_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"group_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.group_desc,callback:function(t){e.$set(e.model,"group_desc",t)},expression:"model.group_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort",placeholder:"250"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"接口"}},[t("span",[t("el-checkbox",{attrs:{title:"展开/收起"},on:{change:function(t){return e.apiExpandAllChange("apiRef")}},model:{value:e.apiExpandAll,callback:function(t){e.apiExpandAll=t},expression:"apiExpandAll"}},[e._v("展开")]),t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.apiCheckAllChange("apiRef")}},model:{value:e.apiCheckAll,callback:function(t){e.apiCheckAll=t},expression:"apiCheckAll"}},[e._v("全选")])],1),t("el-tree",{ref:"apiRef",attrs:{data:e.apiData,props:e.apiProps,"default-checked-keys":e.model.api_ids,"node-key":"api_id","show-checkbox":"","check-strictly":"","expand-on-click-node":!1},on:{check:function(t){return e.apiCheck("apiRef")}},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label))]),l.data.children?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.apiCheckAllChangePid(l.node,l.data,"apiRef")}}},[e._v("全选")])],1):e._e(),t("span",[l.data.api_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.api_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}])})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.memberDialogTitle,visible:e.memberDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.memberDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.memberSelectOpen("memberRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.memberSelectTitle,visible:e.memberSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.memberSelectDialog=t}}},[t("el-form",{ref:"memberSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.memberName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.memberSelectIds,callback:function(t){e.memberSelectIds=t},expression:"memberSelectIds"}})],1),"memberRemove"===e.memberSelectType?t("el-form-item",{attrs:{label:"分组ID",prop:""}},[t("span",[e._v(e._s(e.memberQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.memberSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.memberSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.memberLoad,expression:"memberLoad"}],ref:"memberRef",attrs:{data:e.memberData,height:e.height-20},on:{"sort-change":e.memberSort,"selection-change":e.memberSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.memberPk,label:"会员ID","min-width":"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"avatar_id",label:"头像","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.avatar_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.avatar_url,"preview-src-list":[l.row.avatar_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"150",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"145",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"phone",label:"手机","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"180",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"190","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_names",label:"分组",width:"190","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作","min-width":"65"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.memberSelectOpen("memberRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.memberCount>0,expression:"memberCount>0"}],attrs:{total:e.memberCount,page:e.memberQuery.page,limit:e.memberQuery.limit},on:{"update:page":function(t){return e.$set(e.memberQuery,"page",t)},"update:limit":function(t){return e.$set(e.memberQuery,"limit",t)},pagination:e.member}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("159b"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/member.Group/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"editapi",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"defaults",method:"post",data:e})}function g(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function _(e){return Object(r["a"])({url:c+"member",method:"get",params:e})}function v(e){return Object(r["a"])({url:c+"memberRemove",method:"post",data:e})}var y={name:"MemberGroup",components:{Pagination:o["a"]},data:function(){return{name:"会员分组",height:680,loading:!1,idkey:"group_id",exps:[],query:{page:1,limit:12,search_field:"group_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{group_id:"",group_name:"",group_desc:"",sort:250,api_ids:[]},rules:{group_name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},apiIds:[],apiData:[],apiProps:{children:"children",label:"api_name"},apiCheckAll:!1,apiExpandAll:!1,apiCheckAllPid:{},selApiRefs:"apiRef",selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_default:0,is_disable:0,api_ids:[],memberPk:"member_id",memberName:"会员",memberDialog:!1,memberDialogTitle:"",memberLoad:!1,memberData:[],memberCount:0,memberQuery:{page:1,limit:12},memberSelection:[],memberSelectIds:"",memberSelectTitle:"选中操作",memberSelectDialog:!1,memberSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.apiData=t.data.api,e.apiIds=t.data.api_ids,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()),this.apiCheckAll=!1,this.apiExpandAll=!1,this.apiCheckAllPid={}},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removem"===e?this.selectTitle=this.name+"解除会员":"editapi"===e?this.selectTitle=this.name+"修改接口":"defaults"===e?this.selectTitle=this.name+"是否默认":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removem"===e?this.removem(this.selection):"editapi"===e?this.editapi(this.selection):"defaults"===e?this.defaults(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removem:function(e){var t=this;e.length?(this.loading=!0,v({group_id:this.selectGetIds(e),member_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editapi:function(e){var t=this;e.length?(this.loading=!0,f({ids:this.selectGetIds(e),api_ids:this.api_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},defaults:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_default;l&&(i=this.is_default),b({ids:this.selectGetIds(e),is_default:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),g({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},apiCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiRef";this.selApiRefs=e,this.apiCheckSetKeys()},apiCheckAllChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiRef";this.selApiRefs=t,this.apiCheckAll?this.apiIds.forEach((function(t){e.$refs[e.selApiRefs].setChecked(t,!0,!0)})):this.$refs[this.selApiRefs].setCheckedKeys([]),this.apiCheckSetKeys()},apiExpandAllChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"apiRef";this.selApiRefs=e;for(var t=this.apiExpandAll,l=this.$refs[this.selApiRefs].store._getAllNodes().length,i=0;i<l;i++)this.$refs[this.selApiRefs].store._getAllNodes()[i].expanded=t},apiCheckAllChangePid:function(e,t){var l=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"apiRef";this.selApiRefs=i,this.apiCheckAllPid[t.api_id]=e.checked,this.$refs[this.selApiRefs].setChecked(t.api_id,!this.apiCheckAllPid[t.api_id],!0),t.children.forEach((function(e){l.$refs[l.selApiRefs].setChecked(e.api_id,!l.apiCheckAllPid[t.api_id],!0)})),this.apiCheckSetKeys()},apiCheckSetKeys:function(){"apiRef"===this.selApiRefs?this.model.api_ids=this.$refs[this.selApiRefs].getCheckedKeys():this.api_ids=this.$refs[this.selApiRefs].getCheckedKeys()},memberShow:function(e){this.memberDialog=!0,this.memberDialogTitle="分组会员："+e.group_name,this.memberQuery.group_id=e.group_id,this.member()},member:function(){var e=this;this.memberLoad=!0,_(this.memberQuery).then((function(t){e.memberData=t.data.list,e.memberCount=t.data.count,e.memberLoad=!1})).catch((function(){e.memberLoad=!1}))},memberSort:function(e){this.memberQuery.sort_field=e.prop,this.memberQuery.sort_value="","ascending"===e.order&&(this.memberQuery.sort_value="asc",this.member()),"descending"===e.order&&(this.memberQuery.sort_value="desc",this.member())},memberSelect:function(e){this.memberSelection=e,this.memberSelectIds=this.memberSelectGetIds(e).toString()},memberSelectGetIds:function(e){return Object(n["a"])(e,this.memberPk)},memberSelectAlert:function(){this.$alert("请选择需要操作的"+this.memberName,"提示",{type:"warning",callback:function(e){}})},memberSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["memberRef"].clearSelection(),this.$refs["memberRef"].toggleRowSelection(t)),this.memberSelection.length?(this.memberSelectTitle="选中操作","memberRemove"===e&&(this.memberSelectTitle="解除分组"),this.memberSelectDialog=!0,this.memberSelectType=e):this.memberSelectAlert()},memberSelectCancel:function(){this.memberSelectDialog=!1},memberSelectSubmit:function(){if(this.memberSelection.length){var e=this.memberSelectType;"memberRemove"===e&&this.memberRemove(this.memberSelection),this.memberSelectDialog=!1}else this.memberSelectAlert()},memberRemove:function(e){var t=this;e.length?(this.memberLoad=!0,v({group_id:this.memberQuery.group_id,member_ids:this.memberSelectGetIds(e)}).then((function(e){t.member(),t.$message.success(e.msg)})).catch((function(){t.memberLoad=!1}))):this.memberSelectAlert()}}},k=y,w=l("2877"),x=Object(w["a"])(k,i,a,!1,null,null,null);t["default"]=x.exports},"76a1":function(e,t,l){"use strict";l.r(t);l("ac1f"),l("5319");var i,a,s={name:"SystemRedirect",data:function(){return{name:"跳转页面"}},created:function(){var e=this.$route,t=e.params,l=e.query,i=t.path;this.$router.replace({path:"/"+i,query:l}).catch((function(){}))},render:function(e){return e()}},o=s,n=l("2877"),r=Object(n["a"])(o,i,a,!1,null,null,null);t["default"]=r.exports},"778c":function(e,t,l){},"77e8":function(e,t,l){"use strict";l("08b6")},7880:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",{attrs:{span:12,offset:6}},[t("el-result",{attrs:{icon:"error",title:"404","sub-title":"页面不存在"}})],1)],1),t("el-row",[t("el-col",{staticClass:"ya-center ya-top",attrs:{span:6,offset:6}},[t("el-button",{attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v("返回")])],1),t("el-col",{staticClass:"ya-center ya-top",attrs:{span:6}},[t("el-button",{attrs:{icon:"el-icon-s-home"},on:{click:e.dashboard}},[e._v("控制台")])],1)],1),t("el-row",[t("el-col",{staticClass:"ya-center ya-top",attrs:{span:12,offset:6}},[t("a",{attrs:{href:"https://gitee.com/skyselang/yylAdmin",target:"_blank",title:""}},[t("img",{attrs:{src:"https://gitee.com/skyselang/yylAdmin/widgets/widget_card.svg?colors=4183c4,ffffff,ffffff,e3e9ed,666666,9b9b9b",alt:"",srcset:""}})])])],1)],1)},a=[],s=(l("14d9"),{name:"System404",data:function(){return{name:"404页面"}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)},dashboard:function(){this.$router.push({path:"/dashboard"})}}}),o=s,n=(l("4cea"),l("2877")),r=Object(n["a"])(o,i,a,!1,null,"7b3ea164",null);t["default"]=r.exports},"7ad1":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"tag_name",label:"名称"}}),t("el-option",{attrs:{value:"tag_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除会员"},on:{click:function(t){return e.selectOpen("removem")}}},[e._v("会员")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removem"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的会员吗？")])]):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"tag_name",label:"名称","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_desc",label:"描述","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.memberShow(l.row)}}},[e._v("会员")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"tag_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.tag_name,callback:function(t){e.$set(e.model,"tag_name",t)},expression:"model.tag_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"tag_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.tag_desc,callback:function(t){e.$set(e.model,"tag_desc",t)},expression:"model.tag_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.model[e.idkey],expression:"model[idkey]"}],attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.model[e.idkey],expression:"model[idkey]"}],attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.model.delete_time,expression:"model.delete_time"}],attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.memberDialogTitle,visible:e.memberDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.memberDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.memberSelectOpen("memberRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.memberSelectTitle,visible:e.memberSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.memberSelectDialog=t}}},[t("el-form",{ref:"memberSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.memberName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.memberSelectIds,callback:function(t){e.memberSelectIds=t},expression:"memberSelectIds"}})],1),"memberRemove"===e.memberSelectType?t("el-form-item",{attrs:{label:"标签ID",prop:""}},[t("span",[e._v(e._s(e.memberQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.memberSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.memberSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.memberLoad,expression:"memberLoad"}],ref:"memberRef",attrs:{data:e.memberData,height:e.height-20},on:{"sort-change":e.memberSort,"selection-change":e.memberSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.memberPk,label:"会员ID","min-width":"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"avatar_id",label:"头像","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.avatar_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.avatar_url,"preview-src-list":[l.row.avatar_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"150",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"145",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"phone",label:"手机","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"180",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"190","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"gorup_names",label:"分组","min-width":"190","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作","min-width":"65"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.memberSelectOpen("memberRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.memberCount>0,expression:"memberCount>0"}],attrs:{total:e.memberCount,page:e.memberQuery.page,limit:e.memberQuery.limit},on:{"update:page":function(t){return e.$set(e.memberQuery,"page",t)},"update:limit":function(t){return e.$set(e.memberQuery,"limit",t)},pagination:e.member}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/member.Tag/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"member",method:"get",params:e})}function g(e){return Object(r["a"])({url:c+"memberRemove",method:"post",data:e})}var _={name:"MemberTag",components:{Pagination:o["a"]},data:function(){return{name:"会员标签",height:680,loading:!1,idkey:"tag_id",exps:[],query:{page:1,limit:12,search_field:"tag_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{tag_id:"",tag_name:"",tag_desc:"",sort:250},rules:{tag_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,memberPk:"member_id",memberName:"会员",memberDialog:!1,memberDialogTitle:"",memberLoad:!1,memberData:[],memberCount:0,memberQuery:{page:1,limit:12},memberSelection:[],memberSelectIds:"",memberSelectTitle:"选中操作",memberSelectDialog:!1,memberSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removem"===e?this.selectTitle=this.name+"解除会员":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removem"===e?this.removem(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection,!0),this.selectDialog=!1}else this.selectAlert()},removem:function(e){var t=this;e.length?(this.loading=!0,g({tag_id:this.selectGetIds(e),member_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),f({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},memberShow:function(e){this.memberDialog=!0,this.memberDialogTitle="标签会员："+e.tag_name,this.memberQuery.tag_id=e.tag_id,this.member()},member:function(){var e=this;this.memberLoad=!0,b(this.memberQuery).then((function(t){e.memberData=t.data.list,e.memberCount=t.data.count,e.memberLoad=!1})).catch((function(){e.memberLoad=!1}))},memberSort:function(e){this.memberQuery.sort_field=e.prop,this.memberQuery.sort_value="","ascending"===e.order&&(this.memberQuery.sort_value="asc",this.member()),"descending"===e.order&&(this.memberQuery.sort_value="desc",this.member())},memberSelect:function(e){this.memberSelection=e,this.memberSelectIds=this.memberSelectGetIds(e).toString()},memberSelectGetIds:function(e){return Object(n["a"])(e,this.memberPk)},memberSelectAlert:function(){this.$alert("请选择需要操作的"+this.memberName,"提示",{type:"warning",callback:function(e){}})},memberSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["memberRef"].clearSelection(),this.$refs["memberRef"].toggleRowSelection(t)),this.memberSelection.length?(this.memberSelectTitle="选中操作","memberRemove"===e&&(this.memberSelectTitle="解除标签"),this.memberSelectDialog=!0,this.memberSelectType=e):this.memberSelectAlert()},memberSelectCancel:function(){this.memberSelectDialog=!1},memberSelectSubmit:function(){if(this.memberSelection.length){var e=this.memberSelectType;"memberRemove"===e&&this.memberRemove(this.memberSelection),this.memberSelectDialog=!1}else this.memberSelectAlert()},memberRemove:function(e){var t=this;e.length?(this.memberLoad=!0,g({tag_id:this.memberQuery.tag_id,member_ids:this.memberSelectGetIds(e)}).then((function(e){t.member(),t.$message.success(e.msg)})).catch((function(){t.memberLoad=!1}))):this.memberSelectAlert()}}},v=_,y=l("2877"),k=Object(y["a"])(v,i,a,!1,null,"37d3099a",null);t["default"]=k.exports},"7d48":function(e,t,l){"use strict";l("1849")},"7f9a":function(e,t,l){"use strict";l("190b")},8182:function(e,t,l){},8374:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:"member_id",label:"会员ID"}}),t("el-option",{attrs:{value:"api_id",label:"接口"}}),t("el-option",{attrs:{value:"request_ip",label:"请求IP"}}),t("el-option",{attrs:{value:"request_region",label:"请求地区"}}),t("el-option",{attrs:{value:"request_isp",label:"请求ISP"}}),t("el-option",{attrs:{value:"response_code",label:"返回码"}}),t("el-option",{attrs:{value:"log_type",label:"日志类型"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"api_id"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"接口",options:e.apiData,props:e.apiProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"log_type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"日志类型",clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.logTypes,(function(e,l){return t("el-option",{key:l,attrs:{value:l,label:e}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"删除选择"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{title:"删除查询结果"},on:{click:function(t){return e.clear()}}},[e._v("清空")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"member_id",label:"会员ID","min-width":"70"}}),t("el-table-column",{attrs:{prop:"username",label:"会员昵称","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"会员用户名","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"api_id",label:"接口ID","min-width":"70"}}),t("el-table-column",{attrs:{prop:"api_name",label:"接口名称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"api_url",label:"接口链接","min-width":"185","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_ip",label:"请求IP","min-width":"130"}}),t("el-table-column",{attrs:{prop:"request_region",label:"请求地区","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"request_isp",label:"请求ISP","min-width":"110","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_code",label:"返回码","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"response_msg",label:"返回描述","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"create_time",label:"请求时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"85"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.info(l.row)}}},[e._v("详情")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"会员ID",prop:"member_id"}},[t("el-input",{model:{value:e.model.member_id,callback:function(t){e.$set(e.model,"member_id",t)},expression:"model.member_id"}})],1),t("el-form-item",{attrs:{label:"会员昵称",prop:"nickname"}},[t("el-input",{model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),t("el-form-item",{attrs:{label:"会员用户名",prop:"username"}},[t("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("el-form-item",{attrs:{label:"接口ID",prop:"api_id"}},[t("el-input",{model:{value:e.model.api_id,callback:function(t){e.$set(e.model,"api_id",t)},expression:"model.api_id"}})],1),t("el-form-item",{attrs:{label:"接口名称",prop:"api_name"}},[t("el-input",{model:{value:e.model.api_name,callback:function(t){e.$set(e.model,"api_name",t)},expression:"model.api_name"}})],1),t("el-form-item",{attrs:{label:"接口链接",prop:"api_url"}},[t("el-input",{model:{value:e.model.api_url,callback:function(t){e.$set(e.model,"api_url",t)},expression:"model.api_url"}})],1),t("el-form-item",{attrs:{label:"请求方式",prop:"request_method"}},[t("el-input",{model:{value:e.model.request_method,callback:function(t){e.$set(e.model,"request_method",t)},expression:"model.request_method"}})],1),t("el-form-item",{attrs:{label:"请求IP",prop:"request_ip"}},[t("el-input",{model:{value:e.model.request_ip,callback:function(t){e.$set(e.model,"request_ip",t)},expression:"model.request_ip"}})],1),t("el-form-item",{attrs:{label:"请求地区",prop:"request_region"}},[t("el-input",{model:{value:e.model.request_region,callback:function(t){e.$set(e.model,"request_region",t)},expression:"model.request_region"}})],1),t("el-form-item",{attrs:{label:"请求ISP",prop:"request_isp"}},[t("el-input",{model:{value:e.model.request_isp,callback:function(t){e.$set(e.model,"request_isp",t)},expression:"model.request_isp"}})],1),t("el-form-item",{attrs:{label:"请求时间",prop:"create_time"}},[t("el-input",{model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1),t("el-form-item",{attrs:{label:"请求参数",prop:"request_param"}},[t("pre",[e._v(e._s(e.model.request_param))])]),t("el-form-item",{attrs:{label:"返回码",prop:"response_code"}},[t("el-input",{model:{value:e.model.response_code,callback:function(t){e.$set(e.model,"response_code",t)},expression:"model.response_code"}})],1),t("el-form-item",{attrs:{label:"返回描述",prop:"response_msg"}},[t("el-input",{model:{value:e.model.response_msg,callback:function(t){e.$set(e.model,"response_msg",t)},expression:"model.response_msg"}})],1),t("el-form-item",{attrs:{label:"用户代理",prop:"user_agent"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.user_agent,callback:function(t){e.$set(e.model,"user_agent",t)},expression:"model.user_agent"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/member.Log/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"clear",method:"post",data:e})}var h={name:"MemberLog",components:{Pagination:o["a"]},directives:{},data:function(){return{name:"会员日志",height:680,loading:!1,idkey:"log_id",exps:[],query:{page:1,limit:12,search_field:"member_id",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{},rules:{},apiData:[],apiProps:{checkStrictly:!0,value:"api_id",label:"api_name",multiple:!0,emitPath:!1},logTypes:[],selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.apiData=t.data.api,e.logTypes=t.data.log_types,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},info:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"详情："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.model=e.data}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){this.dialog=!1,this.reset()},reset:function(e){this.model=e||this.$options.data().model},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,m({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},clear:function(){var e=this;this.$confirm("确定要清空"+this.name+"(查询结果或所有)吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e.query).then((function(t){e.list(),e.$message.success("清空"+e.name+"记录 "+t.data.count+" 条")})).catch((function(){}))})).catch((function(){}))}}},f=h,b=l("2877"),g=Object(b["a"])(f,i,a,!1,null,null,null);t["default"]=g.exports},"889d":function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-card",[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.name,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.origin_id,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"小程序码",prop:"qrcode_url"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.qrcode_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload()}}},[e._v("上传小程序码")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete()}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"* AppID",prop:"appid"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.appid,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"* AppSecret",prop:"appsecret"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.appsecret,t)}},slot:"append"})],1)],1)],1)],1),t("el-form",{ref:"form",attrs:{"label-width":"120px"}},[t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"上传二维码",visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=l("98b1"),o=l("f71e"),n=l("3659"),r=l("f293"),c={name:"SettingWechatMini",components:{FileManage:n["a"]},data:function(){return{name:"微信小程序",height:680,loading:!1,model:{name:"",origin_id:"",qrcode_id:0,qrcode_url:"",appid:"",appsecret:""},rules:{},fileDialog:!1}},created:function(){this.height=Object(s["a"])(270),this.info()},methods:{info:function(){var e=this;Object(r["b"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(r["b"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(r["a"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},fileUpload:function(){this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=e.length;if(t){var l=t-1;this.model.qrcode_id=e[l]["file_id"],this.model.qrcode_url=e[l]["file_url"]}},fileDelete:function(){this.model.qrcode_id=0,this.model.qrcode_url=""},copy:function(e,t){e?Object(o["a"])(e,t):this.$message.error("内容为空")}}},u=c,d=l("2877"),m=Object(d["a"])(u,i,a,!1,null,"4da13c60",null);t["default"]=m.exports},"88b6":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"dept_pid",label:"上级"}}),t("el-option",{attrs:{value:"dept_name",label:"名称"}}),t("el-option",{attrs:{value:"dept_abbr",label:"简称"}}),t("el-option",{attrs:{value:"dept_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"dept_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",title:"收起/展开"},on:{change:e.expandAll},model:{value:e.isExpandAll,callback:function(t){e.isExpandAll=t},expression:"isExpandAll"}},[e._v("收起")]),t("el-button",{attrs:{title:"解除用户"},on:{click:function(t){return e.selectOpen("removeu")}}},[e._v("用户")]),t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removeu"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的用户吗？")])]):"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级部门",clearable:"",filterable:""},model:{value:e.dept_pid,callback:function(t){e.dept_pid=t},expression:"dept_pid"}})],1):e._e(),"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height+50,"row-key":e.idkey,"default-expand-all":""},on:{"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"dept_name",label:"名称","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"dept_abbr",label:"简称","min-width":"100"}}),t("el-table-column",{attrs:{prop:"dept_desc",label:"描述","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"80"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userShow(l.row)}}},[e._v("用户")]),t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级",prop:"dept_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级部门",clearable:"",filterable:""},model:{value:e.model.dept_pid,callback:function(t){e.$set(e.model,"dept_pid",t)},expression:"model.dept_pid"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"dept_name"}},[t("el-input",{attrs:{placeholder:"请输入部门名称",clearable:""},model:{value:e.model.dept_name,callback:function(t){e.$set(e.model,"dept_name",t)},expression:"model.dept_name"}})],1),t("el-form-item",{attrs:{label:"简称",prop:"dept_abbr"}},[t("el-input",{attrs:{placeholder:"请输入部门简称",clearable:""},model:{value:e.model.dept_abbr,callback:function(t){e.$set(e.model,"dept_abbr",t)},expression:"model.dept_abbr"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"dept_desc"}},[t("el-input",{attrs:{placeholder:"请输入部门描述",clearable:""},model:{value:e.model.dept_desc,callback:function(t){e.$set(e.model,"dept_desc",t)},expression:"model.dept_desc"}})],1),t("el-form-item",{attrs:{label:"电话",prop:"dept_tel"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.dept_tel,callback:function(t){e.$set(e.model,"dept_tel",t)},expression:"model.dept_tel"}})],1),t("el-form-item",{attrs:{label:"传真",prop:"dept_fax"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.dept_fax,callback:function(t){e.$set(e.model,"dept_fax",t)},expression:"model.dept_fax"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"dept_email"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.dept_email,callback:function(t){e.$set(e.model,"dept_email",t)},expression:"model.dept_email"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"dept_addr"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.dept_addr,callback:function(t){e.$set(e.model,"dept_addr",t)},expression:"model.dept_addr"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{placeholder:"250",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.userDialogTitle,visible:e.userDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.userDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.userSelectOpen("userRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.userSelectTitle,visible:e.userSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.userSelectDialog=t}}},[t("el-form",{ref:"userSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.userName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.userSelectIds,callback:function(t){e.userSelectIds=t},expression:"userSelectIds"}})],1),"userRemove"===e.userSelectType?t("el-form-item",{attrs:{label:"部门ID",prop:""}},[t("span",[e._v(e._s(e.userQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.userSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.userSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoad,expression:"userLoad"}],ref:"userRef",attrs:{data:e.userData,height:e.height-20},on:{"sort-change":e.userSort,"selection-change":e.userSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.userPk,label:"用户ID","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"dept_names",label:"部门","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_super",label:"超管","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_super,callback:function(t){e.$set(l.row,"is_super",t)},expression:"scope.row.is_super"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作","min-width":"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userSelectOpen("userRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.userCount>0,expression:"userCount>0"}],attrs:{total:e.userCount,page:e.userQuery.page,limit:e.userQuery.limit},on:{"update:page":function(t){return e.$set(e.userQuery,"page",t)},"update:limit":function(t){return e.$set(e.userQuery,"limit",t)},pagination:e.user}})],1)],1)},a=[],s=(l("d3b7"),l("159b"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/system.Dept/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"editpid",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function g(e){return Object(r["a"])({url:c+"user",method:"get",params:e})}function _(e){return Object(r["a"])({url:c+"userRemove",method:"post",data:e})}var v={name:"SystemDept",components:{Pagination:o["a"]},directives:{},data:function(){return{name:"部门",height:680,loading:!1,idkey:"dept_id",exps:[],query:{search_field:"dept_name",search_exp:"like",date_field:"create_time"},data:[],dialog:!1,dialogTitle:"",model:{dept_id:"",dept_pid:0,dept_name:"",dept_abbr:"",dept_desc:"",dept_tel:"",dept_fax:"",dept_email:"",dept_addr:"",sort:250},rules:{dept_name:[{required:!0,message:"请输入部门名称",trigger:"blur"}]},trees:[],props:{checkStrictly:!0,value:"dept_id",label:"dept_name",emitPath:!1},isExpandAll:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",dept_pid:"",is_disable:0,userPk:"user_id",userName:"用户",userDialog:!1,userDialogTitle:"",userLoad:!1,userData:[],userCount:0,userQuery:{page:1,limit:12},userSelection:[],userSelectIds:"",userSelectTitle:"选中操作",userSelectDialog:!1,userSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.isExpandAll=!1,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.dept_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},expandAll:function(e){this.expandFor(this.data,!e)},expandFor:function(e,t){var l=this;e.forEach((function(e){l.$refs.table.toggleRowExpansion(e,t),e.children&&l.expandFor(e.children,t)}))},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removeu"===e?this.selectTitle=this.name+"解除用户":"editpid"===e?this.selectTitle=this.name+"修改上级":"disable"===e?this.selectTitle="this.name + 是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removeu"===e?this.removeu(this.selection):"editpid"===e?this.editpid(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removeu:function(e){var t=this;e.length?(this.loading=!0,_({dept_id:this.selectGetIds(e),user_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editpid:function(e){var t=this;f({ids:this.selectGetIds(e),dept_pid:this.dept_pid}).then((function(e){t.list(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)this.selectAlert();else{this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),b({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}},dele:function(e){var t=this;e.length?h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()},userShow:function(e){this.userDialog=!0,this.userDialogTitle=this.name+"用户："+e.dept_name,this.userQuery.dept_id=e.dept_id,this.user()},user:function(){var e=this;this.userLoad=!0,g(this.userQuery).then((function(t){e.userData=t.data.list,e.userCount=t.data.count,e.userLoad=!1})).catch((function(){e.userLoad=!1}))},userSort:function(e){this.userQuery.sort_field=e.prop,this.userQuery.sort_value="","ascending"===e.order&&(this.userQuery.sort_value="asc",this.user()),"descending"===e.order&&(this.userQuery.sort_value="desc",this.user())},userSelect:function(e){this.userSelection=e,this.userSelectIds=this.userSelectGetIds(e).toString()},userSelectGetIds:function(e){return Object(n["a"])(e,this.userPk)},userSelectAlert:function(){this.$alert("请选择需要操作的"+this.userName,"提示",{type:"warning",callback:function(e){}})},userSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["userRef"].clearSelection(),this.$refs["userRef"].toggleRowSelection(t)),this.userSelection.length?(this.userSelectTitle="选中操作","userRemove"===e&&(this.userSelectTitle="解除"+this.name),this.userSelectDialog=!0,this.userSelectType=e):this.userSelectAlert()},userSelectCancel:function(){this.userSelectDialog=!1},userSelectSubmit:function(){if(this.userSelection.length){var e=this.userSelectType;"userRemove"===e&&this.userRemove(this.userSelection),this.userSelectDialog=!1}else this.userSelectAlert()},userRemove:function(e){var t=this;e.length?(this.userLoad=!0,_({dept_id:this.userQuery.dept_id,user_ids:this.userSelectGetIds(e)}).then((function(e){t.user(),t.$message.success(e.msg)})).catch((function(){t.userLoad=!1}))):this.userSelectAlert()}}},y=v,k=l("2877"),w=Object(k["a"])(y,i,a,!1,null,null,null);t["default"]=w.exports},"88d4":function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-row",{staticStyle:{padding:"15px 15px 0 15px"},attrs:{gutter:10}},e._l(e.datas,(function(l,i){return t("el-col",{key:i,staticStyle:{"margin-top":"5px"},attrs:{xs:24,sm:3}},[t("el-card",{staticStyle:{"text-align":"center"},attrs:{"body-style":e.cardBodyStyle}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(l.name))])]),t("div",[t("el-statistic",{attrs:{value:l.count}})],1)])],1)})),1)},a=[],s=l("072e"),o={name:"SystemIndexCount",components:{},data:function(){return{name:"总数统计",loading:!1,datas:[],cardBodyStyle:{padding:"10px 0px 10px 0px"}}},computed:{},created:function(){this.count()},mounted:function(){},methods:{count:function(){var e=this;this.loading=!0,Object(s["b"])().then((function(t){e.datas=t.data.count,e.loading=!1})).catch((function(){e.loading=!1}))}}},n=o,r=l("2877"),c=Object(r["a"])(n,i,a,!1,null,null,null);t["default"]=c.exports},8967:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"10vh",center:"","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height-200,"show-header":!1}},[t("el-table-column",{attrs:{prop:"title","min-width":"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{style:{color:l.row.color}},[e._v(e._s(l.row.title))])]}}])}),t("el-table-column",{attrs:{prop:"create_time",width:"155"}}),t("el-table-column",{attrs:{width:"50",align:"right",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.info(l.row)}}},[e._v("查看")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit,align:"center",background:!1,small:!0,layout:"prev, pager, next"},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.nohint(e.count)}}},[e._v("不再提示")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.submit}},[e._v("关闭")])],1)],1),t("el-dialog",{attrs:{title:e.infoTitle,visible:e.infoDialog,top:"9vh",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.infoDialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,"label-width":"0"}},[t("el-form-item",{staticStyle:{"text-align":"center","margin-bottom":"0"},attrs:{label:"",prop:""}},[t("span",[e._v(e._s(e.model.create_time))])]),t("el-form-item",{attrs:{label:"",prop:"content"}},[t("div",{domProps:{innerHTML:e._s(e.model.content)}})])],1)],1)],1)},a=[],s=l("98b1"),o=l("333d"),n=l("d369"),r=l("072e"),c=l("8b29"),u={name:"SystemIndexNotice",components:{Pagination:o["a"]},data:function(){return{name:"公告",height:680,loading:!1,idkey:"notice_id",query:{page:1,limit:10},data:[],exps:[],count:0,dialog:!1,dialogTitle:"公告",model:{notice_id:"",username:"",title:"",intro:"",content:"",create_time:""},infoTitle:"公告",infoDialog:!1}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;Object(n["d"])()||(this.loading=!0,Object(r["e"])(this.query).then((function(t){if(e.data=t.data.list,e.count=t.data.count,e.loading=!1,e.count>0)if(1===e.count){var l=e.data[0];e.$confirm(l.intro,l.title,{dangerouslyUseHTMLString:!0,confirmButtonText:"查看",cancelButtonText:"不再提示",closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1,center:!0}).then((function(){e.info(l)})).catch((function(){e.nohint(e.count)}))}else e.dialog=!0})).catch((function(){e.loading=!1})))},info:function(e){var t=this;this.infoDialog=!0;var l={};l[this.idkey]=e[this.idkey],Object(c["f"])(l).then((function(e){t.model=e.data,t.infoTitle=e.data.title}))},cancel:function(){this.dialog=!1},submit:function(){this.dialog=!1},nohint:function(e){this.dialog=!1,Object(n["j"])(e)}}},d=u,m=l("2877"),p=Object(m["a"])(d,i,a,!1,null,"36f66a46",null);t["default"]=p.exports},"89a4":function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"title",label:"标题"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间字段"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),t("el-option",{attrs:{value:"start_time",label:"开始时间"}}),t("el-option",{attrs:{value:"end_time",label:"结束时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"时间范围"},on:{click:function(t){return e.selectOpen("datetime")}}},[e._v("时间")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"datetime"===e.selectType?t("el-form-item",{attrs:{label:"时间范围",prop:""}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00",placeholder:"开始时间"},model:{value:e.start_time,callback:function(t){e.start_time=t},expression:"start_time"}}),t("span",[e._v("至")]),t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",placeholder:"结束时间"},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"260","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{style:{color:l.row.title_color}},[e._v(e._s(l.row.title))])]}}])}),t("el-table-column",{attrs:{prop:"start_time",label:"开始时间","min-width":"160",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"end_time",label:"结束时间","min-width":"160",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"标题颜色",prop:"title_color"}},[t("el-color-picker",{model:{value:e.model.title_color,callback:function(t){e.$set(e.model,"title_color",t)},expression:"model.title_color"}})],1),t("el-form-item",{attrs:{label:"简介",prop:"intro"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",autosize:{minRows:2,maxRows:5}},model:{value:e.model.intro,callback:function(t){e.$set(e.model,"intro",t)},expression:"model.intro"}})],1),t("el-form-item",{attrs:{label:"开始时间",prop:"start_time"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00",placeholder:"禁用开始时间"},model:{value:e.model.start_time,callback:function(t){e.$set(e.model,"start_time",t)},expression:"model.start_time"}})],1),t("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",placeholder:"禁用结束时间"},model:{value:e.model.end_time,callback:function(t){e.$set(e.model,"end_time",t)},expression:"model.end_time"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("rich-editor",{model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.update_time?t("el-form-item",{attrs:{label:"删除时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("6a13"),r=l("ed08"),c=l("8b29"),u={name:"SystemNotice",components:{Pagination:o["a"],RichEditor:n["a"]},data:function(){return{name:"公告",height:680,loading:!1,idkey:"notice_id",exps:[],query:{page:1,limit:12,search_field:"title",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{notice_id:"",type:1,title:"",title_color:"#606266",start_time:"",end_time:"",intro:"",content:"",sort:250},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],start_time:[{required:!0,message:"请输入开始时间",trigger:"blur"}],end_time:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,start_time:"",end_time:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,Object(c["g"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],Object(c["f"])(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?Object(c["e"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(c["a"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(r["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","disable"===e?this.selectTitle=this.name+"是否禁用":"datetime"===e?this.selectTitle=this.name+"时间范围":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"disable"===e?this.disable(this.selection,!0):"datetime"===e?this.datetime(this.selection):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),Object(c["d"])({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},datetime:function(e){var t=this;e.length?(this.loading=!0,Object(c["b"])({ids:this.selectGetIds(e),start_time:this.start_time,end_time:this.end_time}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},dele:function(e){var t=this;e.length?Object(c["c"])({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()}}},d=u,m=l("2877"),p=Object(m["a"])(d,i,a,!1,null,null,null);t["default"]=p.exports},"8a38":function(e,t,l){"use strict";l("b954")},"8b29":function(e,t,l){"use strict";l.d(t,"g",(function(){return s})),l.d(t,"f",(function(){return o})),l.d(t,"a",(function(){return n})),l.d(t,"e",(function(){return r})),l.d(t,"c",(function(){return c})),l.d(t,"b",(function(){return u})),l.d(t,"d",(function(){return d}));var i=l("b775"),a="/admin/system.Notice/";function s(e){return Object(i["a"])({url:a+"list",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"info",method:"get",params:e})}function n(e){return Object(i["a"])({url:a+"add",method:"post",data:e})}function r(e){return Object(i["a"])({url:a+"edit",method:"post",data:e})}function c(e){return Object(i["a"])({url:a+"dele",method:"post",data:e})}function u(e){return Object(i["a"])({url:a+"datetime",method:"post",data:e})}function d(e){return Object(i["a"])({url:a+"disable",method:"post",data:e})}},9079:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"Token密钥",prop:"token_key"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.token_key,callback:function(t){e.$set(e.model,"token_key",t)},expression:"model.token_key"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 修改后用户登录状态失效，需重新登录。 ")])],1),t("el-form-item",{attrs:{label:"Token有效时间",prop:"token_exp"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.token_exp,callback:function(t){e.$set(e.model,"token_exp",t)},expression:"model.token_exp"}},[t("template",{slot:"append"},[e._v("小时")])],2)],1),t("el-col",{attrs:{span:16}},[e._v(" 登录成功后超过有效时间，需重新登录。 ")])],1),t("el-form-item",{attrs:{label:"多端登录",prop:"is_multi_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_multi_login,callback:function(t){e.$set(e.model,"is_multi_login",t)},expression:"model.is_multi_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后可以在多个设备同时登录。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingToken",components:{},data:function(){return{name:"Token设置",height:680,loading:!1,model:{token_key:"",token_exp:12,is_multi_login:0},rules:{token_key:[{required:!0,message:"请输入Token密钥",trigger:"blur"}]}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["p"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["p"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["o"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},9401:function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-card",[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.name,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.origin_id,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"公众号码",prop:"qrcode_url"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.qrcode_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload()}}},[e._v("上传公众号码")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete()}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"* AppID",prop:"appid"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.appid,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"* AppSecret",prop:"appsecret"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.appsecret,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"服务器地址(URL)",prop:"server_url"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.server_url,callback:function(t){e.$set(e.model,"server_url",t)},expression:"model.server_url"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.server_url,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"令牌(Token)",prop:"token"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.token,callback:function(t){e.$set(e.model,"token",t)},expression:"model.token"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.token,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"消息加解密密钥",prop:"encoding_aes_key"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.encoding_aes_key,callback:function(t){e.$set(e.model,"encoding_aes_key",t)},expression:"model.encoding_aes_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.encoding_aes_key,t)}},slot:"append"})],1)],1)],1),t("el-form-item",{attrs:{label:"消息加解密方式",prop:"encoding_aes_type"}},[t("el-col",{attrs:{span:12}},[t("el-radio-group",{model:{value:e.model.encoding_aes_type,callback:function(t){e.$set(e.model,"encoding_aes_type",t)},expression:"model.encoding_aes_type"}},e._l(e.encoding_aes_types,(function(l){return t("el-radio",{key:l.value,attrs:{label:l.value}},[e._v(e._s(l.label))])})),1)],1)],1)],1),t("el-form",{ref:"form",attrs:{"label-width":"120px"}},[t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"上传二维码",visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=l("98b1"),o=l("f71e"),n=l("3659"),r=l("f293"),c={name:"SettingWechatOffi",components:{FileManage:n["a"]},data:function(){return{name:"微信公众号",height:680,loading:!1,model:{name:"",origin_id:"",qrcode_id:0,qrcode_url:"",appid:"",appsecret:"",server_url:"",token:"",encoding_aes_key:"",encoding_aes_type:1},rules:{},encoding_aes_types:[{value:1,label:"明文模式"},{value:2,label:"兼容模式"},{value:3,label:"安全模式"}],fileDialog:!1}},created:function(){this.height=Object(s["a"])(270),this.info()},methods:{info:function(){var e=this;Object(r["d"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(r["d"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(r["c"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},fileUpload:function(){this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=e.length;if(t){var l=t-1;this.model.qrcode_id=e[l]["file_id"],this.model.qrcode_url=e[l]["file_url"]}},fileDelete:function(){this.model.qrcode_id=0,this.model.qrcode_url=""},copy:function(e,t){e?Object(o["a"])(e,t):this.$message.error("内容为空")}}},u=c,d=l("2877"),m=Object(d["a"])(u,i,a,!1,null,"2d5c565a",null);t["default"]=m.exports},"98b1":function(e,t,l){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:260,t=880,l=document.documentElement.clientHeight||document.body.clientHeight;return l?l-e:t-e}l.d(t,"a",(function(){return i}))},"9c2c":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"日志记录开关",prop:"log_switch"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.log_switch,callback:function(t){e.$set(e.model,"log_switch",t)},expression:"model.log_switch"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后，会记录后台用户日志。 ")])],1),t("el-form-item",{attrs:{label:"日志保留时间",prop:"log_save_time"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.log_save_time,callback:function(t){e.$set(e.model,"log_save_time",t)},expression:"model.log_save_time"}},[t("template",{slot:"append"},[e._v("天")])],2)],1),t("el-col",{attrs:{span:16}},[e._v(" 用户日志保留天数，0永久保留。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingLog",components:{},data:function(){return{name:"日志设置",height:680,loading:!1,model:{log_switch:0,log_save_time:0},rules:{}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["k"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["k"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["j"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"9cd6":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"正在退出"}})},a=[],s=l("c7eb"),o=l("1da1"),n=(l("14d9"),{name:"SystemLogout",components:{},data:function(){return{name:"退出",loading:!0}},created:function(){this.logout()},methods:{logout:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:e.$router.push("/login");case 3:case"end":return t.stop()}}),t)})))()}}}),r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},"9eb0":function(e,t,l){},a05d:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ref",attrs:{rules:e.rules,model:e.model,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"头像",prop:"avatar_url"}},[t("el-col",{attrs:{span:12}},[e.model.avatar_url?t("el-avatar",{attrs:{size:100,fit:"contain",src:e.model.avatar_url,shape:"circle"}}):t("el-avatar",{attrs:{icon:"el-icon-user-solid",size:100}})],1),t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload()}}},[e._v("上传头像")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete()}}},[e._v("删除")]),t("p",[e._v("jpg、png图片，小于 100 KB，宽高1:1")])],1)],1),t("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[t("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入账号",clearable:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机",clearable:""},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:e.refresh}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)],1)],1),t("el-dialog",{attrs:{title:"上传头像",visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=l("98b1"),o=l("4360"),n=l("3659"),r=l("ebb5"),c={name:"SystemUserCenterEdit",components:{FileManage:n["a"]},data:function(){return{name:"修改信息",height:680,loading:!1,model:{avatar_id:0,avatar_url:"",username:"",nickname:"",phone:"",email:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}]},fileDialog:!1}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(r["b"])().then((function(l){e.reset(l.data),o["a"].commit("user/SET_AVATAR",l.data.avatar_url),o["a"].commit("user/SET_NICKNAME",l.data.nickname),o["a"].commit("user/SET_USERNAME",l.data.username),t&&e.$message.success(l.msg)})).catch((function(){}))},refresh:function(){this.loading=!0,this.info(!0),this.loading=!1},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(r["a"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},fileUpload:function(){this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=e.length;if(t){var l=t-1;this.model.avatar_id=e[l]["file_id"],this.model.avatar_url=e[l]["file_url"]}},fileDelete:function(){this.model.avatar_id=0,this.model.avatar_url=""}}},u=c,d=l("2877"),m=Object(d["a"])(u,i,a,!1,null,null,null);t["default"]=m.exports},a17d:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",{attrs:{span:12,offset:6}},[t("el-result",{attrs:{icon:"warning",title:"401","sub-title":"没有权限访问"}})],1)],1),t("el-row",[t("el-col",{staticClass:"yyl-center yyl-top",attrs:{span:6,offset:6}},[t("el-button",{attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v("返回")])],1),t("el-col",{staticClass:"yyl-center yyl-top",attrs:{span:6}},[t("el-button",{attrs:{icon:"el-icon-s-home"},on:{click:e.dashboard}},[e._v("控制台")])],1)],1),t("el-row",[t("el-col",{staticClass:"yyl-center yyl-top",attrs:{span:12,offset:6}},[t("a",{attrs:{href:"https://gitee.com/skyselang/yylAdmin",target:"_blank",title:""}},[t("img",{attrs:{src:"https://gitee.com/skyselang/yylAdmin/widgets/widget_card.svg?colors=4183c4,ffffff,ffffff,e3e9ed,666666,9b9b9b",alt:"",srcset:""}})])])],1)],1)},a=[],s=(l("14d9"),{name:"System401",data:function(){return{name:"401页面"}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)},dashboard:function(){this.$router.push({path:"/dashboard"})}}}),o=s,n=(l("f5cd"),l("2877")),r=Object(n["a"])(o,i,a,!1,null,"3f60b424",null);t["default"]=r.exports},a202:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-tabs",[t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"内容设置",name:""}},[t("el-form-item",{attrs:{label:"内容管理",prop:"is_content"}},[t("el-col",{attrs:{span:3}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_content,callback:function(t){e.$set(e.model,"is_content",t)},expression:"model.is_content"}})],1),t("el-col",{attrs:{span:21}},[t("span",[e._v("内容是否开启。关闭后无法访问。")])])],1),t("el-form-item",{attrs:{label:"自定义设置"}},[t("el-col",{attrs:{span:3}},[e._v(" 键名 ")]),t("el-col",{attrs:{span:5}},[e._v(" 键值 ")]),t("el-col",{attrs:{span:6}},[e._v(" 说明 ")]),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("增加")])],1)],1),e._l(e.model.diy_config,(function(l,i){return t("el-form-item",{key:i,attrs:{label:""}},[t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键名"},model:{value:l.config_key,callback:function(t){e.$set(l,"config_key",t)},expression:"item.config_key"}})],1),t("el-col",{attrs:{span:5}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键值"},model:{value:l.config_val,callback:function(t){e.$set(l,"config_val",t)},expression:"item.config_val"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入说明"},model:{value:l.config_desc,callback:function(t){e.$set(l,"config_desc",t)},expression:"item.config_desc"}})],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dele(i)}}},[e._v("删除")])],1)],1)}))],2)],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)},a=[],s=(l("14d9"),l("a434"),l("98b1")),o=l("b775"),n="/admin/content.Setting/";function r(e){return Object(o["a"])({url:n+"info",method:"get",params:e})}function c(e){return Object(o["a"])({url:n+"edit",method:"post",data:e})}var u={name:"ContentSetting",components:{},data:function(){return{name:"内容设置",height:680,loading:!1,model:{is_content:1,diy_config:[]},rules:{}}},created:function(){this.height=Object(s["a"])(270),this.info()},methods:{info:function(){var e=this;r().then((function(t){e.model=t.data}))},add:function(){this.model.diy_config.push({config_key:"",config_val:"",config_desc:""})},dele:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.diy_config.splice(e,1)})).catch((function(){}))},refresh:function(){var e=this;this.loading=!0,r().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?(e.loading=!0,c(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请完善必填项*")}))}}},d=u,m=l("2877"),p=Object(m["a"])(d,i,a,!1,null,null,null);t["default"]=p.exports},a9ab:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"region_pid",label:"上级"}}),t("el-option",{attrs:{value:"region_name",label:"名称"}}),t("el-option",{attrs:{value:"region_pinyin",label:"拼音"}}),t("el-option",{attrs:{value:"region_jianpin",label:"简拼"}}),t("el-option",{attrs:{value:"region_initials",label:"首字母"}}),t("el-option",{attrs:{value:"region_citycode",label:"区号"}}),t("el-option",{attrs:{value:"region_zipcode",label:"邮编"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"region_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.region_pid,callback:function(t){e.$set(e.query,"region_pid",t)},expression:"query.region_pid"}}):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"修改区号"},on:{click:function(t){return e.selectOpen("citycode")}}},[e._v("区号")]),t("el-button",{attrs:{title:"修改邮编"},on:{click:function(t){return e.selectOpen("zipcode")}}},[e._v("邮编")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级地区",clearable:"",filterable:""},model:{value:e.region_pid,callback:function(t){e.region_pid=t},expression:"region_pid"}})],1):"citycode"===e.selectType?t("el-form-item",{attrs:{label:"区号",prop:""}},[t("el-input",{attrs:{placeholder:"请输入区号，eg：010",clearable:""},model:{value:e.region_citycode,callback:function(t){e.region_citycode=t},expression:"region_citycode"}})],1):"zipcode"===e.selectType?t("el-form-item",{attrs:{label:"邮编",prop:""}},[t("el-input",{attrs:{placeholder:"请输入邮编，eg：1000",clearable:""},model:{value:e.region_zipcode,callback:function(t){e.region_zipcode=t},expression:"region_zipcode"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.tbKey,ref:"table",attrs:{data:e.data,height:e.height,"row-key":e.idkey,lazy:"",load:e.load},on:{"sort-change":e.sort,"selection-change":e.select,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"region_name",label:"名称","min-width":"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"region_pinyin",label:"拼音","min-width":"250",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"region_citycode",label:"区号","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"region_zipcode",label:"邮编","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"region_longitude",label:"经度","min-width":"110",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"region_latitude",label:"纬度","min-width":"110",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用",width:"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"95",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height-50+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级",prop:"region_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级地区",clearable:"",filterable:""},model:{value:e.model.region_pid,callback:function(t){e.$set(e.model,"region_pid",t)},expression:"model.region_pid"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"region_name"}},[t("el-input",{attrs:{placeholder:"请输入名称，eg：北京市",clearable:""},model:{value:e.model.region_name,callback:function(t){e.$set(e.model,"region_name",t)},expression:"model.region_name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_name,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"拼音",prop:"region_pinyin"}},[t("el-input",{attrs:{placeholder:"请输入拼音，eg：Beijing",clearable:""},model:{value:e.model.region_pinyin,callback:function(t){e.$set(e.model,"region_pinyin",t)},expression:"model.region_pinyin"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_pinyin,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"简拼",prop:"region_jianpin"}},[t("el-input",{attrs:{placeholder:"请输入简拼，eg：BJ",clearable:""},model:{value:e.model.region_jianpin,callback:function(t){e.$set(e.model,"region_jianpin",t)},expression:"model.region_jianpin"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_jianpin,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"首字母",prop:"region_initials"}},[t("el-input",{attrs:{placeholder:"请输入首字母，eg：B",clearable:""},model:{value:e.model.region_initials,callback:function(t){e.$set(e.model,"region_initials",t)},expression:"model.region_initials"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_initials,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"区号",prop:"region_citycode"}},[t("el-input",{attrs:{placeholder:"请输入区号，eg：010",clearable:""},model:{value:e.model.region_citycode,callback:function(t){e.$set(e.model,"region_citycode",t)},expression:"model.region_citycode"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_citycode,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"邮编",prop:"region_zipcode"}},[t("el-input",{attrs:{placeholder:"请输入邮编，eg：1000",clearable:""},model:{value:e.model.region_zipcode,callback:function(t){e.$set(e.model,"region_zipcode",t)},expression:"model.region_zipcode"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_zipcode,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"经度",prop:"region_longitude"}},[t("el-input",{attrs:{placeholder:"请输入经度，eg：116.403263",clearable:""},model:{value:e.model.region_longitude,callback:function(t){e.$set(e.model,"region_longitude",t)},expression:"model.region_longitude"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_longitude,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"纬度",prop:"region_latitude"}},[t("el-input",{attrs:{placeholder:"请输入纬度，eg：39.915156",clearable:""},model:{value:e.model.region_latitude,callback:function(t){e.$set(e.model,"region_latitude",t)},expression:"model.region_latitude"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.region_latitude,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"请输入排序，eg：2250",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.sort,t)}},slot:"append"})],1)],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("f71e"),n=l("ed08"),r=l("b775"),c="/admin/setting.Region/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"editpid",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"citycode",method:"post",data:e})}function g(e){return Object(r["a"])({url:c+"zipcode",method:"post",data:e})}function _(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}var v={name:"SettingRegion",components:{},data:function(){return{name:"地区",height:680,loading:!1,idkey:"region_id",tbKey:1,exps:[],query:{search_field:"region_name",search_exp:"like",date_field:"create_time"},data:[],dialog:!1,dialogTitle:"",model:{region_id:"",region_pid:0,region_name:"",region_pinyin:"",region_jianpin:"",region_initials:"",region_citycode:"",region_zipcode:"",region_longitude:"",region_latitude:"",sort:2250},rules:{region_name:[{required:!0,message:"请输入地区名称",trigger:"blur"}]},trees:[],props:{expandTrigger:"click",checkStrictly:!0,value:"region_id",label:"region_name",emitPath:!1},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",region_pid:0,region_citycode:"",region_zipcode:"",is_disable:0}},created:function(){this.height=Object(s["a"])(210),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},load:function(e,t,l){u({region_pid:e[this.idkey]}).then((function(e){l(e.data.list)}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.region_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list(),++this.tbKey},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","editpid"===e?this.selectTitle=this.name+"修改上级":"citycode"===e?this.selectTitle=this.name+"修改区号":"zipcode"===e?this.selectTitle=this.name+"修改邮编":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"editpid"===e?this.editpid(this.selection):"citycode"===e?this.citycode(this.selection):"zipcode"===e?this.zipcode(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},editpid:function(e){var t=this;f({ids:this.selectGetIds(e),region_pid:this.region_pid}).then((function(e){t.list(),t.reset(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},citycode:function(e){var t=this;b({ids:this.selectGetIds(e),region_citycode:this.region_citycode}).then((function(e){t.list(),t.reset(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},zipcode:function(e){var t=this;g({ids:this.selectGetIds(e),region_zipcode:this.region_zipcode}).then((function(e){t.list(),t.reset(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),_({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.reset(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.reset(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},copy:function(e,t){Object(o["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},y=v,k=l("2877"),w=Object(k["a"])(y,i,a,!1,null,null,null);t["default"]=w.exports},aa8c:function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",[t("span",[e._v(e._s(e.name))]),t("el-col",{staticStyle:{"text-align":"center"}},[t("el-select",{staticClass:"filter-item",on:{change:e.typeChange},model:{value:e.date_type,callback:function(t){e.date_type=t},expression:"date_type"}},[t("el-option",{attrs:{label:"日",value:"day"}}),t("el-option",{attrs:{label:"月",value:"month"}})],1),t("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"350px"},attrs:{type:e.date_ptype,"value-format":e.date_format,"picker-options":e.date_options,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.date_range,callback:function(t){e.date_range=t},expression:"date_range"}})],1),t("el-col",[t("div",{style:{height:e.height+"px"},attrs:{id:"numberEchart"}})])],1)],1)},a=[],s=l("22b4"),o=l("1be7"),n=l("3620"),r=l("4cb5"),c=l("9394"),u=l("ff32"),d=l("4b2a"),m=l("2da7"),p=l("3094"),h=l("f95e"),f=l("072e");s["a"]([n["a"],r["a"],c["a"],u["a"],d["a"],m["a"],p["a"],h["a"]]);var b={name:"SystemIndexMember",components:{},directives:{},data:function(){return{name:"会员统计",height:500,loading:!1,date_type:"day",date_range:[],date_ptype:"monthrange",date_format:"yyyy-MM",date_options:{},date_options_day:{shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-5184e5),e.$emit("pick",[l,t])}},{text:"最近30天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-25056e5),e.$emit("pick",[l,t])}},{text:"最近90天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-76896e5),e.$emit("pick",[l,t])}},{text:"最近120天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-102816e5),e.$emit("pick",[l,t])}}]},date_options_month:{shortcuts:[{text:"最近3个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-2),e.$emit("pick",[l,t])}},{text:"最近6个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-5),e.$emit("pick",[l,t])}},{text:"最近9个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-8),e.$emit("pick",[l,t])}},{text:"最近12个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-11),e.$emit("pick",[l,t])}}]}}},computed:{},created:function(){this.stat()},mounted:function(){},methods:{stat:function(){var e=this;this.loading=!0,Object(f["d"])({type:this.date_type,date:this.date_range}).then((function(t){e.date_type=t.data.number.type,e.date_range=t.data.number.date,e.dateEchart(t.data.number,"numberEchart"),e.dateOptions(),e.loading=!1})).catch((function(){e.loading=!1}))},typeChange:function(){this.dateOptions(),this.date_range=[]},dateOptions:function(){var e=this.date_type;"day"===e?(this.date_ptype="daterange",this.date_format="yyyy-MM-dd",this.date_options=this.date_options_day):"month"===e&&(this.date_ptype="monthrange",this.date_format="yyyy-MM",this.date_options=this.date_options_month)},dateChange:function(){this.stat()},dateEchart:function(e,t){var l=o["b"](document.getElementById(t)),i={title:{left:"center"},legend:{top:"20px",data:e.legend,selected:{"会员总数":!1}},grid:{top:"80px",left:"1%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.xAxis},yAxis:{type:"value"},tooltip:{trigger:"axis",textStyle:{align:"left"}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},dataView:{show:!0,readOnly:!0},saveAsImage:{show:!0,name:this.name+e.date[0]+"-"+e.date[1]}}},series:e.series};l.setOption(i)}}},g=b,_=l("2877"),v=Object(_["a"])(g,i,a,!1,null,"7d189701",null);t["default"]=v.exports},b954:function(e,t,l){},b979:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"nickname",label:"昵称"}}),t("el-option",{attrs:{value:"username",label:"账号"}}),t("el-option",{attrs:{value:"phone",label:"手机"}}),t("el-option",{attrs:{value:"email",label:"邮箱"}}),t("el-option",{attrs:{value:"dept_ids",label:"部门"}}),t("el-option",{attrs:{value:"post_ids",label:"职位"}}),t("el-option",{attrs:{value:"role_ids",label:"角色"}}),t("el-option",{attrs:{value:"is_super",label:"超管"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_super"===e.query.search_field||"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):"dept_ids"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.deptData,props:e.deptProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"post_ids"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.postData,props:e.postProps,clearable:"",filterable:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"role_ids"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",attrs:{clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.roleData,(function(e){return t("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),t("el-option",{attrs:{value:"login_time",label:"登录时间"}}),t("el-option",{attrs:{value:"logout_time",label:"退出时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"修改部门"},on:{click:function(t){return e.selectOpen("editdept")}}},[e._v("部门")]),t("el-button",{attrs:{title:"修改职位"},on:{click:function(t){return e.selectOpen("editpost")}}},[e._v("职位")]),t("el-button",{attrs:{title:"修改角色"},on:{click:function(t){return e.selectOpen("editrole")}}},[e._v("角色")]),t("el-button",{attrs:{title:"重置密码"},on:{click:function(t){return e.selectOpen("password")}}},[e._v("密码")]),t("el-button",{attrs:{title:"是否超管"},on:{click:function(t){return e.selectOpen("super")}}},[e._v("超管")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"+e.name},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:e.idkey}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"editdept"===e.selectType?t("el-form-item",{attrs:{label:"部门",prop:"dept_ids"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.deptData,props:e.deptProps,clearable:"",filterable:""},model:{value:e.dept_ids,callback:function(t){e.dept_ids=t},expression:"dept_ids"}})],1):"editpost"===e.selectType?t("el-form-item",{attrs:{label:"职位",prop:"post_ids"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.postData,props:e.postProps,clearable:"",filterable:""},model:{value:e.post_ids,callback:function(t){e.post_ids=t},expression:"post_ids"}})],1):"editrole"===e.selectType?t("el-form-item",{attrs:{label:"角色",prop:"role_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{clearable:"",filterable:"",multiple:""},model:{value:e.role_ids,callback:function(t){e.role_ids=t},expression:"role_ids"}},e._l(e.roleData,(function(e){return t("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1):"password"===e.selectType?t("el-form-item",{attrs:{label:"新密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入新密码",clearable:"","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):"super"===e.selectType?t("el-form-item",{attrs:{label:"是否超管",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_super,callback:function(t){e.is_super=t},expression:"is_super"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"60",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"dept_names",label:"部门","min-width":"166","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"post_names",label:"职位","min-width":"166","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"role_names",label:"角色","min-width":"166","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_super",label:"超管","min-width":"73",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.issuper([l.row])}},model:{value:l.row.is_super,callback:function(t){e.$set(l.row,"is_super",t)},expression:"scope.row.is_super"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"73",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"73",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"login_time",label:"登录时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"86"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text",title:"信息/修改"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text",title:"删除"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{model:e.model,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"头像",prop:"avatar_url"}},[t("el-col",{attrs:{span:12}},[e.model.avatar_url?t("el-avatar",{attrs:{shape:"circle",fit:"contain",size:100,src:e.model.avatar_url}}):t("el-avatar",{attrs:{icon:"el-icon-user-solid",size:100}})],1),t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload()}}},[e._v("上传头像")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("avatar")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[t("el-input",{key:"nickname",attrs:{placeholder:"请输入昵称（姓名）",clearable:""},model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{key:"username",attrs:{placeholder:"请输入账号（用户名）",clearable:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),""==e.model[e.idkey]?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{key:"password",attrs:{placeholder:"请输入密码",clearable:"","show-password":""},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1):e._e(),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录次数",prop:"login_ip"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_num,callback:function(t){e.$set(e.model,"login_num",t)},expression:"model.login_num"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录IP",prop:"login_ip"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_ip,callback:function(t){e.$set(e.model,"login_ip",t)},expression:"model.login_ip"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录地区",prop:"login_region"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_region,callback:function(t){e.$set(e.model,"login_region",t)},expression:"model.login_region"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"登录时间",prop:"login_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.login_time,callback:function(t){e.$set(e.model,"login_time",t)},expression:"model.login_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"退出时间",prop:"logout_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.logout_time,callback:function(t){e.$set(e.model,"logout_time",t)},expression:"model.logout_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"部门",prop:"dept_ids"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.deptData,props:e.deptProps,disabled:"",placeholder:""},model:{value:e.model.dept_ids,callback:function(t){e.$set(e.model,"dept_ids",t)},expression:"model.dept_ids"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"职位",prop:"post_ids"}},[t("el-cascader",{staticClass:"ya-width-100p",attrs:{options:e.postData,props:e.postProps,disabled:"",placeholder:""},model:{value:e.model.post_ids,callback:function(t){e.$set(e.model,"post_ids",t)},expression:"model.post_ids"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"角色",prop:"role_ids"}},[t("el-select",{staticClass:"ya-width-100p",attrs:{disabled:"",multiple:"",placeholder:""},model:{value:e.model.role_ids,callback:function(t){e.$set(e.model,"role_ids",t)},expression:"model.role_ids"}},e._l(e.roleData,(function(e){return t("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"菜单(权限)",prop:"menu_tree"}},[t("span",[t("el-checkbox",{attrs:{title:"展开/收起"},on:{change:e.menuExpandAllChange},model:{value:e.menuExpandAll,callback:function(t){e.menuExpandAll=t},expression:"menuExpandAll"}},[e._v("展开")])],1),t("el-tree",{ref:"menuRef",attrs:{data:e.model.menu_tree,props:e.menuProps,"node-key":"menu_id","default-checked-keys":e.model.menu_ids,"expand-on-click-node":!1,"highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label)),l.data.is_check?t("i",{staticClass:"el-icon-check",staticStyle:{color:"#1890ff"},attrs:{title:"已分配"}}):e._e()]),t("span",[l.data.is_role?t("i",{staticClass:"el-icon-s-custom",staticStyle:{"margin-left":"10px"},attrs:{title:"角色"}}):e._e(),l.data.menu_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.menu_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}],null,!1,481639775)})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:"上传头像",visible:e.fileDialog,top:"1vh",width:"80%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("3659"),r=l("ed08"),c=l("b775"),u="/admin/system.User/";function d(e){return Object(c["a"])({url:u+"list",method:"get",params:e})}function m(e){return Object(c["a"])({url:u+"info",method:"get",params:e})}function p(e){return Object(c["a"])({url:u+"add",method:"post",data:e})}function h(e){return Object(c["a"])({url:u+"edit",method:"post",data:e})}function f(e){return Object(c["a"])({url:u+"dele",method:"post",data:e})}function b(e){return Object(c["a"])({url:u+"editdept",method:"post",data:e})}function g(e){return Object(c["a"])({url:u+"editpost",method:"post",data:e})}function _(e){return Object(c["a"])({url:u+"editrole",method:"post",data:e})}function v(e){return Object(c["a"])({url:u+"repwd",method:"post",data:e})}function y(e){return Object(c["a"])({url:u+"super",method:"post",data:e})}function k(e){return Object(c["a"])({url:u+"disable",method:"post",data:e})}var w={name:"SystemUser",components:{Pagination:o["a"],FileManage:n["a"]},data:function(){return{name:"用户",height:680,loading:!1,idkey:"user_id",exps:[],query:{page:1,limit:12,search_field:"username",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{user_id:"",avatar_id:0,avatar_url:"",nickname:"",username:"",password:"",phone:"",email:"",remark:"",sort:250,login_ip:"",login_region:"",login_time:"",logout_time:"",create_time:"",update_time:"",dept_ids:[],post_ids:[],role_ids:[]},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",dept_ids:[],post_ids:[],role_ids:[],password:"",is_super:0,is_disable:0,deptData:[],deptProps:{checkStrictly:!0,value:"dept_id",label:"dept_name",multiple:!0,emitPath:!1},postData:[],postProps:{checkStrictly:!0,value:"post_id",label:"post_name",multiple:!0,emitPath:!1},roleData:[],menuProps:{label:"menu_name",children:"children"},menuExpandAll:!1,fileDialog:!1}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,d(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.deptData=t.data.dept,e.postData=t.data.post,e.roleData=t.data.role,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],m(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()),this.menuExpandAll=!1,this.fileDialog=!1},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(r["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","editdept"===e?this.selectTitle=this.name+"修改部门":"editpost"===e?this.selectTitle=this.name+"修改职位":"editrole"===e?this.selectTitle=this.name+"修改角色":"super"===e?this.selectTitle=this.name+"是否超管":"password"===e?this.selectTitle=this.name+"重置密码":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"editdept"===e?this.editdept(this.selection,!0):"editpost"===e?this.editpost(this.selection,!0):"editrole"===e?this.editrole(this.selection,!0):"super"===e?this.issuper(this.selection,!0):"password"===e?this.repwd(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},repwd:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){if(!this.password)return this.$message.error("请输入新密码"),!1;this.loading=!0;var i=e[0].password;l&&(i=this.password),v({ids:this.selectGetIds(e),password:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))}else this.selectAlert()},editdept:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e),dept_ids:this.dept_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editpost:function(e){var t=this;e.length?(this.loading=!0,g({ids:this.selectGetIds(e),post_ids:this.post_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editrole:function(e){var t=this;e.length?(this.loading=!0,_({ids:this.selectGetIds(e),role_ids:this.role_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},issuper:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_super;l&&(i=this.is_super),y({ids:this.selectGetIds(e),is_super:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),k({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?f({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()},menuExpandAllChange:function(){for(var e=this.menuExpandAll,t=this.$refs.menuRef.store._getAllNodes().length,l=0;l<t;l++)this.$refs.menuRef.store._getAllNodes()[l].expanded=e},fileUpload:function(){this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=e.length;if(t){var l=t-1;this.model.avatar_id=e[l]["file_id"],this.model.avatar_url=e[l]["file_url"]}},fileDelete:function(){this.model.avatar_id=0,this.model.avatar_url=""}}},x=w,S=l("2877"),$=Object(S["a"])(x,i,a,!1,null,null,null);t["default"]=$.exports},bb60:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ref",attrs:{rules:e.rules,model:e.model,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"password_old"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入旧密码",autocomplete:"off",clearable:"","show-password":""},model:{value:e.model.password_old,callback:function(t){e.$set(e.model,"password_old",t)},expression:"model.password_old"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"password_new"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入新密码",autocomplete:"off",clearable:"","show-password":""},model:{value:e.model.password_new,callback:function(t){e.$set(e.model,"password_new",t)},expression:"model.password_new"}})],1),t("el-form-item",{attrs:{label:"确认新密码",prop:"password_confirm"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码",autocomplete:"off",clearable:"","show-password":""},model:{value:e.model.password_confirm,callback:function(t){e.$set(e.model,"password_confirm",t)},expression:"model.password_confirm"}})],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},a=[],s=(l("d9e2"),l("98b1")),o=l("ebb5"),n={name:"SystemUserCenterPwd",components:{},data:function(){var e=this,t=function(t,l,i){l!==e.model.password_new?i(new Error("两次输入的新密码不一致")):i()};return{name:"修改密码",height:680,loading:!1,model:{password_old:"",password_new:"",password_confirm:""},rules:{password_old:[{required:!0,message:"请输入旧密码",trigger:"blur"}],password_new:[{required:!0,message:"请输入新密码",trigger:"blur"}],password_confirm:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.height=Object(s["a"])(180)},methods:{reset:function(){this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["d"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},bb8b:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"150px"}},[t("el-tabs",[t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"文件设置",lazy:""}},[t("el-form-item",{attrs:{label:"后台上传",prop:"is_upload_admin"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_upload_admin,callback:function(t){e.$set(e.model,"is_upload_admin",t)},expression:"model.is_upload_admin"}}),t("span",[e._v(" 后台文件上传是否开启")])],1),t("el-form-item",{attrs:{label:"前台上传",prop:"is_upload_api"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_upload_api,callback:function(t){e.$set(e.model,"is_upload_api",t)},expression:"model.is_upload_api"}}),t("span",[e._v(" 前台文件上传是否开启")])],1),t("el-form-item",{attrs:{label:"存储方式",prop:"storage"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.model.storage,callback:function(t){e.$set(e.model,"storage",t)},expression:"model.storage"}},e._l(e.storages,(function(l,i){return t("el-option",{key:i,attrs:{label:l,value:i},on:{change:e.storageChange}})})),1)],1),"local"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将存储在本地服务器，默认保存在 public/storage 目录，文件以散列 hash 命名。 "),t("br"),e._v(" 文件存储的目录需要有读写权限（777），有足够的存储空间。 ")])])],1)],1):"qiniu"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到七牛云 Kodo 存储，对象存储 > 空间管理 > 空间设置 > 访问控制, 设置为 公开空间。 "),t("br"),e._v(" 需要配置跨域访问 CORS 规则，设置：来源 Origin 为 *，允许 Methods 为 GET,POST，允许 Headers 为 *。 ")])])],1),t("el-form-item",{attrs:{label:"AccessKey",prop:"qiniu_access_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.qiniu_access_key,callback:function(t){e.$set(e.model,"qiniu_access_key",t)},expression:"model.qiniu_access_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.qiniu_access_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" AccessKey（AK）在 [ 七牛云 > 个人中心 > 密钥管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"SecretKey",prop:"qiniu_secret_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.qiniu_secret_key,callback:function(t){e.$set(e.model,"qiniu_secret_key",t)},expression:"model.qiniu_secret_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.qiniu_secret_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" SecretKey（SK）在 [ 七牛云 > 个人中心 > 密钥管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"空间名称",prop:"qiniu_bucket"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.qiniu_bucket,callback:function(t){e.$set(e.model,"qiniu_bucket",t)},expression:"model.qiniu_bucket"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.qiniu_bucket,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 空间名称 在 [ 七牛云 > 对象存储 > 空间管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"外链域名",prop:"qiniu_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.qiniu_domain,callback:function(t){e.$set(e.model,"qiniu_domain",t)},expression:"model.qiniu_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.qiniu_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 外链域名 在 [ 七牛云 > 对象存储 > 空间管理 > 域名设置 ] 设置和获取 ")])],1)],1):"aliyun"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到阿里云 OSS 存储，需要配置 OSS 公开访问及跨域策略。 "),t("br"),e._v(" 需要配置跨域访问 CORS 规则，设置：来源 Origin 为 *，允许 Methods 为 GET,POST，允许 Headers 为 *。 ")])])],1),t("el-form-item",{attrs:{label:"AccessKey ID",prop:"aliyun_access_key_id"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aliyun_access_key_id,callback:function(t){e.$set(e.model,"aliyun_access_key_id",t)},expression:"model.aliyun_access_key_id"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aliyun_access_key_id,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" AccessKey ID 在 [ 阿里云 > 个人中心 > AccessKey 管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"AccessKey Secret",prop:"aliyun_access_key_secret"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aliyun_access_key_secret,callback:function(t){e.$set(e.model,"aliyun_access_key_secret",t)},expression:"model.aliyun_access_key_secret"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aliyun_access_key_secret,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" AccessKey Secret 在 [ 阿里云 > 个人中心 > AccessKey 管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"Bucket名称",prop:"aliyun_bucket"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aliyun_bucket,callback:function(t){e.$set(e.model,"aliyun_bucket",t)},expression:"model.aliyun_bucket"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aliyun_bucket,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Bucket 名称 在 [ 阿里云 > 对象存储 > Bucket 列表 ] 获取 ")])],1),t("el-form-item",{attrs:{label:"Bucket域名",prop:"aliyun_bucket_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aliyun_bucket_domain,callback:function(t){e.$set(e.model,"aliyun_bucket_domain",t)},expression:"model.aliyun_bucket_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aliyun_bucket_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Bucket 域名 在 [ 阿里云 > 对象存储 > Bucket 列表 > Bucket 概览 ] 获取 ")])],1),t("el-form-item",{attrs:{label:"Endpoint地域节点",prop:"aliyun_endpoint"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aliyun_endpoint,callback:function(t){e.$set(e.model,"aliyun_endpoint",t)},expression:"model.aliyun_endpoint"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aliyun_endpoint,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Endpoint（地域节点） 在 [ 阿里云 > 对象存储 > Bucket 列表 > Bucket 概览 ] 获取 ")])],1)],1):"tencent"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到腾讯云 COS 存储，需要配置 COS 公有读私有写访问权限及跨域策略。 "),t("br"),e._v(" 需要配置跨域访问 CORS 规则，设置：来源 Origin 为 *，允许 Methods 为 GET,POST，允许 Headers 为 *。 ")])])],1),t("el-form-item",{attrs:{label:"SecretId",prop:"tencent_secret_id"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.tencent_secret_id,callback:function(t){e.$set(e.model,"tencent_secret_id",t)},expression:"model.tencent_secret_id"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.tencent_secret_id,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" SecretId 在 [ 腾讯云 > 个人中心 > 访问管理 > 访问密钥 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"SecretKey",prop:"tencent_secret_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.tencent_secret_key,callback:function(t){e.$set(e.model,"tencent_secret_key",t)},expression:"model.tencent_secret_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.tencent_secret_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" SecretKey 在 [ 腾讯云 > 个人中心 > 访问管理 > 访问密钥 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"存储桶名称",prop:"tencent_bucket"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.tencent_bucket,callback:function(t){e.$set(e.model,"tencent_bucket",t)},expression:"model.tencent_bucket"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.tencent_bucket,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 存储桶名称 在 [ 腾讯云 > 对象存储 > 存储桶列表 ] 获取 ")])],1),t("el-form-item",{attrs:{label:"所属地域",prop:"tencent_region"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.tencent_region,callback:function(t){e.$set(e.model,"tencent_region",t)},expression:"model.tencent_region"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.tencent_region,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 所属地域 在 [ 腾讯云 > 对象存储 > 存储桶列表 ] 获取。如：ap-guangzhou ")])],1),t("el-form-item",{attrs:{label:"访问域名",prop:"tencent_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.tencent_domain,callback:function(t){e.$set(e.model,"tencent_domain",t)},expression:"model.tencent_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.tencent_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 访问域名 在 [ 腾讯云 > 对象存储 > 存储桶列表 > 概览 ] 获取 ")])],1)],1):"baidu"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到百度云 BOS 存储，对象存储 > Bucket列表 > 配置设置 > Bucket权限配置, 设置为 公共 *。 "),t("br"),e._v(" 需要配置跨域访问 CORS 规则，设置：来源 Origin 为 *，允许 Methods 为 GET,POST，允许 Headers 为 *。 ")])])],1),t("el-form-item",{attrs:{label:"Access Key",prop:"baidu_access_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.baidu_access_key,callback:function(t){e.$set(e.model,"baidu_access_key",t)},expression:"model.baidu_access_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.baidu_access_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Access Key 在 [ 百度云 > 个人中心 > 安全认证 > Access Key ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"Secret Key",prop:"baidu_secret_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.baidu_secret_key,callback:function(t){e.$set(e.model,"baidu_secret_key",t)},expression:"model.baidu_secret_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.baidu_secret_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Secret Key 在 [ 百度云 > 个人中心 > 安全认证 > Access Key ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"Bucket名称",prop:"baidu_bucket"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.baidu_bucket,callback:function(t){e.$set(e.model,"baidu_bucket",t)},expression:"model.baidu_bucket"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.baidu_bucket,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Bucket 名称 在 [ 百度云 > 对象存储 > Bucket 列表 ] 获取。如：yyladmin ")])],1),t("el-form-item",{attrs:{label:"官方域名",prop:"baidu_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.baidu_domain,callback:function(t){e.$set(e.model,"baidu_domain",t)},expression:"model.baidu_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.baidu_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 官方域名 在 [ 百度云 > 对象存储 > 发布管理 ] 获取。如：yyladmin.gz.bcebos.com ")])],1),t("el-form-item",{attrs:{label:"所属地域",prop:"baidu_endpoint"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.baidu_endpoint,callback:function(t){e.$set(e.model,"baidu_endpoint",t)},expression:"model.baidu_endpoint"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.baidu_endpoint,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 所属地域：官方域名去掉 Bucket 名称，如：gz.bcebos.com ")])],1)],1):"upyun"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到又拍云 USS 存储，云存储 > 服务管理 > 配置 > CORS 跨域共享, 设置为 已开启。 "),t("br"),e._v(" 请根据业务域名和需求，配置 CORS 跨域共享 规则，CORS 配置。 ")])])],1),t("el-form-item",{attrs:{label:"服务名称",prop:"upyun_service_name"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.upyun_service_name,callback:function(t){e.$set(e.model,"upyun_service_name",t)},expression:"model.upyun_service_name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.upyun_service_name,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 服务名称 在 [ 又拍云 > 云存储 > 服务管理 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"操作员",prop:"upyun_operator_name"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.upyun_operator_name,callback:function(t){e.$set(e.model,"upyun_operator_name",t)},expression:"model.upyun_operator_name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.upyun_operator_name,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 操作员 在 [ 又拍云 > 云存储 > 服务管理 > 配置 > 存储管理-操作员授权 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"操作员密码",prop:"upyun_operator_pwd"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.upyun_operator_pwd,callback:function(t){e.$set(e.model,"upyun_operator_pwd",t)},expression:"model.upyun_operator_pwd"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.upyun_operator_pwd,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 操作员密码 在 [ 又拍云 > 云存储 > 服务管理 > 配置 > 存储管理-操作员授权 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"加速域名",prop:"upyun_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.upyun_domain,callback:function(t){e.$set(e.model,"upyun_domain",t)},expression:"model.upyun_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.upyun_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 加速域名 在 [ 又拍云 > 云存储 > 服务管理 > 配置 > 域名管理-加速域名 ] 设置和获取 ")])],1)],1):"aws"==e.model.storage?t("div",[t("el-form-item",{attrs:{label:""}},[t("el-card",[t("div",[e._v(" 文件将上传到 AWS S3。 "),t("br"),e._v(" 请根据业务域名和需求，配置 AWS S3 访问控制。 ")])])],1),t("el-form-item",{attrs:{label:"Access Key ID",prop:"aws_access_key_id"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aws_access_key_id,callback:function(t){e.$set(e.model,"aws_access_key_id",t)},expression:"model.aws_access_key_id"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aws_access_key_id,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Access Key ID 在 [ AWS > 我的账号 > 安全凭证 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"Secret Access KEY",prop:"aws_secret_access_key"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aws_secret_access_key,callback:function(t){e.$set(e.model,"aws_secret_access_key",t)},expression:"model.aws_secret_access_key"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aws_secret_access_key,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" Secret Access KEY 在 [ AWS > 我的账号 > 安全凭证 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"区域终端节点",prop:"aws_region"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aws_region,callback:function(t){e.$set(e.model,"aws_region",t)},expression:"model.aws_region"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aws_region,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 区域终端节点 在 [ AWS > S3 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"存储桶名称",prop:"aws_bucket"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aws_bucket,callback:function(t){e.$set(e.model,"aws_bucket",t)},expression:"model.aws_bucket"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aws_bucket,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 存储桶名称 在 [ AWS > S3 ] 设置和获取 ")])],1),t("el-form-item",{attrs:{label:"访问域名",prop:"aws_domain"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.aws_domain,callback:function(t){e.$set(e.model,"aws_domain",t)},expression:"model.aws_domain"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy"},on:{click:function(t){return e.copy(e.model.aws_domain,t)}},slot:"append"})],1)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 访问域名 在 [ AWS > S3 ] 设置和获取 ")])],1)],1):e._e()],1),t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"文件限制",lazy:""}},[t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"图片格式",prop:"image_ext"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.image_ext,callback:function(t){e.$set(e.model,"image_ext",t)},expression:"model.image_ext"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的图片后缀，逗号,隔开 ")])],1),t("el-form-item",{attrs:{label:"图片大小",prop:"image_size"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.image_size,callback:function(t){e.$set(e.model,"image_size",t)},expression:"model.image_size"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的图片大小，单位 MB ")])],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"视频格式",prop:"video_ext"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.video_ext,callback:function(t){e.$set(e.model,"video_ext",t)},expression:"model.video_ext"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的视频后缀，逗号,隔开 ")])],1),t("el-form-item",{attrs:{label:"视频大小",prop:"video_size"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.video_size,callback:function(t){e.$set(e.model,"video_size",t)},expression:"model.video_size"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的视频大小，单位 MB ")])],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"音频格式",prop:"audio_ext"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.audio_ext,callback:function(t){e.$set(e.model,"audio_ext",t)},expression:"model.audio_ext"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的音频后缀，逗号,隔开 ")])],1),t("el-form-item",{attrs:{label:"音频大小",prop:"audio_size"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.audio_size,callback:function(t){e.$set(e.model,"audio_size",t)},expression:"model.audio_size"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的音频大小，单位 MB ")])],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"文档格式",prop:"word_ext"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.word_ext,callback:function(t){e.$set(e.model,"word_ext",t)},expression:"model.word_ext"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的文档后缀，逗号,隔开 ")])],1),t("el-form-item",{attrs:{label:"文档大小",prop:"word_size"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.word_size,callback:function(t){e.$set(e.model,"word_size",t)},expression:"model.word_size"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的文档大小，单位 MB ")])],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"其它格式",prop:"other_ext"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{clearable:""},model:{value:e.model.other_ext,callback:function(t){e.$set(e.model,"other_ext",t)},expression:"model.other_ext"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的其它文件后缀，逗号,隔开 ")])],1),t("el-form-item",{attrs:{label:"其它大小",prop:"other_size"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.other_size,callback:function(t){e.$set(e.model,"other_size",t)},expression:"model.other_size"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传的其它文件大小，单位 MB ")])],1),t("el-form-item",{staticClass:"ya-margin-bottom",attrs:{label:"最大上传个数",prop:"limit_max"}},[t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.limit_max,callback:function(t){e.$set(e.model,"limit_max",t)},expression:"model.limit_max"}})],1),t("el-col",{staticClass:"line",attrs:{span:13}},[e._v(" 允许上传最大文件个数（每次最多选择） ")])],1)],1)],1)],1),t("el-form",{attrs:{"label-width":"150px"}},[t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("e350"),n=l("f71e"),r=l("b775"),c="/admin/file.Setting/";function u(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}var m={name:"FileSetting",components:{},data:function(){return{name:"文件设置",height:680,loading:!1,storages:[],model:{is_upload_admin:1,is_upload_api:1,storage:"local",qiniu_access_key:"",qiniu_secret_key:"",qiniu_bucket:"",qiniu_domain:"",aliyun_access_key_id:"",aliyun_access_key_secret:"",aliyun_bucket:"",aliyun_bucket_domain:"",aliyun_endpoint:"",tencent_secret_id:"",tencent_secret_key:"",tencent_bucket:"",tencent_region:"",tencent_domain:"",baidu_access_key:"",baidu_secret_key:"",baidu_bucket:"",baidu_endpoint:"",baidu_domain:"",upyun_service_name:"",upyun_operator_name:"",upyun_operator_pwd:"",upyun_domain:"",aws_access_key_id:"",aws_secret_access_key:"",aws_bucket:"",aws_region:"",aws_domain:"",image_ext:"",image_size:0,video_ext:"",video_size:0,audio_ext:"",audio_size:0,word_ext:"",word_size:0,other_ext:"",other_size:0},rules:{storage:[{required:!0,message:"请选择存储方式",trigger:"blur"}],qiniu_access_key:[{required:!0,message:"请输入 AccessKey",trigger:"blur"}],qiniu_secret_key:[{required:!0,message:"请输入 SecretKey",trigger:"blur"}],qiniu_bucket:[{required:!0,message:"请输入空间名称",trigger:"blur"}],qiniu_domain:[{required:!0,message:"请输入外链域名",trigger:"blur"}],aliyun_access_key_id:[{required:!0,message:"请输入 AccessKey ID",trigger:"blur"}],aliyun_access_key_secret:[{required:!0,message:"请输入 AccessKey Secret",trigger:"blur"}],aliyun_bucket:[{required:!0,message:"请输入 Bucket 名称",trigger:"blur"}],aliyun_bucket_domain:[{required:!0,message:"请输入 Bucket 域名",trigger:"blur"}],aliyun_endpoint:[{required:!0,message:"请输入 Endpoint 地域节点",trigger:"blur"}],tencent_secret_id:[{required:!0,message:"请输入 SecretId",trigger:"blur"}],tencent_secret_key:[{required:!0,message:"请输入 SecretKey",trigger:"blur"}],tencent_bucket:[{required:!0,message:"请输入存储桶名称",trigger:"blur"}],tencent_region:[{required:!0,message:"请输入所属地域",trigger:"blur"}],tencent_domain:[{required:!0,message:"请输入访问域名",trigger:"blur"}],baidu_access_key:[{required:!0,message:"请输入 Access Key",trigger:"blur"}],baidu_secret_key:[{required:!0,message:"请输入 Secret Key",trigger:"blur"}],baidu_bucket:[{required:!0,message:"请输入 Bucket 名称",trigger:"blur"}],baidu_endpoint:[{required:!0,message:"请输入官方域名",trigger:"blur"}],baidu_domain:[{required:!0,message:"请输入所属地域",trigger:"blur"}],upyun_service_name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],upyun_operator_name:[{required:!0,message:"请输入操作员",trigger:"blur"}],upyun_operator_pwd:[{required:!0,message:"请输入操作员密码",trigger:"blur"}],upyun_domain:[{required:!0,message:"请输入加速域名",trigger:"blur"}],aws_access_key_id:[{required:!0,message:"请输入 Access Key ID",trigger:"blur"}],aws_secret_access_key:[{required:!0,message:"请输入 Secret Access Key",trigger:"blur"}],aws_bucket:[{required:!0,message:"请输入存储桶名称",trigger:"blur"}],aws_region:[{required:!0,message:"请输入区域终端节点",trigger:"blur"}],aws_domain:[{required:!0,message:"请输入访问域名",trigger:"blur"}]}}},created:function(){this.height=Object(s["a"])(270),this.info()},methods:{checkPermission:o["a"],info:function(){var e=this;u().then((function(t){e.model=t.data.setting,e.storages=t.data.storage}))},refresh:function(){var e=this;this.loading=!0,u().then((function(t){e.model=t.data.setting,e.storages=t.data.storage,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,d(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},storageChange:function(){void 0!==this.$refs["ref"]&&this.$refs["ref"].clearValidate()},copy:function(e,t){Object(n["a"])(e,t)}}},p=m,h=(l("ce75"),l("2877")),f=Object(h["a"])(p,i,a,!1,null,"24283500",null);t["default"]=f.exports},c03c:function(e,t,l){"use strict";l("d5ad")},c3a4:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("file-manage")},a=[],s=l("3659"),o={name:"FileFile",components:{FileManage:s["a"]},data:function(){return{name:"文件管理"}},watch:{},created:function(){},methods:{}},n=o,r=l("2877"),c=Object(r["a"])(n,i,a,!1,null,null,null);t["default"]=c.exports},ca2b:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"group_name",label:"名称"}}),t("el-option",{attrs:{value:"group_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"搜索文件",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除文件"},on:{click:function(t){return e.selectOpen("removef")}}},[e._v("文件")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removef"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的文件吗？")])]):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"group_name",label:"名称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_desc",label:"描述","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.fileShow(l.row)}}},[e._v("文件")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"group_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.group_name,callback:function(t){e.$set(e.model,"group_name",t)},expression:"model.group_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"group_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.group_desc,callback:function(t){e.$set(e.model,"group_desc",t)},expression:"model.group_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileDialogTitle,visible:e.fileDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.fileSelectOpen("fileRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.fileSelectTitle,visible:e.fileSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.fileSelectDialog=t}}},[t("el-form",{ref:"fileSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.fileName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.fileSelectIds,callback:function(t){e.fileSelectIds=t},expression:"fileSelectIds"}})],1),"fileRemove"===e.fileSelectType?t("el-form-item",{attrs:{label:"分组ID",prop:""}},[t("span",[e._v(e._s(e.fileQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.fileSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.fileSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoad,expression:"fileLoad"}],ref:"fileRef",attrs:{data:e.fileData,height:e.height-20},on:{"sort-change":e.fileSort,"selection-change":e.fileSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.filePk,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_url",label:"文件","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.file_url?t("div",{staticStyle:{height:"30px"}},["image"===l.row.file_type?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.file_url,"preview-src-list":[l.row.file_url],title:"点击看大图"}}):"video"===l.row.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.row.file_url,height:"100%"}},[t("embed",{attrs:{src:l.row.file_url,height:"100%"}})])]):"audio"===l.row.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.row.file_url,height:"100%"}})]):"word"===l.row.file_type?t("div",[t("i",{staticClass:"el-icon-document"})]):t("div",{staticClass:"image-slot"},[t("i",{staticClass:"el-icon-folder"})])],1):e._e()]}}])}),t("el-table-column",{attrs:{prop:"file_type_name",label:"类型","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_name",label:"名称","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"file_ext",label:"后缀","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_size",label:"大小","min-width":"85",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_name",label:"分组","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.fileSelectOpen("fileRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.fileCount>0,expression:"fileCount>0"}],attrs:{total:e.fileCount,page:e.fileQuery.page,limit:e.fileQuery.limit},on:{"update:page":function(t){return e.$set(e.fileQuery,"page",t)},"update:limit":function(t){return e.$set(e.fileQuery,"limit",t)},pagination:e.file}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("0532"),c={name:"FileGroup",components:{Pagination:o["a"]},data:function(){return{name:"文件分组",height:680,loading:!1,idkey:"group_id",exps:[],query:{page:1,limit:12,search_field:"group_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{group_id:"",group_name:"",group_desc:"",sort:250},rules:{group_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,filePk:"file_id",fileName:"文件",fileDialog:!1,fileDialogTitle:"",fileLoad:!1,fileData:[],fileCount:0,fileQuery:{page:1,limit:12},fileSelection:[],fileSelectIds:"",fileSelectTitle:"选中操作",fileSelectDialog:!1,fileSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,Object(r["h"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],Object(r["g"])(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?Object(r["d"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(r["a"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removef"===e?this.selectTitle=this.name+"解除文件":"disable"===e?this.selectTitle=this.name+"禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removef"===e?this.removef(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection,!0),this.selectDialog=!1}else this.selectAlert()},removef:function(e){var t=this;e.length?(this.loading=!0,Object(r["f"])({group_id:this.selectGetIds(e),file_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),Object(r["c"])({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,Object(r["b"])({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},fileShow:function(e){this.fileDialog=!0,this.fileDialogTitle=this.name+"文件："+e.group_name,this.fileQuery.group_id=e.group_id,this.file()},file:function(){var e=this;this.fileLoad=!0,Object(r["e"])(this.fileQuery).then((function(t){e.fileData=t.data.list,e.fileCount=t.data.count,e.fileLoad=!1})).catch((function(){e.fileLoad=!1}))},fileSort:function(e){this.fileQuery.sort_field=e.prop,this.fileQuery.sort_value="","ascending"===e.order&&(this.fileQuery.sort_value="asc",this.file()),"descending"===e.order&&(this.fileQuery.sort_value="desc",this.file())},fileSelect:function(e){this.fileSelection=e,this.fileSelectIds=this.fileSelectGetIds(e).toString()},fileSelectGetIds:function(e){return Object(n["a"])(e,this.filePk)},fileSelectAlert:function(){this.$alert("请选择需要操作的"+this.fileName,"提示",{type:"warning",callback:function(e){}})},fileSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["fileRef"].clearSelection(),this.$refs["fileRef"].toggleRowSelection(t)),this.fileSelection.length?(this.fileSelectTitle="选中操作","fileRemove"===e&&(this.fileSelectTitle="解除分组"),this.fileSelectDialog=!0,this.fileSelectType=e):this.fileSelectAlert()},fileSelectCancel:function(){this.fileSelectDialog=!1},fileSelectSubmit:function(){if(this.fileSelection.length){var e=this.fileSelectType;"fileRemove"===e&&this.fileRemove(this.fileSelection),this.fileSelectDialog=!1}else this.fileSelectAlert()},fileRemove:function(e){var t=this;e.length?(this.fileLoad=!0,Object(r["f"])({group_id:this.fileQuery.group_id,file_ids:this.fileSelectGetIds(e)}).then((function(e){t.file(),t.$message.success(e.msg)})).catch((function(){t.fileLoad=!1}))):this.fileSelectAlert()}}},u=c,d=l("2877"),m=Object(d["a"])(u,i,a,!1,null,"a0a5b774",null);t["default"]=m.exports},cc54:function(e,t,l){},cda6:function(e,t,l){},ce75:function(e,t,l){"use strict";l("cf4b")},cf49:function(e,t,l){e.exports=l.p+"static/img/default.6b914f9c.jpg"},cf4b:function(e,t,l){},d05f:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"type",label:"类型"}}),t("el-option",{attrs:{value:"title",label:"标题"}}),t("el-option",{attrs:{value:"phone",label:"手机"}}),t("el-option",{attrs:{value:"email",label:"邮箱"}}),t("el-option",{attrs:{value:"is_unread",label:"未读"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_unread"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"未读"}}),t("el-option",{attrs:{value:0,label:"已读"}})],1):"type"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},e._l(e.types,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}}),t("el-option",{attrs:{value:"read_time",label:"阅读时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"未读"},on:{click:function(t){return e.selectOpen("unread")}}},[e._v("未读")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"unread"===e.selectType?t("el-form-item",{attrs:{label:"是否未读",prop:""}},[t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.is_unread,callback:function(t){e.is_unread=t},expression:"is_unread"}},[t("el-option",{attrs:{value:1,label:"未读"}}),t("el-option",{attrs:{value:0,label:"已读"}})],1)],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"type_name",label:"类型","min-width":"80"}}),t("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"phone",label:"手机","min-width":"120"}}),t("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_unread",label:"未读","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.unread([l.row])}},model:{value:l.row.is_unread,callback:function(t){e.$set(l.row,"is_unread",t)},expression:"scope.row.is_unread"}})]}}])}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text",title:"修改"},on:{click:function(t){return e.edit(l.row)}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},e._l(e.types,(function(e,l){return t("el-option",{key:l,attrs:{label:e,value:l}})})),1)],1),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",clearable:"",autosize:{minRows:5,maxRows:20}},model:{value:e.model.content,callback:function(t){e.$set(e.model,"content",t)},expression:"model.content"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"images"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","images","上传图片")}}},[e._v("上传图片")])],1),t("el-col",{attrs:{span:12}},[t("div",[e._v("图片小于 200 KB，jpg、png格式。")])])],1),t("el-row",e._l(e.model.images,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:l.file_url,"preview-src-list":[l.file_url],title:"点击看大图"}}),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"images")}}})],1)],1)})),1)],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"阅读时间",prop:"read_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.read_time,callback:function(t){e.$set(e.model,"read_time",t)},expression:"model.read_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("14d9"),l("a434"),l("98b1")),o=l("333d"),n=l("3659"),r=l("f71e"),c=l("ed08"),u=l("b775"),d="/admin/setting.Feedback/";function m(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function f(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"unread",method:"post",data:e})}var _={name:"SettingFeedback",components:{Pagination:o["a"],FileManage:n["a"]},directives:{},data:function(){return{name:"反馈",height:680,loading:!1,idkey:"feedback_id",exps:[],query:{page:1,limit:12,search_field:"title",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{feedback_id:"",type:0,title:"",content:"",images:[],phone:"",email:"",remark:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},types:[],selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_unread:0,fileDialog:!1,fileTitle:"文件管理",fileType:"image",fileField:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,m(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.types=t.data.types,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],p(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","unread"===e?this.selectTitle=this.name+"未读":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"unread"===e?this.unread(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},unread:function(e,t){var l=this;if(e.length){this.loading=!0;var i=e[0].is_unread;t&&(i=this.is_unread),g({ids:this.selectGetIds(e),is_unread:i}).then((function(e){l.list(),l.$message.success(e.msg)})).catch((function(){l.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"文件管理";this.fileType=e,this.fileField=t,this.fileTitle=l,this.fileDialog=!0},fileCancel:function(){this.fileType="image",this.fileField="",this.fileTitle="文件管理",this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l)for(var i=0;i<l;i++)"images"===t&&this.model.images.push(e[i])},fileRemoval:function(e,t,l){var i=this.model[t].length,a=e;if("left"===l){if(e<=0)return!1;--a}else{if(e>=i-1)return!1;++a}var s=this.model[t][e],o=this.model[t][a];this.model[t][e]=o,this.model[t][a]=s,this.$forceUpdate()},fileDownload:function(e,t){Object(r["a"])(e.file_name,t,"文件名复制成功"),setTimeout((function(){window.open(e.file_url,"_blank")}),500)},fileDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"images"===t&&this.model.images.splice(e,1)}}},v=_,y=(l("77e8"),l("2877")),k=Object(y["a"])(v,i,a,!1,null,"3766f62a",null);t["default"]=k.exports},d344:function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[t("el-row",{attrs:{gutter:6}},e._l(e.count,(function(l,i){return t("el-col",{key:i,attrs:{span:3}},[t("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"10px 0px 0px 0px"}}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(l.name))])]),t("div",{staticClass:"text"},[t("el-row",{staticStyle:{"padding-bottom":"10px"}},[t("el-col",{attrs:{title:l.title}},[e._v(" "+e._s(l.count)+" ")])],1)],1)])],1)})),1)],1),e._l(e.echart_num,(function(l,i){return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:i,staticClass:"box-card ya-margin-top"},[t("el-row",{staticStyle:{"text-align":"center"}},[t("el-col",[t("el-select",{staticClass:"filter-item",on:{change:e.typeChange},model:{value:e.date_type,callback:function(t){e.date_type=t},expression:"date_type"}},[t("el-option",{attrs:{label:"日",value:"day"}}),t("el-option",{attrs:{label:"月",value:"month"}})],1),t("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"350px"},attrs:{type:e.date_ptype,"value-format":e.date_format,"picker-options":e.date_options,"start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dateChange},model:{value:e.date_range,callback:function(t){e.date_range=t},expression:"date_range"}})],1),t("el-col",[t("div",{style:{height:e.height-300+"px"},attrs:{id:e.echart_id+i}})])],1)],1)}))],2)])},a=[],s=l("98b1"),o=l("69f9"),n=l("22b4"),r=l("1be7"),c=l("3620"),u=l("4cb5"),d=l("9394"),m=l("ff32"),p=l("4b2a"),h=l("2da7"),f=l("3094"),b=l("f95e");n["a"]([c["a"],u["a"],d["a"],m["a"],p["a"],h["a"],f["a"],b["a"]]);var g={name:"MemberStatistic",components:{},directives:{},data:function(){return{name:"会员统计",height:680,loading:!1,count:[],echart_id:"echartid",echart_num:1,echart_data:[],date_type:"day",date_range:[],date_options:{},date_ptype:"monthrange",date_format:"yyyy-MM",picker_options_day:{shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-5184e5),e.$emit("pick",[l,t])}},{text:"最近30天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-25056e5),e.$emit("pick",[l,t])}},{text:"最近90天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-76896e5),e.$emit("pick",[l,t])}},{text:"最近120天",onClick:function(e){var t=new Date,l=new Date;l.setTime(l.getTime()-102816e5),e.$emit("pick",[l,t])}}]},picker_options_month:{shortcuts:[{text:"最近3个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-2),e.$emit("pick",[l,t])}},{text:"最近6个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-5),e.$emit("pick",[l,t])}},{text:"最近9个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-8),e.$emit("pick",[l,t])}},{text:"最近12个月",onClick:function(e){var t=new Date,l=new Date;l.setMonth(l.getMonth()-11),e.$emit("pick",[l,t])}}]}}},computed:{},watch:{echart_data:function(){var e=this;this.$nextTick((function(){e.setEchart()}))}},created:function(){this.height=Object(s["a"])(120),this.statistic()},mounted:function(){},methods:{statistic:function(){var e=this;this.loading=!0,Object(o["m"])({type:this.date_type,date:this.date_range}).then((function(t){e.count=t.data.count,e.echart_data=t.data.echart,e.echart_num=t.data.echart.length,e.dateOptions(),e.loading=!1})).catch((function(){e.loading=!1}))},typeChange:function(){this.dateOptions(),this.date_range=[]},dateOptions:function(){var e=this.date_type;"day"===e?(this.date_ptype="daterange",this.date_format="yyyy-MM-dd",this.date_options=this.picker_options_day):"month"===e&&(this.date_ptype="monthrange",this.date_format="yyyy-MM",this.date_options=this.picker_options_month)},dateChange:function(){this.statistic()},setEchart:function(){for(var e=this.echart_data,t=this.echart_num,l=this.echart_id,i=0;i<t;i++)this.initEchart(e[i],l+i),this.date_type=e[i].type,this.date_range=e[i].date},initEchart:function(e,t){var l=r["b"](document.getElementById(t)),i={title:{text:e.title,textStyle:{fontSize:12}},legend:{top:"20px",data:e.legend,selected:{"会员总数":!1}},grid:{top:"80px",left:"1%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.xAxis},yAxis:{type:"value"},tooltip:{trigger:"axis",textStyle:{align:"left"}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},dataView:{show:!0,readOnly:!0},saveAsImage:{show:!0,name:this.name+e.date[0]+"-"+e.date[1]}}},series:e.series};l.setOption(i)}}},_=g,v=(l("6b94"),l("2877")),y=Object(v["a"])(_,i,a,!1,null,"41be750b",null);t["default"]=y.exports},d5ad:function(e,t,l){},d9af:function(e,t,l){"use strict";l("8182")},daea:function(e,t,l){},dbe5:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-tabs",[e.checkPermission(["admin/setting.Wechat/offiInfo"])?t("el-tab-pane",{attrs:{label:"公众号",lazy:""}},[t("wechat-offi")],1):e._e(),e.checkPermission(["admin/setting.Wechat/miniInfo"])?t("el-tab-pane",{attrs:{label:"小程序",lazy:""}},[t("wechat-mini")],1):e._e()],1)],1)},a=[],s=l("e350"),o=l("9401"),n=l("889d"),r={name:"SettingWechat",components:{WechatOffi:o["default"],WechatMini:n["default"]},data:function(){return{name:"微信设置"}},created:function(){},methods:{checkPermission:s["a"]}},c=r,u=l("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},dd85:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"Token密钥",prop:"token_key"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.token_key,callback:function(t){e.$set(e.model,"token_key",t)},expression:"model.token_key"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 修改后会员登录状态失效，需重新登录。 ")])],1),t("el-form-item",{attrs:{label:"Token有效时间",prop:"token_exp"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.token_exp,callback:function(t){e.$set(e.model,"token_exp",t)},expression:"model.token_exp"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 小时，登录后超过此时间，需重新登录。 ")])],1),t("el-form-item",{attrs:{label:"多端登录",prop:"is_multi_login"}},[t("el-col",{attrs:{span:8}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_multi_login,callback:function(t){e.$set(e.model,"is_multi_login",t)},expression:"model.is_multi_login"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 开启后可以在多个设备同时登录。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("4f49"),n={name:"MemberSettingToken",components:{},data:function(){return{name:"Token设置",height:680,loading:!1,model:{token_key:"",token_exp:720,is_multi_login:0},rules:{token_key:[{required:!0,message:"请输入Token密钥",trigger:"blur"}]}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["l"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["l"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["k"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},ddf0:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-tabs",[e.checkPermission(["admin/system.UserCenter/info"])?t("el-tab-pane",{attrs:{label:"我的信息",lazy:""}},[t("user-center-info")],1):e._e(),e.checkPermission(["admin/system.UserCenter/edit"])?t("el-tab-pane",{attrs:{label:"修改信息",lazy:""}},[t("user-center-edit")],1):e._e(),e.checkPermission(["admin/system.UserCenter/pwd"])?t("el-tab-pane",{attrs:{label:"修改密码",lazy:""}},[t("user-center-pwd")],1):e._e(),e.checkPermission(["admin/system.UserCenter/log"])?t("el-tab-pane",{attrs:{label:"我的日志",lazy:""}},[t("user-center-log")],1):e._e(),e.checkPermission(["admin/system.UserCenter/setting"])?t("el-tab-pane",{attrs:{label:"我的设置",lazy:""}},[t("user-center-setting")],1):e._e()],1)],1)},a=[],s=l("e350"),o=l("ebdc"),n=l("a05d"),r=l("bb60"),c=l("3a09"),u=l("50da"),d={name:"SystemUserCenter",components:{UserCenterInfo:o["default"],UserCenterEdit:n["default"],UserCenterPwd:r["default"],UserCenterLog:c["default"],UserCenterSetting:u["default"]},data:function(){return{name:"个人中心"}},methods:{checkPermission:s["a"]}},m=d,p=l("2877"),h=Object(p["a"])(m,i,a,!1,null,null,null);t["default"]=h.exports},e0df:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("a4d3"),l("e01a");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-tabs",[t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"设置管理",name:""}},[t("el-form-item",{attrs:{label:"反馈管理",prop:"is_feedback"}},[t("el-col",{attrs:{span:3}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.model.is_feedback,callback:function(t){e.$set(e.model,"is_feedback",t)},expression:"model.is_feedback"}})],1),t("el-col",{attrs:{span:21}},[t("span",[e._v("反馈是否开启。关闭后无法提交反馈。")])])],1),t("el-form-item",{attrs:{label:"自定义设置"}},[t("el-col",{attrs:{span:3}},[e._v(" 键名 ")]),t("el-col",{attrs:{span:5}},[e._v(" 键值 ")]),t("el-col",{attrs:{span:6}},[e._v(" 说明 ")]),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("增加")])],1)],1),e._l(e.model.diy_config,(function(l,i){return t("el-form-item",{key:i,attrs:{label:""}},[t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键名"},model:{value:l.config_key,callback:function(t){e.$set(l,"config_key",t)},expression:"item.config_key"}})],1),t("el-col",{attrs:{span:5}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键值"},model:{value:l.config_val,callback:function(t){e.$set(l,"config_val",t)},expression:"item.config_val"}})],1),t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入说明"},model:{value:l.config_desc,callback:function(t){e.$set(l,"config_desc",t)},expression:"item.config_desc"}})],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dele(i)}}},[e._v("删除")])],1)],1)}))],2),t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"基本信息",name:""}},[t("el-form-item",{attrs:{label:"favicon",prop:"favicon_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.favicon_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.favicon_url,"preview-src-list":[e.model.favicon_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("favicon","上传favicon")}}},[e._v("上传favicon")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("favicon")}}},[e._v("删除")]),t("p",[e._v("图片小于 50 KB，jpg、png、ico格式，128 x 128。")])],1)],1),t("el-form-item",{attrs:{label:"logo",prop:"logo_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.logo_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.logo_url,"preview-src-list":[e.model.logo_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("logo","上传logo")}}},[e._v("上传logo")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("logo")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"name",clearable:""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1)],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"title",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1)],1),t("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"keywords",clearable:""},model:{value:e.model.keywords,callback:function(t){e.$set(e.model,"keywords",t)},expression:"model.keywords"}})],1)],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{type:"textarea",placeholder:"description",autosize:{minRows:2,maxRows:20}},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1)],1),t("el-form-item",{attrs:{label:"备案号",prop:"icp"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"icp",clearable:""},model:{value:e.model.icp,callback:function(t){e.$set(e.model,"icp",t)},expression:"model.icp"}})],1)],1),t("el-form-item",{attrs:{label:"版权",prop:"copyright"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"copyright",clearable:""},model:{value:e.model.copyright,callback:function(t){e.$set(e.model,"copyright",t)},expression:"model.copyright"}})],1)],1)],1),t("el-tab-pane",{staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{label:"联系信息",name:""}},[t("el-form-item",{attrs:{label:"公众号",prop:"offi_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.offi_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.offi_url,"preview-src-list":[e.model.offi_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("offi","上传公众号码")}}},[e._v("上传公众号码")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("offi")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"小程序",prop:"mini_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:6}},[e.model.mini_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.mini_url,"preview-src-list":[e.model.mini_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("mini","上传小程序码")}}},[e._v("上传小程序码")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete("mini")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"address",clearable:""},model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1),t("el-form-item",{attrs:{label:"电话",prop:"tel"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"tel",clearable:""},model:{value:e.model.tel,callback:function(t){e.$set(e.model,"tel",t)},expression:"model.tel"}})],1)],1),t("el-form-item",{attrs:{label:"传真",prop:"fax"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"fax",clearable:""},model:{value:e.model.fax,callback:function(t){e.$set(e.model,"fax",t)},expression:"model.fax"}})],1)],1),t("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"mobile",clearable:""},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}})],1)],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"email",clearable:""},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1)],1),t("el-form-item",{attrs:{label:"微信",prop:"wechat"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"wechat",clearable:""},model:{value:e.model.wechat,callback:function(t){e.$set(e.model,"wechat",t)},expression:"model.wechat"}})],1)],1),t("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[t("el-col",{attrs:{span:12}},[t("el-input",{attrs:{placeholder:"qq",clearable:""},model:{value:e.model.qq,callback:function(t){e.$set(e.model,"qq",t)},expression:"model.qq"}})],1)],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":"image"},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1)],1)},a=[],s=(l("14d9"),l("a434"),l("98b1")),o=l("3659"),n=l("b775"),r="/admin/setting.Setting/";function c(e){return Object(n["a"])({url:r+"info",method:"get",params:e})}function u(e){return Object(n["a"])({url:r+"edit",method:"post",data:e})}var d={name:"SettingSetting",components:{FileManage:o["a"]},data:function(){return{name:"设置管理",height:680,loading:!1,model:{setting_id:"",favicon_id:0,favicon_url:"",logo_id:0,logo_url:"",name:"",title:"",keywords:"",description:"",icp:"",copyright:"",offi_id:0,offi_url:"",mini_id:0,mini_url:"",address:"",tel:"",fax:"",mobile:"",email:"",qq:"",wechat:"",is_feedback:1,diy_config:[]},rules:{},fileDialog:!1,fileField:"logo",fileTitle:"文件管理"}},created:function(){this.height=Object(s["a"])(270),this.info()},methods:{info:function(){var e=this;c().then((function(t){e.model=t.data}))},add:function(){this.model.diy_config.push({config_key:"",config_val:"",config_desc:""})},dele:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.diy_config.splice(e,1)})).catch((function(){}))},refresh:function(){var e=this;this.loading=!0,c().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t?(e.loading=!0,u(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请完善必填项*")}))},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.fileField=e,this.fileTitle=t,this.fileDialog=!0},fileCancel:function(){this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l){var i=l-1;"favicon"===t?(this.model.favicon_id=e[i]["file_id"],this.model.favicon_url=e[i]["file_url"]):"logo"===t?(this.model.logo_id=e[i]["file_id"],this.model.logo_url=e[i]["file_url"]):"offi"===t?(this.model.offi_id=e[i]["file_id"],this.model.offi_url=e[i]["file_url"]):"mini"===t&&(this.model.mini_id=e[i]["file_id"],this.model.mini_url=e[i]["file_url"])}},fileDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"favicon"===e?(this.model.favicon_id=0,this.model.favicon_url=""):"logo"===e?(this.model.logo_id=0,this.model.logo_url=""):"offi"===e?(this.model.offi_id=0,this.model.offi_url=""):"mini"===e&&(this.model.mini_id=0,this.model.mini_url="")}}},m=d,p=l("2877"),h=Object(p["a"])(m,i,a,!1,null,"92a97636",null);t["default"]=h.exports},e521:function(e,t,l){"use strict";l.r(t);l("b0c0");var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",[t("el-col",[t("span",[e._v(e._s(e.name))])]),t("el-col",[t("div",{staticStyle:{height:"500px",width:"100%"},attrs:{id:"echartIndexContent"}})])],1)],1)},a=[],s=l("22b4"),o=l("1be7"),n=l("4cb5"),r=l("9394"),c=l("2da7"),u=l("4b2a"),d=l("f95e"),m=l("072e");s["a"]([n["a"],r["a"],c["a"],u["a"],d["a"]]);var p={name:"SystemIndexContent",components:{},data:function(){return{name:"内容统计",loading:!1}},computed:{},created:function(){this.content()},mounted:function(){},methods:{content:function(){var e=this;this.loading=!0,Object(m["a"])().then((function(t){e.echartIndexContent(t.data),e.loading=!1})).catch((function(){e.loading=!1}))},echartIndexContent:function(e){var t=o["b"](document.getElementById("echartIndexContent")),l={title:{subtext:"分类："+e.category+"，内容："+e.content,left:"center"},tooltip:{trigger:"axis"},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e.x_data},yAxis:{type:"value"},series:[{data:e.s_data,type:"bar",label:{show:!0,position:"top"}}]};t.setOption(l)}}},h=p,f=l("2877"),b=Object(f["a"])(h,i,a,!1,null,"cedd07fc",null);t["default"]=b.exports},e6ef:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container",style:{backgroundImage:"url("+e.login_bg_url+")"}},[t("el-form",{ref:"ref",staticClass:"login-form",attrs:{model:e.model,rules:e.rules,"label-position":"left"}},[t("div",{staticClass:"login-title"},[t("h3",{staticClass:"login-title-name"},[e._v(e._s(e.system_name))])]),t("div",{staticClass:"login-logo"},[e.logo_url?t("el-image",{staticStyle:{height:"130px"},attrs:{fit:"contain",src:e.logo_url}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})]):t("div",{staticStyle:{height:"134px"}})],1),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text",placeholder:"账号/手机/邮箱","prefix-icon":"el-icon-user",autocomplete:"on",clearable:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock",autocomplete:"on",clearable:"","show-password":""},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),e.captcha_switch&&e.captcha_src?t("el-form-item",{attrs:{prop:"captcha_code"}},[t("el-col",{attrs:{span:13}},[t("el-input",{attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-picture",autocomplete:"off",clearable:""},model:{value:e.model.captcha_code,callback:function(t){e.$set(e.model,"captcha_code",t)},expression:"model.captcha_code"}})],1),t("el-col",{attrs:{span:11}},[t("el-image",{staticClass:"login-captcha",attrs:{fit:"fill",src:e.captcha_src,alt:"验证码",title:"点击刷新验证码"},on:{click:e.captcha}})],1)],1):e._e(),e.captcha_switch&&2==e.captcha_mode?t("aj-captcha",{ref:"ajcaptcha",attrs:{mode:"pop","captcha-type":e.captcha_type,"img-size":{width:"330px",height:"155px"}},on:{success:e.ajcaptchaSuccess}}):e._e(),e.captcha_switch&&2==e.captcha_mode?t("el-button",{staticClass:"login-bottom",attrs:{loading:e.loading,type:"primary"},on:{click:e.ajcaptchaShow}},[e._v("登录")]):t("el-button",{staticClass:"login-bottom",attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v("登录")])],1)],1)},a=[],s=(l("14d9"),l("13d5"),l("d3b7"),l("b64b"),function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showBox,expression:"showBox"}],class:"pop"==e.mode?"mask":""},[t("div",{class:"pop"==e.mode?"verifybox":"",style:{"max-width":parseInt(e.imgSize.width)+30+"px"}},["pop"==e.mode?t("div",{staticClass:"verifybox-top"},[e._v(" 请完成安全验证 "),t("span",{staticClass:"verifybox-close"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh",title:"刷新",circle:""},on:{click:e.refresh}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-close",title:"关闭",circle:""},on:{click:e.closeBox}})],1)]):e._e(),t("div",{staticClass:"verifybox-bottom",style:{padding:"pop"==e.mode?"0 15px 15px 15px":"0"}},[e.componentType?t(e.componentType,{ref:"instance",tag:"components",attrs:{"captcha-type":e.captchaType,type:e.verifyType,figure:e.figure,arith:e.arith,mode:e.mode,"v-space":e.vSpace,explain:e.explain,"img-size":e.imgSize,"block-size":e.blockSize,"bar-size":e.barSize,"default-img":e.defaultImg}}):e._e()],1)])])}),o=[],n=(l("a9e3"),l("25f0"),l("a15b"),function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},["2"===e.type?t("div",{staticClass:"verify-img-out",style:{height:parseInt(e.setSize.imgHeight)+e.vSpace+"px"}},[t("div",{staticClass:"verify-img-panel",style:{width:e.setSize.imgWidth,height:e.setSize.imgHeight}},[t("img",{staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:e.backImgBase?"data:image/png;base64,"+e.backImgBase:e.defaultImg,alt:""}}),t("transition",{attrs:{name:"tips"}},[e.tipWords?t("span",{staticClass:"verify-tips",class:e.passFlag?"suc-bg":"err-bg"},[e._v(e._s(e.tipWords))]):e._e()])],1)]):e._e(),t("div",{staticClass:"verify-bar-area",style:{width:e.setSize.imgWidth,height:e.barSize.height,"line-height":e.barSize.height}},[t("span",{staticClass:"verify-msg",domProps:{textContent:e._s(e.text)}}),t("div",{staticClass:"verify-left-bar",style:{width:void 0!==e.leftBarWidth?e.leftBarWidth:e.barSize.height,height:e.barSize.height,"border-color":e.leftBarBorderColor,transaction:e.transitionWidth}},[t("span",{staticClass:"verify-msg",domProps:{textContent:e._s(e.finishText)}}),t("div",{staticClass:"verify-move-block",style:{width:e.barSize.height,height:e.barSize.height,"background-color":e.moveBlockBackgroundColor,left:e.moveBlockLeft,transition:e.transitionLeft},on:{touchstart:e.start,mousedown:e.start}},[t("i",{class:["verify-icon iconfont",e.iconClass],style:{color:e.iconColor}}),"2"===e.type?t("div",{staticClass:"verify-sub-block",style:{width:Math.floor(47*parseInt(e.setSize.imgWidth)/310)+"px",height:e.setSize.imgHeight,top:"-"+(parseInt(e.setSize.imgHeight)+e.vSpace)+"px","background-size":e.setSize.imgWidth+" "+e.setSize.imgHeight}},[t("img",{staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:"data:image/png;base64,"+e.blockBackImgBase,alt:""}})]):e._e()])])])])}),r=[],c=(l("ac1f"),l("5319"),l("e9c4"),l("b680"),l("3452")),u=l.n(c);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XwKsGlMcdPMEhR1B",l=u.a.enc.Utf8.parse(t),i=u.a.enc.Utf8.parse(e),a=u.a.AES.encrypt(i,l,{mode:u.a.mode.ECB,padding:u.a.pad.Pkcs7});return a.toString()}function m(e){var t,l,i,a,s=e.$el.parentNode.offsetWidth||window.offsetWidth,o=e.$el.parentNode.offsetHeight||window.offsetHeight;return t=-1!==e.imgSize.width.indexOf("%")?parseInt(this.imgSize.width)/100*s+"px":this.imgSize.width,l=-1!==e.imgSize.height.indexOf("%")?parseInt(this.imgSize.height)/100*o+"px":this.imgSize.height,i=-1!==e.barSize.width.indexOf("%")?parseInt(this.barSize.width)/100*s+"px":this.barSize.width,a=-1!==e.barSize.height.indexOf("%")?parseInt(this.barSize.height)/100*o+"px":this.barSize.height,{imgWidth:t,imgHeight:l,barWidth:i,barHeight:a}}var p=l("b775"),h="/admin/system.Login/";function f(e){return Object(p["a"])({url:h+"captcha",method:"get",params:e})}function b(e){return Object(p["a"])({url:h+"captcha",method:"post",data:e})}var g={name:"VerifySlide",props:{captchaType:{type:String,default:"blockPuzzle"},mode:{type:String,default:"pop"},type:{type:String,default:"2"},vSpace:{type:Number,default:5},explain:{type:String,default:"向右滑动完成验证"},imgSize:{type:Object,default:function(){return{width:"310px",height:"155px"}}},blockSize:{type:Object,default:function(){return{width:"50px",height:"50px"}}},barSize:{type:Object,default:function(){return{width:"310px",height:"40px"}}},defaultImg:{type:String,default:""}},data:function(){return{secretKey:"",passFlag:"",backImgBase:"",blockBackImgBase:"",backToken:"",startMoveTime:"",endMovetime:"",tipsBackColor:"",tipWords:"",text:"",finishText:"",setSize:{imgHeight:0,imgWidth:0,barHeight:0,barWidth:0},top:0,left:0,moveBlockLeft:void 0,leftBarWidth:void 0,moveBlockBackgroundColor:void 0,leftBarBorderColor:"#ddd",iconColor:void 0,iconClass:"icon-right",status:!1,isEnd:!1,showRefresh:!0,transitionLeft:"",transitionWidth:""}},computed:{barArea:function(){return this.$el.querySelector(".verify-bar-area")},resetSize:function(){return m}},watch:{type:{immediate:!0,handler:function(){this.init()}}},mounted:function(){this.$el.onselectstart=function(){return!1}},methods:{init:function(){var e=this;this.text=this.explain,this.getPictrue(),this.$nextTick((function(){var t=e.resetSize(e);for(var l in t)e.$set(e.setSize,l,t[l]);e.$parent.$emit("ready",e)}));var t=this;window.removeEventListener("touchmove",(function(e){t.move(e)})),window.removeEventListener("mousemove",(function(e){t.move(e)})),window.removeEventListener("touchend",(function(){t.end()})),window.removeEventListener("mouseup",(function(){t.end()})),window.addEventListener("touchmove",(function(e){t.move(e)})),window.addEventListener("mousemove",(function(e){t.move(e)})),window.addEventListener("touchend",(function(){t.end()})),window.addEventListener("mouseup",(function(){t.end()}))},start:function(e){var t;e=e||window.event,t=e.touches?e.touches[0].pageX:e.clientX,this.startLeft=Math.floor(t-this.barArea.getBoundingClientRect().left),this.startMoveTime=+new Date,!1===this.isEnd&&(this.text="",this.moveBlockBackgroundColor="#337ab7",this.leftBarBorderColor="#337AB7",this.iconColor="#fff",e.stopPropagation(),this.status=!0)},move:function(e){if(e=e||window.event,this.status&&!1===this.isEnd){var t;t=e.touches?e.touches[0].pageX:e.clientX;var l=this.barArea.getBoundingClientRect().left,i=t-l;i>=this.barArea.offsetWidth-parseInt(parseInt(this.blockSize.width)/2)-2&&(i=this.barArea.offsetWidth-parseInt(parseInt(this.blockSize.width)/2)-2),i<=0&&(i=parseInt(parseInt(this.blockSize.width)/2)),this.moveBlockLeft=i-this.startLeft+"px",this.leftBarWidth=i-this.startLeft+"px"}},end:function(){var e=this;this.endMovetime=+new Date;var t=this;if(this.status&&!1===this.isEnd){var l=parseInt((this.moveBlockLeft||"").replace("px",""));l=310*l/parseInt(this.setSize.imgWidth);var i={captchaType:this.captchaType,pointJson:this.secretKey?d(JSON.stringify({x:l,y:5}),this.secretKey):JSON.stringify({x:l,y:5}),token:this.backToken};b(i).then((function(i){var a=i.data;if("0000"===a.repCode){e.moveBlockBackgroundColor="#5cb85c",e.leftBarBorderColor="#5cb85c",e.iconColor="#fff",e.iconClass="icon-check",e.showRefresh=!1,e.isEnd=!0,"pop"===e.mode&&setTimeout((function(){e.$parent.clickShow=!1}),1500),e.passFlag=!0,e.tipWords="".concat(((e.endMovetime-e.startMoveTime)/1e3).toFixed(2),"s验证成功");var s=e.secretKey?d(e.backToken+"---"+JSON.stringify({x:l,y:5}),e.secretKey):e.backToken+"---"+JSON.stringify({x:l,y:5});setTimeout((function(){e.tipWords="",e.$parent.closeBox(),e.$parent.$emit("success",{captchaVerification:s})}),700)}else e.moveBlockBackgroundColor="#d9534f",e.leftBarBorderColor="#d9534f",e.iconColor="#fff",e.iconClass="icon-close",e.passFlag=!1,setTimeout((function(){t.refresh()}),1e3),e.$parent.$emit("error",e),e.tipWords="验证失败",setTimeout((function(){e.tipWords=""}),1e3)})),this.status=!1}},refresh:function(){var e=this;this.showRefresh=!0,this.finishText="",this.transitionLeft="left .3s",this.moveBlockLeft=0,this.leftBarWidth=void 0,this.transitionWidth="width .3s",this.leftBarBorderColor="#ddd",this.moveBlockBackgroundColor="#fff",this.iconColor="#000",this.iconClass="icon-right",this.isEnd=!1,this.getPictrue(),setTimeout((function(){e.transitionWidth="",e.transitionLeft="",e.text=e.explain}),300)},getPictrue:function(){var e=this,t={captchaType:this.captchaType,clientUid:localStorage.getItem("slider"),ts:Date.now()};f(t).then((function(t){var l=t.data;"0000"===l.repCode?(e.backImgBase=l.repData.originalImageBase64,e.blockBackImgBase=l.repData.jigsawImageBase64,e.backToken=l.repData.token,e.secretKey=l.repData.secretKey):e.tipWords=l.repMsg,"6201"===l.repCode&&(e.backImgBase=null,e.blockBackImgBase=null)})).catch((function(){}))}}},_=g,v=l("2877"),y=Object(v["a"])(_,n,r,!1,null,null,null),k=y.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[t("div",{staticClass:"verify-img-out"},[t("div",{staticClass:"verify-img-panel",style:{width:e.setSize.imgWidth,height:e.setSize.imgHeight,"background-size":e.setSize.imgWidth+" "+e.setSize.imgHeight,"margin-bottom":e.vSpace+"px"}},[t("img",{ref:"canvas",staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:e.pointBackImgBase?"data:image/png;base64,"+e.pointBackImgBase:e.defaultImg,alt:""},on:{click:function(t){e.bindingClick&&e.canvasClick(t)}}}),e._l(e.tempPoints,(function(l,i){return t("div",{key:i,staticClass:"point-area",style:{"background-color":"#1abd6c",color:"#fff","z-index":9999,width:"20px",height:"20px","text-align":"center","line-height":"20px","border-radius":"50%",position:"absolute",top:parseInt(l.y-10)+"px",left:parseInt(l.x-10)+"px"}},[e._v(" "+e._s(i+1)+" ")])}))],2)]),t("div",{staticClass:"verify-bar-area",style:{width:e.setSize.imgWidth,color:e.barAreaColor,"border-color":e.barAreaBorderColor,"line-height":e.barSize.height}},[t("span",{staticClass:"verify-msg"},[e._v(e._s(e.text))])])])},x=[],S=(l("a434"),l("d81d"),{name:"VerifyPoints",props:{captchaType:{type:String,default:"clickWord"},mode:{type:String,default:"pop"},type:{type:String,default:"2"},vSpace:{type:Number,default:5},imgSize:{type:Object,default:function(){return{width:"310px",height:"155px"}}},barSize:{type:Object,default:function(){return{width:"310px",height:"40px"}}},defaultImg:{type:String,default:""}},data:function(){return{secretKey:"",checkNum:3,fontPos:[],checkPosArr:[],num:1,pointBackImgBase:"",poinTextList:[],backToken:"",setSize:{imgHeight:0,imgWidth:0,barHeight:0,barWidth:0},tempPoints:[],text:"",barAreaColor:void 0,barAreaBorderColor:void 0,showRefresh:!0,bindingClick:!0}},computed:{resetSize:function(){return m}},watch:{type:{immediate:!0,handler:function(){this.init()}}},mounted:function(){this.$el.onselectstart=function(){return!1}},methods:{init:function(){var e=this;this.fontPos.splice(0,this.fontPos.length),this.checkPosArr.splice(0,this.checkPosArr.length),this.num=1,this.getPictrue(),this.$nextTick((function(){e.setSize=e.resetSize(e),e.$parent.$emit("ready",e)}))},canvasClick:function(e){var t=this;this.checkPosArr.push(this.getMousePos(this.$refs.canvas,e)),this.num===this.checkNum&&(this.num=this.createPoint(this.getMousePos(this.$refs.canvas,e)),this.checkPosArr=this.pointTransfrom(this.checkPosArr,this.setSize),setTimeout((function(){var e=t.secretKey?d(t.backToken+"---"+JSON.stringify(t.checkPosArr),t.secretKey):t.backToken+"---"+JSON.stringify(t.checkPosArr),l={captchaType:t.captchaType,pointJson:t.secretKey?d(JSON.stringify(t.checkPosArr),t.secretKey):JSON.stringify(t.checkPosArr),token:t.backToken};b(l).then((function(l){var i=l.data;"0000"===i.repCode?(t.barAreaColor="#4cae4c",t.barAreaBorderColor="#5cb85c",t.text="验证成功",t.bindingClick=!1,"pop"===t.mode&&setTimeout((function(){t.$parent.clickShow=!1}),700),t.$parent.closeBox(),t.$parent.$emit("success",{captchaVerification:e})):(t.$parent.$emit("error",t),t.barAreaColor="#d9534f",t.barAreaBorderColor="#d9534f",t.text="验证失败",setTimeout((function(){t.refresh()}),700))}))}),400)),this.num<this.checkNum&&(this.num=this.createPoint(this.getMousePos(this.$refs.canvas,e)))},getMousePos:function(e,t){var l=t.offsetX,i=t.offsetY;return{x:l,y:i}},createPoint:function(e){return this.tempPoints.push(Object.assign({},e)),++this.num},refresh:function(){this.tempPoints.splice(0,this.tempPoints.length),this.barAreaColor="#000",this.barAreaBorderColor="#ddd",this.bindingClick=!0,this.fontPos.splice(0,this.fontPos.length),this.checkPosArr.splice(0,this.checkPosArr.length),this.num=1,this.getPictrue(),this.text="验证失败",this.showRefresh=!0},getPictrue:function(){var e=this,t={captchaType:this.captchaType,clientUid:localStorage.getItem("point"),ts:Date.now()};f(t).then((function(t){var l=t.data;"0000"===l.repCode?(e.pointBackImgBase=l.repData.originalImageBase64,e.backToken=l.repData.token,e.secretKey=l.repData.secretKey,e.poinTextList=l.repData.wordList,e.checkNum=l.repData.wordList.length,e.text="请依次点击【"+e.poinTextList.join(",")+"】"):e.text=l.repMsg,"6201"===l.repCode&&(e.pointBackImgBase=null)})).catch((function(){}))},pointTransfrom:function(e,t){var l=e.map((function(e){var l=Math.round(310*e.x/parseInt(t.imgWidth)),i=Math.round(155*e.y/parseInt(t.imgHeight));return{x:l,y:i}}));return l}}}),$=S,q=Object(v["a"])($,w,x,!1,null,null,null),C=q.exports,T=l("cf49"),O=l.n(T),D={name:"AjCaptcha",components:{VerifySlide:k,VerifyPoints:C},props:{locale:{require:!1,type:String,default:function(){return navigator.language?navigator.language:navigator.browserLanguage}},captchaType:{type:String,default:"",required:!0},figure:{type:Number,default:0},arith:{type:Number,default:0},mode:{type:String,default:"pop"},vSpace:{type:Number,default:0},explain:{type:String,default:"向右滑动完成验证"},imgSize:{type:Object,default:function(){return{width:"310px",height:"155px"}}},blockSize:{type:Object,default:function(){}},barSize:{type:Object,default:function(){}}},data:function(){return{clickShow:!1,verifyType:void 0,componentType:void 0,defaultImg:O.a}},computed:{instance:function(){return this.$refs.instance||{}},showBox:function(){return"pop"!==this.mode||this.clickShow}},watch:{captchaType:{immediate:!0,handler:function(e){switch(e.toString()){case"blockPuzzle":this.verifyType="2",this.componentType="VerifySlide";break;case"clickWord":this.verifyType="",this.componentType="VerifyPoints";break}}}},mounted:function(){this.uuid()},methods:{uuid:function(){for(var e=[],t="0123456789abcdef",l=0;l<36;l++)e[l]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i="slider-"+e.join(""),a="point-"+e.join("");localStorage.getItem("slider")||localStorage.setItem("slider",i),localStorage.getItem("point")||localStorage.setItem("point",a)},i18n:function(e){if(this.$t)return this.$t(e);var t=this.$options.i18n.messages[this.locale]||this.$options.i18n.messages["en-US"];return t[e]},refresh:function(){this.instance.refresh&&this.instance.refresh()},closeBox:function(){this.clickShow=!1},show:function(){"pop"===this.mode&&(this.clickShow=!0)}}},I=D,j=(l("8a38"),Object(v["a"])(I,s,o,!1,null,null,null)),A=j.exports,R=l("3108"),z=l("d369"),M={name:"SystemLogin",components:{AjCaptcha:A},data:function(){return{name:"登录",system_name:"",loading:!1,redirect:void 0,otherQuery:{},captcha_switch:0,captcha_mode:1,captcha_type:"blockPuzzle",captcha_src:"",logo_url:"",login_bg_url:"",model:{username:"",password:"",captcha_id:"",captcha_code:"",ajcaptcha:{}},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha_code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},created:function(){this.setting()},mounted:function(){},destroyed:function(){},methods:{captcha:function(){var e=this;Object(R["a"])().then((function(t){e.captchaData(t.data)}))},captchaData:function(e){this.model.captcha_id="",this.model.captcha_code="",e.captcha_switch&&1===e.captcha_mode&&(this.captcha_src=e.captcha_src,this.model.captcha_id=e.captcha_id),this.captcha_switch=e.captcha_switch,this.captcha_mode=e.captcha_mode,1===e.captcha_type?this.captcha_type="blockPuzzle":this.captcha_type="clickWord"},ajcaptchaSuccess:function(e){this.model.ajcaptcha=e,this.handleLogin()},ajcaptchaShow:function(){var e=this;this.$refs["ref"].validate((function(t){if(!t)return!1;e.$refs.ajcaptcha.show()}))},setting:function(){var e=this;this.model.captcha_id="",this.model.captcha_code="",Object(R["d"])().then((function(t){Object(z["a"])();var l=t.data;e.captchaData(l),e.login_bg_url=l.login_bg_url,e.system_name=l.system_name,e.logo_url=l.logo_url,e.$store.dispatch("settings/changeSetting",{key:"tokenName",value:l.token_name}),e.$store.dispatch("settings/changeSetting",{key:"tokenType",value:l.token_type}),e.$store.dispatch("settings/changeSetting",{key:"systemName",value:l.system_name}),e.$store.dispatch("settings/changeSetting",{key:"pageTitle",value:l.page_title}),e.$store.dispatch("settings/changeSetting",{key:"logoUrl",value:l.logo_url}),e.$store.dispatch("settings/changeSetting",{key:"faviconUrl",value:l.favicon_url})}))},handleLogin:function(){var e=this;this.$refs["ref"].validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.model).then((function(){e.$router.push({path:e.redirect||"/",query:e.otherQuery}).catch((function(){e.loading=!1}))})).catch((function(){e.loading=!1,e.captcha_switch&&2===e.captcha_mode?e.$refs.ajcaptcha.refresh():e.captcha()}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,l){return"redirect"!==l&&(t[l]=e[l]),t}),{})}}},P=M,N=(l("7f9a"),Object(v["a"])(P,i,a,!1,null,"b4226ade",null));t["default"]=N.exports},e86e:function(e,t,l){},ea60:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:16}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"自定义设置",prop:""}},[t("el-col",{attrs:{span:5}},[e._v(" 键名 ")]),t("el-col",{attrs:{span:8}},[e._v(" 键值 ")]),t("el-col",{attrs:{span:10}},[e._v(" 说明 ")]),t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("增加")])],1)],1),e._l(e.model.diy_config,(function(l,i){return t("el-form-item",{key:i,attrs:{label:""}},[t("el-col",{attrs:{span:5}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键名"},model:{value:l.config_key,callback:function(t){e.$set(l,"config_key",t)},expression:"item.config_key"}})],1),t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入键值"},model:{value:l.config_val,callback:function(t){e.$set(l,"config_val",t)},expression:"item.config_val"}})],1),t("el-col",{attrs:{span:10}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入说明"},model:{value:l.config_desc,callback:function(t){e.$set(l,"config_desc",t)},expression:"item.config_desc"}})],1),t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dele(i)}}},[e._v("删除")])],1)],1)})),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],2)],1)],1)],1)},a=[],s=(l("14d9"),l("a434"),l("98b1")),o=l("4f49"),n={name:"MemberSettingDiy",components:{},data:function(){return{name:"自定义设置",height:680,loading:!1,model:{diy_config:[]},rules:{}}},created:function(){this.height=Object(s["a"])(170),this.info()},methods:{info:function(){var e=this;Object(o["f"])().then((function(t){e.model=t.data}))},add:function(){this.model.diy_config.push({config_key:"",config_val:"",config_desc:""})},dele:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.model.diy_config.splice(e,1)})).catch((function(){}))},refresh:function(){var e=this;this.loading=!0,Object(o["f"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["e"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},ebdc:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"ref",attrs:{rules:e.rules,model:e.model,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"头像"}},[e.model.avatar_url?t("el-avatar",{attrs:{size:100,fit:"contain",src:e.model.avatar_url,shape:"circle"}}):t("el-avatar",{attrs:{icon:"el-icon-user-solid",size:100}})],1),t("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[t("el-input",{model:{value:e.model.nickname,callback:function(t){e.$set(e.model,"nickname",t)},expression:"model.nickname"}})],1),t("el-form-item",{attrs:{label:"账号",prop:"username"}},[t("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}})],1),t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1),t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1),t("el-form-item",{attrs:{label:"登录时间",prop:"login_time"}},[t("el-input",{model:{value:e.model.login_time,callback:function(t){e.$set(e.model,"login_time",t)},expression:"model.login_time"}})],1),t("el-form-item",{attrs:{label:"登录地区",prop:"login_region"}},[t("el-input",{model:{value:e.model.login_region,callback:function(t){e.$set(e.model,"login_region",t)},expression:"model.login_region"}})],1),t("el-form-item",{attrs:{label:"退出时间",prop:"logout_time"}},[t("el-input",{model:{value:e.model.logout_time,callback:function(t){e.$set(e.model,"logout_time",t)},expression:"model.logout_time"}})],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:e.refresh}},[e._v("刷新")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("ebb5"),n={name:"SystemUserCenterInfo",components:{},data:function(){return{name:"我的信息",height:680,loading:!1,model:{avatar_id:0,avatar_url:"",username:"",nickname:"",phone:"",email:"",create_time:"",update_time:"",login_time:"",login_region:"",logout_time:""},rules:{}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,Object(o["b"])().then((function(l){e.model=l.data,e.loading=!1,t&&e.$message.success(l.msg)})).catch((function(){e.loading=!1}))},refresh:function(){this.info(!0)}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},ed08:function(e,t,l){"use strict";l.d(t,"b",(function(){return i})),l.d(t,"a",(function(){return a}));l("ac1f"),l("466d"),l("4d63"),l("c607"),l("2c3e"),l("25f0"),l("5319"),l("d3b7"),l("3ca3"),l("ddb0"),l("2b3d"),l("9861"),l("14d9"),l("a15b");function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0;i<e;i++)t+=l[Math.floor(Math.random()*l.length)];return t}function a(e,t){for(var l=[],i=e.length,a=0;a<i;a++)l.push(e[a][t]);return l}},ee0c:function(e,t,l){"use strict";l("1721")},ef5c:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"api_pid",label:"上级"}}),t("el-option",{attrs:{value:"api_name",label:"名称"}}),t("el-option",{attrs:{value:"api_url",label:"链接"}}),t("el-option",{attrs:{value:"is_unlogin",label:"免登"}}),t("el-option",{attrs:{value:"is_unauth",label:"免权"}}),t("el-option",{attrs:{value:"is_unrate",label:"免限"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"api_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"is_unlogin"===e.query.search_field||"is_unauth"===e.query.search_field||"is_unrate"===e.query.search_field||"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",title:"收起/展开"},on:{change:e.expandAll},model:{value:e.isExpandAll,callback:function(t){e.isExpandAll=t},expression:"isExpandAll"}},[e._v("收起")]),t("el-button",{attrs:{title:"解除分组"},on:{click:function(t){return e.selectOpen("removeg")}}},[e._v("分组")]),t("el-button",{attrs:{title:"修改排序"},on:{click:function(t){return e.selectOpen("editsort")}}},[e._v("排序")]),t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"是否免登"},on:{click:function(t){return e.selectOpen("unlogin")}}},[e._v("免登")]),t("el-button",{attrs:{title:"是否免权"},on:{click:function(t){return e.selectOpen("unauth")}}},[e._v("免权")]),t("el-button",{attrs:{title:"是否免限"},on:{click:function(t){return e.selectOpen("unrate")}}},[e._v("免限")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removeg"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的分组吗？")])]):"editsort"===e.selectType?t("el-form-item",{attrs:{label:"排序",prop:""}},[t("el-input",{attrs:{type:"number",placeholder:"排序"},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}}),t("el-input",{attrs:{type:"text",placeholder:"0"},model:{value:e.sort_incdec,callback:function(t){e.sort_incdec=t},expression:"sort_incdec"}},[t("template",{slot:"append"},[e._v("按"+e._s(e.name)+"ID顺序递增或递减排序")])],2)],1):"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级接口",clearable:"",filterable:""},model:{value:e.api_pid,callback:function(t){e.api_pid=t},expression:"api_pid"}})],1):"unlogin"===e.selectType?t("el-form-item",{attrs:{label:"是否免登",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unlogin,callback:function(t){e.is_unlogin=t},expression:"is_unlogin"}})],1):"unauth"===e.selectType?t("el-form-item",{attrs:{label:"是否免权",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unauth,callback:function(t){e.is_unauth=t},expression:"is_unauth"}})],1):"unrate"===e.selectType?t("el-form-item",{attrs:{label:"是否免限",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_unrate,callback:function(t){e.is_unrate=t},expression:"is_unrate"}})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height,"row-key":e.idkey,"default-expand-all":""},on:{"selection-change":e.select,"select-all":e.selectAll,"cell-dblclick":e.cellDbclick}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"api_name",label:"接口名称","min-width":"210","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"api_url",label:"接口链接","min-width":"300","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"is_unlogin",label:"免登","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.api_url?t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.unlogin([l.row])}},model:{value:l.row.is_unlogin,callback:function(t){e.$set(l.row,"is_unlogin",t)},expression:"scope.row.is_unlogin"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_unauth",label:"免权","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.api_url?t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.unauth([l.row])}},model:{value:l.row.is_unauth,callback:function(t){e.$set(l.row,"is_unauth",t)},expression:"scope.row.is_unauth"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_unrate",label:"免限","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.api_url?t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.unrate([l.row])}},model:{value:l.row.is_unrate,callback:function(t){e.$set(l.row,"is_unrate",t)},expression:"scope.row.is_unrate"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.api_url?t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.groupShow(l.row)}}},[e._v("分组")]),t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height-50+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"接口上级",prop:"api_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级接口",clearable:"",filterable:""},model:{value:e.model.api_pid,callback:function(t){e.$set(e.model,"api_pid",t)},expression:"model.api_pid"}})],1),t("el-form-item",{attrs:{label:"接口名称",prop:"api_name"}},[t("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.model.api_name,callback:function(t){e.$set(e.model,"api_name",t)},expression:"model.api_name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.api_name,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"接口链接",prop:"api_url"}},[t("el-input",{attrs:{placeholder:"应用/控制器/操作，区分大小写",clearable:""},model:{value:e.model.api_url,callback:function(t){e.$set(e.model,"api_url",t)},expression:"model.api_url"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-document-copy",title:"复制"},on:{click:function(t){return e.copy(e.model.api_url,t)}},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:"250"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.groupDialogTitle,visible:e.groupDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.groupDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.groupSelectOpen("groupRemove")}}},[e._v("解除")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoad,expression:"groupLoad"}],ref:"groupRef",attrs:{data:e.groupData,height:e.height-70},on:{"sort-change":e.groupSort,"selection-change":e.groupSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.groupPk,label:"分组ID","min-width":"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"group_name",label:"分组名称","min-width":"130",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_desc",label:"分组描述","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.groupSelectOpen("groupRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.groupCount>0,expression:"groupCount>0"}],attrs:{total:e.groupCount,page:e.groupQuery.page,limit:e.groupQuery.limit},on:{"update:page":function(t){return e.$set(e.groupQuery,"page",t)},"update:limit":function(t){return e.$set(e.groupQuery,"limit",t)},pagination:e.groupList}})],1),t("el-dialog",{attrs:{title:e.groupSelectTitle,visible:e.groupSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.groupSelectDialog=t}}},[t("el-form",{ref:"groupSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.groupName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.groupSelectIds,callback:function(t){e.groupSelectIds=t},expression:"groupSelectIds"}})],1),"groupRemove"===e.groupSelectType?t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("span",[e._v(e._s(e.groupQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.groupSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.groupSelectSubmit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("159b"),l("25f0"),l("14d9"),l("98b1")),o=l("333d"),n=l("f71e"),r=l("ed08"),c=l("b775"),u="/admin/member.Api/";function d(e){return Object(c["a"])({url:u+"list",method:"get",params:e})}function m(e){return Object(c["a"])({url:u+"info",method:"get",params:e})}function p(e){return Object(c["a"])({url:u+"add",method:"post",data:e})}function h(e){return Object(c["a"])({url:u+"edit",method:"post",data:e})}function f(e){return Object(c["a"])({url:u+"dele",method:"post",data:e})}function b(e){return Object(c["a"])({url:u+"editsort",method:"post",data:e})}function g(e){return Object(c["a"])({url:u+"editpid",method:"post",data:e})}function _(e){return Object(c["a"])({url:u+"unlogin",method:"post",data:e})}function v(e){return Object(c["a"])({url:u+"unauth",method:"post",data:e})}function y(e){return Object(c["a"])({url:u+"unrate",method:"post",data:e})}function k(e){return Object(c["a"])({url:u+"disable",method:"post",data:e})}function w(e){return Object(c["a"])({url:u+"group",method:"get",params:e})}function x(e){return Object(c["a"])({url:u+"groupRemove",method:"post",data:e})}var S={name:"MemberApi",components:{Pagination:o["a"]},directives:{},data:function(){return{name:"会员接口",height:680,loading:!1,idkey:"api_id",exps:[],query:{search_field:"api_name",search_exp:"like",date_field:"create_time"},data:[],dialog:!1,dialogTitle:"",model:{api_id:"",api_pid:0,api_name:"",api_url:"",sort:250},rules:{api_name:[{required:!0,message:"请输入接口名称",trigger:"blur"}]},trees:[],props:{checkStrictly:!0,value:"api_id",label:"api_name",emitPath:!1},isExpandAll:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",sort:250,sort_incdec:"0",api_pid:0,is_unlogin:0,is_unauth:0,is_unrate:0,is_disable:0,groupPk:"group_id",groupName:"分组",groupDialog:!1,groupDialogTitle:"",groupLoad:!1,groupData:[],groupCount:0,groupQuery:{page:1,limit:12},groupSelection:[],groupSelectIds:"",groupSelectTitle:"选中操作",groupSelectDialog:!1,groupSelectType:""}},created:function(){this.height=Object(s["a"])(210),this.list()},methods:{list:function(){var e=this;this.loading=!0,d(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.isExpandAll=!1,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.api_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],m(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},expandAll:function(e){this.expandFor(this.data,!e)},expandFor:function(e,t){var l=this;e.forEach((function(e){l.$refs.table.toggleRowExpansion(e,t),e.children&&l.expandFor(e.children,t)}))},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectAll:function(e){e?(this.selectAllKeys(e),this.selectIds=this.selectGetIds(this.selection).toString()):this.selectIds=""},selectAllKeys:function(e){for(var t in e)this.selection.push(e[t]),e[t].children&&this.selectAllKeys(e[t].children)},selectGetIds:function(e){return Object(r["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removeg"===e?this.selectTitle=this.name+"解除分组":"editsort"===e?this.selectTitle=this.name+"修改排序":"editpid"===e?this.selectTitle=this.name+"修改上级":"unlogin"===e?this.selectTitle=this.name+"是否免登":"unauth"===e?this.selectTitle=this.name+"是否免权":"unrate"===e?this.selectTitle=this.name+"是否免限":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removeg"===e?this.removeg(this.selection):"editsort"===e?this.editsort(this.selection):"editpid"===e?this.editpid(this.selection):"unlogin"===e?this.unlogin(this.selection,!0):"unauth"===e?this.unauth(this.selection,!0):"unrate"===e?this.unrate(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removeg:function(e){var t=this;e.length?(this.loading=!0,x({api_id:this.selectGetIds(e),group_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editsort:function(e){var t=this;this.loading=!0,b({ids:this.selectGetIds(e),sort:this.sort,sort_incdec:this.sort_incdec}).then((function(e){t.list(),t.sort_incdec="0",t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},editpid:function(e){var t=this;this.loading=!0,g({ids:this.selectGetIds(e),api_pid:this.api_pid}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},unlogin:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unlogin;l&&(i=this.is_unlogin),_({ids:this.selectGetIds(e),is_unlogin:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},unrate:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unrate;l&&(i=this.is_unrate),y({ids:this.selectGetIds(e),is_unrate:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},unauth:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_unauth;l&&(i=this.is_unauth),v({ids:this.selectGetIds(e),is_unauth:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),k({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,f({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},groupShow:function(e){this.groupDialog=!0,this.groupDialogTitle=this.name+this.groupName+"："+e.api_name,this.groupQuery.api_id=e.api_id,this.groupList()},groupList:function(){var e=this;this.groupLoad=!0,w(this.groupQuery).then((function(t){e.groupData=t.data.list,e.groupCount=t.data.count,e.groupLoad=!1})).catch((function(){e.groupLoad=!1}))},groupSort:function(e){this.groupQuery.sort_field=e.prop,this.groupQuery.sort_value="","ascending"===e.order&&(this.groupQuery.sort_value="asc",this.groupList()),"descending"===e.order&&(this.groupQuery.sort_value="desc",this.groupList())},groupSelect:function(e){this.groupSelection=e,this.groupSelectIds=this.groupSelectGetIds(e).toString()},groupSelectGetIds:function(e){return Object(r["a"])(e,this.groupPk)},groupSelectAlert:function(){this.$alert("请选择需要操作的"+this.groupName,"提示",{type:"warning",callback:function(e){}})},groupSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["groupRef"].clearSelection(),this.$refs["groupRef"].toggleRowSelection(t)),this.groupSelection.length?(this.groupSelectTitle="选中操作","groupRemove"===e&&(this.groupSelectTitle=this.name+"解除"+this.groupName),this.groupSelectDialog=!0,this.groupSelectType=e):this.groupSelectAlert()},groupSelectCancel:function(){this.groupSelectDialog=!1},groupSelectSubmit:function(){if(this.groupSelection.length){var e=this.groupSelectType;"groupRemove"===e&&this.groupRemove(this.groupSelection),this.groupSelectDialog=!1}else this.groupSelectAlert()},groupRemove:function(e){var t=this;e.length?(this.groupLoad=!0,x({api_id:this.groupQuery.api_id,group_ids:this.groupSelectGetIds(e)}).then((function(e){t.groupList(),t.$message.success(e.msg)})).catch((function(){t.groupLoad=!1}))):this.groupSelectAlert()},copy:function(e,t){Object(n["a"])(e,t)},cellDbclick:function(e,t,l,i){this.copy(e[t.property],i)}}},$=S,q=l("2877"),C=Object(q["a"])($,i,a,!1,null,null,null);t["default"]=C.exports},f170:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"tag_name",label:"名称"}}),t("el-option",{attrs:{value:"tag_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"搜索文件",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除文件"},on:{click:function(t){return e.selectOpen("removef")}}},[e._v("文件")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removef"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的文件吗？")])]):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"tag_name",label:"名称","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_desc",label:"描述","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.fileShow(l.row)}}},[e._v("文件")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"tag_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.tag_name,callback:function(t){e.$set(e.model,"tag_name",t)},expression:"model.tag_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"tag_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.tag_desc,callback:function(t){e.$set(e.model,"tag_desc",t)},expression:"model.tag_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{type:"number",placeholder:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileDialogTitle,visible:e.fileDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.fileSelectOpen("fileRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.fileSelectTitle,visible:e.fileSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.fileSelectDialog=t}}},[t("el-form",{ref:"fileSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.fileName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.fileSelectIds,callback:function(t){e.fileSelectIds=t},expression:"fileSelectIds"}})],1),"fileRemove"===e.fileSelectType?t("el-form-item",{attrs:{label:"标签ID",prop:""}},[t("span",[e._v(e._s(e.fileQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.fileSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.fileSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoad,expression:"fileLoad"}],ref:"fileRef",attrs:{data:e.fileData,height:e.height-20},on:{"sort-change":e.fileSort,"selection-change":e.fileSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.filePk,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_url",label:"文件","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(l){return[l.row.file_url?t("div",{staticStyle:{height:"30px"}},["image"===l.row.file_type?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.file_url,"preview-src-list":[l.row.file_url],title:"点击看大图"}}):"video"===l.row.file_type?t("video",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"video/mp4"}}),t("object",{attrs:{data:l.row.file_url,height:"100%"}},[t("embed",{attrs:{src:l.row.file_url,height:"100%"}})])]):"audio"===l.row.file_type?t("audio",{attrs:{height:"100%",controls:""}},[t("source",{attrs:{src:l.row.file_url,type:"audio/mp3"}}),t("embed",{attrs:{src:l.row.file_url,height:"100%"}})]):"word"===l.row.file_type?t("div",[t("i",{staticClass:"el-icon-document"})]):t("div",[t("i",{staticClass:"el-icon-folder"})])],1):e._e()]}}])}),t("el-table-column",{attrs:{prop:"file_type_name",label:"类型","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_name",label:"名称","min-width":"120",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"file_ext",label:"后缀","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"file_size",label:"大小","min-width":"85",sortable:"custom","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"group_name",label:"分组","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.fileSelectOpen("fileRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.fileCount>0,expression:"fileCount>0"}],attrs:{total:e.fileCount,page:e.fileQuery.page,limit:e.fileQuery.limit},on:{"update:page":function(t){return e.$set(e.fileQuery,"page",t)},"update:limit":function(t){return e.$set(e.fileQuery,"limit",t)},pagination:e.file}})],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("505c"),c={name:"FileTag",components:{Pagination:o["a"]},data:function(){return{name:"文件标签",height:680,loading:!1,idkey:"tag_id",exps:[],query:{page:1,limit:12,search_field:"tag_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{tag_id:"",tag_name:"",tag_desc:"",sort:250},rules:{tag_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,filePk:"file_id",fileName:"文件",fileDialog:!1,fileDialogTitle:"",fileLoad:!1,fileData:[],fileCount:0,fileQuery:{page:1,limit:12},fileSelection:[],fileSelectIds:"",fileSelectTitle:"选中操作",fileSelectDialog:!1,fileSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,Object(r["h"])(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],Object(r["g"])(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?Object(r["d"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):Object(r["a"])(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removef"===e?this.selectTitle=this.name+"解除文件":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removef"===e?this.removef(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection,!0),this.selectDialog=!1}else this.selectAlert()},removef:function(e){var t=this;e.length?(this.loading=!0,Object(r["f"])({tag_id:this.selectGetIds(e),file_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),Object(r["c"])({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?(this.loading=!0,Object(r["b"])({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},fileShow:function(e){this.fileDialog=!0,this.fileDialogTitle=this.name+"文件："+e.tag_name,this.fileQuery.tag_id=e.tag_id,this.file()},file:function(){var e=this;this.fileLoad=!0,Object(r["e"])(this.fileQuery).then((function(t){e.fileData=t.data.list,e.fileCount=t.data.count,e.fileLoad=!1})).catch((function(){e.fileLoad=!1}))},fileSort:function(e){this.fileQuery.sort_field=e.prop,this.fileQuery.sort_value="","ascending"===e.order&&(this.fileQuery.sort_value="asc",this.file()),"descending"===e.order&&(this.fileQuery.sort_value="desc",this.file())},fileSelect:function(e){this.fileSelection=e,this.fileSelectIds=this.fileSelectGetIds(e).toString()},fileSelectGetIds:function(e){return Object(n["a"])(e,this.filePk)},fileSelectAlert:function(){this.$alert("请选择需要操作的"+this.fileName,"提示",{type:"warning",callback:function(e){}})},fileSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["fileRef"].clearSelection(),this.$refs["fileRef"].toggleRowSelection(t)),this.fileSelection.length?(this.fileSelectTitle="选中操作","fileRemove"===e&&(this.fileSelectTitle="解除标签"),this.fileSelectDialog=!0,this.fileSelectType=e):this.fileSelectAlert()},fileSelectCancel:function(){this.fileSelectDialog=!1},fileSelectSubmit:function(){if(this.fileSelection.length){var e=this.fileSelectType;"fileRemove"===e&&this.fileRemove(this.fileSelection),this.fileSelectDialog=!1}else this.fileSelectAlert()},fileRemove:function(e){var t=this;e.length?(this.fileLoad=!0,Object(r["f"])({tag_id:this.fileQuery.tag_id,file_ids:this.fileSelectGetIds(e)}).then((function(e){t.file(),t.$message.success(e.msg)})).catch((function(){t.fileLoad=!1}))):this.fileSelectAlert()}}},u=c,d=l("2877"),m=Object(d["a"])(u,i,a,!1,null,"369c91a7",null);t["default"]=m.exports},f293:function(e,t,l){"use strict";l.d(t,"d",(function(){return s})),l.d(t,"c",(function(){return o})),l.d(t,"b",(function(){return n})),l.d(t,"a",(function(){return r}));var i=l("b775"),a="/admin/setting.Wechat/";function s(e){return Object(i["a"])({url:a+"offiInfo",method:"get",params:e})}function o(e){return Object(i["a"])({url:a+"offiEdit",method:"post",data:e})}function n(e){return Object(i["a"])({url:a+"miniInfo",method:"get",params:e})}function r(e){return Object(i["a"])({url:a+"miniEdit",method:"post",data:e})}},f4e4:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("a4d3"),l("e01a"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"category_name",label:"名称"}}),t("el-option",{attrs:{value:"category_unique",label:"标识"}}),t("el-option",{attrs:{value:"category_pid",label:"上级"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"category_pid"===e.query.search_field?t("el-cascader",{staticClass:"filter-item ya-search-value",attrs:{options:e.trees,props:e.props,clearable:"",filterable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}):"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",on:{click:function(t){return e.refresh()}}},[e._v("刷新")])],1)],1),t("el-row",[t("el-col",[t("el-checkbox",{staticStyle:{"margin-right":"10px",top:"-2px"},attrs:{border:"",title:"收起/展开"},on:{change:e.expandAll},model:{value:e.isExpandAll,callback:function(t){e.isExpandAll=t},expression:"isExpandAll"}},[e._v("收起")]),t("el-button",{attrs:{title:"解除内容"},on:{click:function(t){return e.selectOpen("removec")}}},[e._v("内容")]),t("el-button",{attrs:{title:"修改上级"},on:{click:function(t){return e.selectOpen("editpid")}}},[e._v("上级")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removec"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的内容吗？")])]):"editpid"===e.selectType?t("el-form-item",{attrs:{label:"上级",prop:""}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级分类",clearable:"",filterable:""},model:{value:e.category_pid,callback:function(t){e.category_pid=t},expression:"category_pid"}})],1):e._e(),"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height+50,"row-key":e.idkey,"default-expand-all":""},on:{"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"category_name",label:"名称","min-width":"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"cover_url",label:"封面","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.cover_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.cover_url,"preview-src-list":[l.row.cover_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"category_unique",label:"标识","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID","min-width":"75"}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"75"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155"}}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.contentShow(l.row)}}},[e._v("内容")]),t("el-button",{attrs:{size:"mini",type:"text",title:"添加下级"},on:{click:function(t){return e.add(l.row)}}},[e._v("添加")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"上级",prop:"category_pid"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.trees,props:e.props,placeholder:"一级分类",clearable:"",filterable:""},model:{value:e.model.category_pid,callback:function(t){e.$set(e.model,"category_pid",t)},expression:"model.category_pid"}})],1),t("el-form-item",{attrs:{label:"名称",prop:"category_name"}},[t("el-input",{attrs:{placeholder:"请输入分类名称",clearable:""},model:{value:e.model.category_name,callback:function(t){e.$set(e.model,"category_name",t)},expression:"model.category_name"}})],1),t("el-form-item",{attrs:{label:"封面",prop:"cover_id"}},[t("el-col",{staticStyle:{height:"100px"},attrs:{span:12}},[e.model.cover_url?t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:e.model.cover_url,"preview-src-list":[e.model.cover_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1),t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","cover_id","上传封面")}}},[e._v("上传封面")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileDelete(0,"cover_id")}}},[e._v("删除")]),t("p",[e._v("图片小于 200 KB，jpg、png格式。")])],1)],1),t("el-form-item",{attrs:{label:"标识",prop:"category_unique"}},[t("el-input",{attrs:{placeholder:"请输入分类标识（唯一）",clearable:""},model:{value:e.model.category_unique,callback:function(t){e.$set(e.model,"category_unique",t)},expression:"model.category_unique"}})],1),t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"title",clearable:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[t("el-input",{attrs:{placeholder:"keywords",clearable:""},model:{value:e.model.keywords,callback:function(t){e.$set(e.model,"keywords",t)},expression:"model.keywords"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",placeholder:"description",clearable:""},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{attrs:{placeholder:"250",clearable:""},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"images"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.fileUpload("image","images","上传图片")}}},[e._v("上传图片")])],1),t("el-col",{attrs:{span:12}},[t("span",[e._v("图片小于 250 KB，jpg、png格式。")])])],1),t("el-row",e._l(e.model.images,(function(l,i){return t("el-col",{key:i,staticClass:"ya-file",attrs:{span:6}},[t("el-image",{staticStyle:{height:"100px"},attrs:{fit:"contain",src:l.file_url,"preview-src-list":[l.file_url],title:"点击看大图"}}),t("div",[t("span",{staticClass:"ya-file-name",attrs:{title:l.file_name+"."+l.file_ext}},[e._v(e._s(l.file_name)+"."+e._s(l.file_ext))]),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-left",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","left")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-d-arrow-right",title:"向左移动"},on:{click:function(t){return e.fileRemoval(i,"images","right")}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-download",title:"下载"},on:{click:function(t){return e.fileDownload(l,t)}}}),t("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-delete",title:"删除"},on:{click:function(t){return e.fileDelete(i,"images")}}})],1)],1)})),1)],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.fileTitle,visible:e.fileDialog,width:"80%",top:"1vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.fileDialog=t}}},[t("file-manage",{attrs:{"file-type":e.fileType},on:{fileCancel:e.fileCancel,fileSubmit:e.fileSubmit}})],1),t("el-dialog",{attrs:{title:e.contentDialogTitle,visible:e.contentDialog,width:"70%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.contentDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.contentSelectOpen("contentRemove")}}},[e._v("解除")])],1)],1),t("el-dialog",{attrs:{title:e.contentSelectTitle,visible:e.contentSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.contentSelectDialog=t}}},[t("el-form",{ref:"contentSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.contentName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.contentSelectIds,callback:function(t){e.contentSelectIds=t},expression:"contentSelectIds"}})],1),"contentRemove"===e.contentSelectType?t("el-form-item",{attrs:{label:"分类ID",prop:""}},[t("span",[e._v(e._s(e.contentQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.contentSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.contentSelectSubmit}},[e._v("提交")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.contentLoad,expression:"contentLoad"}],ref:"contentRef",attrs:{data:e.contentData,height:e.height-20},on:{"sort-change":e.contentSort,"selection-change":e.contentSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.contentPk,label:"内容ID","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"cover_url",label:"封面","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("div",{staticStyle:{height:"30px"}},[l.row.cover_url?t("el-image",{staticStyle:{height:"30px"},attrs:{fit:"contain",src:l.row.cover_url,"preview-src-list":[l.row.cover_url],title:"点击看大图"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)]}}])}),t("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"230","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"unique",label:"标识","min-width":"80","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"category_names",label:"分类","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"tag_names",label:"标签","min-width":"120","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_top",label:"置顶","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_top,callback:function(t){e.$set(l.row,"is_top",t)},expression:"scope.row.is_top"}})]}}])}),t("el-table-column",{attrs:{prop:"is_hot",label:"热门","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_hot,callback:function(t){e.$set(l.row,"is_hot",t)},expression:"scope.row.is_hot"}})]}}])}),t("el-table-column",{attrs:{prop:"is_rec",label:"推荐","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_rec,callback:function(t){e.$set(l.row,"is_rec",t)},expression:"scope.row.is_rec"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.contentSelectOpen("contentRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.contentCount>0,expression:"contentCount>0"}],attrs:{total:e.contentCount,page:e.contentQuery.page,limit:e.contentQuery.limit},on:{"update:page":function(t){return e.$set(e.contentQuery,"page",t)},"update:limit":function(t){return e.$set(e.contentQuery,"limit",t)},pagination:e.content}})],1)],1)},a=[],s=(l("d3b7"),l("159b"),l("25f0"),l("14d9"),l("a434"),l("f71e")),o=l("98b1"),n=l("3659"),r=l("333d"),c=l("ed08"),u=l("b775"),d="/admin/content.Category/";function m(e){return Object(u["a"])({url:d+"list",method:"get",params:e})}function p(e){return Object(u["a"])({url:d+"info",method:"get",params:e})}function h(e){return Object(u["a"])({url:d+"add",method:"post",data:e})}function f(e){return Object(u["a"])({url:d+"edit",method:"post",data:e})}function b(e){return Object(u["a"])({url:d+"dele",method:"post",data:e})}function g(e){return Object(u["a"])({url:d+"editpid",method:"post",data:e})}function _(e){return Object(u["a"])({url:d+"disable",method:"post",data:e})}function v(e){return Object(u["a"])({url:d+"content",method:"get",params:e})}function y(e){return Object(u["a"])({url:d+"contentRemove",method:"post",data:e})}var k={name:"ContentCategory",components:{FileManage:n["a"],Pagination:r["a"]},directives:{},data:function(){return{name:"内容分类",height:680,loading:!1,idkey:"category_id",query:{search_field:"category_name",search_exp:"like",date_field:"create_time"},exps:[],data:[],dialog:!1,dialogTitle:"",model:{category_id:"",category_pid:0,category_name:"",category_unique:"",cover_id:0,cover_url:"",title:"",keywords:"",description:"",images:[],sort:250},rules:{category_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},trees:[],props:{checkStrictly:!0,value:"category_id",label:"category_name",emitPath:!1},isExpandAll:!1,selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",category_pid:"",is_disable:0,fileDialog:!1,fileTitle:"文件管理",fileType:"image",fileField:"",contentPk:"content_id",contentName:"内容",contentDialog:!1,contentDialogTitle:"",contentLoad:!1,contentData:[],contentCount:0,contentQuery:{page:1,limit:12},contentSelection:[],contentSelectIds:"",contentSelectTitle:"选中操作",contentSelectDialog:!1,contentSelectType:""}},created:function(){this.height=Object(o["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,m(this.query).then((function(t){e.data=t.data.list,e.trees=t.data.tree,e.exps=t.data.exps,e.isExpandAll=!1,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(e){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset(),e&&(this.model.category_pid=e[this.idkey])},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],p(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?f(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):h(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate())},search:function(){this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},expandAll:function(e){this.expandFor(this.data,!e)},expandFor:function(e,t){var l=this;e.forEach((function(e){l.$refs.table.toggleRowExpansion(e,t),e.children&&l.expandFor(e.children,t)}))},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(c["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removec"===e?this.selectTitle=this.name+"解除内容":"editpid"===e?this.selectTitle=this.name+"修改上级":"disable"===e?this.selectTitle="this.name + 是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removec"===e?this.removec(this.selection):"editpid"===e?this.editpid(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removec:function(e){var t=this;e.length?(this.loading=!0,y({category_id:this.selectGetIds(e),content_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editpid:function(e){var t=this;g({ids:this.selectGetIds(e),category_pid:this.category_pid}).then((function(e){t.list(),t.selectDialog=!1,t.$message.success(e.msg)})).catch((function(){t.loading=!1}))},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)this.selectAlert();else{this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),_({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}},dele:function(e){var t=this;e.length?b({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()},fileUpload:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"文件管理";this.fileType=e,this.fileField=t,this.fileTitle=l,this.fileDialog=!0},fileCancel:function(){this.fileType="image",this.fileField="",this.fileTitle="文件管理",this.fileDialog=!1},fileSubmit:function(e){this.fileDialog=!1;var t=this.fileField,l=e.length;if(l)if("cover_id"===t){var i=l-1;this.model.cover_id=e[i]["file_id"],this.model.cover_url=e[i]["file_url"]}else for(var a=0;a<l;a++)"images"===t&&this.model.images.push(e[a])},fileRemoval:function(e,t,l){var i=this.model[t].length,a=e;if("left"===l){if(e<=0)return!1;--a}else{if(e>=i-1)return!1;++a}var s=this.model[t][e],o=this.model[t][a];this.model[t][e]=o,this.model[t][a]=s,this.$forceUpdate()},fileDownload:function(e,t){Object(s["a"])(e.file_name,t,"文件名复制成功"),setTimeout((function(){window.open(e.file_url,"_blank")}),500)},fileDelete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"cover_id"===t?(this.model.cover_id=0,this.model.cover_url=""):"images"===t&&this.model.images.splice(e,1)},contentShow:function(e){this.contentDialog=!0,this.contentDialogTitle=this.name+"内容："+e.category_name,this.contentQuery.category_id=e.category_id,this.content()},content:function(){var e=this;this.contentLoad=!0,v(this.contentQuery).then((function(t){e.contentData=t.data.list,e.contentCount=t.data.count,e.contentLoad=!1})).catch((function(){e.contentLoad=!1}))},contentSort:function(e){this.contentQuery.sort_field=e.prop,this.contentQuery.sort_value="","ascending"===e.order&&(this.contentQuery.sort_value="asc",this.content()),"descending"===e.order&&(this.contentQuery.sort_value="desc",this.content())},contentSelect:function(e){this.contentSelection=e,this.contentSelectIds=this.contentSelectGetIds(e).toString()},contentSelectGetIds:function(e){return Object(c["a"])(e,this.contentPk)},contentSelectAlert:function(){this.$alert("请选择需要操作的"+this.contentName,"提示",{type:"warning",callback:function(e){}})},contentSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["contentRef"].clearSelection(),this.$refs["contentRef"].toggleRowSelection(t)),this.contentSelection.length?(this.contentSelectTitle="选中操作","contentRemove"===e&&(this.contentSelectTitle=this.name+"解除"+this.contentName),this.contentSelectDialog=!0,this.contentSelectType=e):this.contentSelectAlert()},contentSelectCancel:function(){this.contentSelectDialog=!1},contentSelectSubmit:function(){if(this.contentSelection.length){var e=this.contentSelectType;"contentRemove"===e&&this.contentRemove(this.contentSelection),this.contentSelectDialog=!1}else this.contentSelectAlert()},contentRemove:function(e){var t=this;e.length?(this.contentLoad=!0,y({category_id:this.contentQuery.category_id,content_ids:this.contentSelectGetIds(e)}).then((function(e){t.content(),t.$message.success(e.msg)})).catch((function(){t.contentLoad=!1}))):this.contentSelectAlert()}}},w=k,x=(l("d9af"),l("2877")),S=Object(x["a"])(w,i,a,!1,null,"33dda1d8",null);t["default"]=S.exports},f5cd:function(e,t,l){"use strict";l("cc54")},f71e:function(e,t,l){"use strict";l.d(t,"a",(function(){return r}));var i=l("2b0e"),a=l("b311"),s=l.n(a);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i["default"].prototype.$message({message:e||"复制成功",type:"success",duration:1500})}function n(e){i["default"].prototype.$message({message:e||"复制失败",type:"error"})}function r(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=new s.a(t.target,{text:function(){return e}});a.on("success",(function(){o(l),a.destroy()})),a.on("error",(function(){n(i),a.destroy()})),a.onClick(t)}},f72b:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"接口速率"}},[t("el-col",{attrs:{span:12}},[t("el-col",{attrs:{span:10}},[t("el-input",{attrs:{type:"number",placeholder:"次数"},model:{value:e.model.api_rate_num,callback:function(t){e.$set(e.model,"api_rate_num",t)},expression:"model.api_rate_num"}},[t("template",{slot:"append"},[e._v("次")])],2)],1),t("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("/")]),t("el-col",{attrs:{span:11}},[t("el-input",{attrs:{type:"number",placeholder:"时间"},model:{value:e.model.api_rate_time,callback:function(t){e.$set(e.model,"api_rate_time",t)},expression:"model.api_rate_time"}},[t("template",{slot:"append"},[e._v("秒")])],2)],1)],1)],1),t("el-form-item",{attrs:{label:"",prop:""}},[t("el-col",{attrs:{span:12}},[e._v(" 次数/时间；3/1：3次1秒；次数设置为 0 则不限制。 ")])],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingApi",components:{},data:function(){return{name:"接口设置",height:680,loading:!1,model:{api_rate_num:3,api_rate_time:1},rules:{api_rate_num:[{required:!0,message:"请输入次数",trigger:"blur"}],api_rate_time:[{required:!0,message:"请输入时间",trigger:"blur"}]}}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["b"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["b"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["a"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},f940:function(e,t,l){"use strict";l.r(t);l("ac1f"),l("00b4");var i=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"dialog-body",style:{height:e.height+"px"}},[t("el-row",[t("el-col",{attrs:{span:14}},[t("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"* SMTP服务器",prop:"email_host"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.email_host,callback:function(t){e.$set(e.model,"email_host",t)},expression:"model.email_host"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 发送邮件服务器，如：smtp.qq.com ")])],1),t("el-form-item",{attrs:{label:"SMTP协议",prop:"email_secure"}},[t("el-col",{attrs:{span:8}},[t("el-select",{attrs:{placeholder:""},model:{value:e.model.email_secure,callback:function(t){e.$set(e.model,"email_secure",t)},expression:"model.email_secure"}},e._l(e.secure,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-col",{attrs:{span:16}},[e._v(" 发送邮件服务器加密方式，如：SSL ")])],1),t("el-form-item",{attrs:{label:"* SMTP端口",prop:"email_port"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"number",clearable:""},model:{value:e.model.email_port,callback:function(t){e.$set(e.model,"email_port",t)},expression:"model.email_port"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 发送邮件服务器端口号，如：465 ")])],1),t("el-form-item",{attrs:{label:"邮箱名称",prop:"email_setfrom"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.email_setfrom,callback:function(t){e.$set(e.model,"email_setfrom",t)},expression:"model.email_setfrom"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 发件邮箱名称即发件人，如：yylAdmin ")])],1),t("el-form-item",{attrs:{label:"* 邮箱账号",prop:"email_username"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.email_username,callback:function(t){e.$set(e.model,"email_username",t)},expression:"model.email_username"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 发件邮箱账号，如：123456789@qq.com ")])],1),t("el-form-item",{attrs:{label:"* 授权码/密码",prop:"email_password"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"password",clearable:"","show-password":""},model:{value:e.model.email_password,callback:function(t){e.$set(e.model,"email_password",t)},expression:"model.email_password"}})],1),t("el-col",{attrs:{span:16}},[e._v(" 发件邮箱的授权码或密码，如：y1y2l3a4d5m6i7n ")])],1),t("el-form-item",{attrs:{label:"测试邮箱",prop:"email_test"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"text",clearable:""},model:{value:e.model.email_test,callback:function(t){e.$set(e.model,"email_test",t)},expression:"model.email_test"}})],1),t("el-col",{attrs:{span:16}},[t("el-button",{attrs:{loading:e.loading,type:"primary",title:"先提交再发送"},on:{click:function(t){return e.test()}}},[e._v("发送测试邮件")])],1)],1),t("el-form-item",[t("el-button",{attrs:{loading:e.loading},on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},a=[],s=l("98b1"),o=l("074b"),n={name:"SystemSettingEmail",components:{},data:function(){return{name:"邮件设置",height:680,loading:!1,model:{email_host:"",email_port:"",email_secure:"",email_username:"",email_password:"",email_setfrom:"",email_test:""},rules:{email_secure:[{required:!0,message:"请选择SMTP协议",trigger:"blur"}]},secure:[{value:"ssl",label:"SSL"},{value:"tls",label:"TLS"}]}},created:function(){this.height=Object(s["a"])(180),this.info()},methods:{info:function(){var e=this;Object(o["h"])().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,Object(o["h"])().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,Object(o["g"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},test:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.model.email_test?(e.loading=!0,Object(o["i"])(e.model).then((function(t){e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))):e.$message.error("请输入测试邮箱"))}))}}},r=n,c=l("2877"),u=Object(c["a"])(r,i,a,!1,null,null,null);t["default"]=u.exports},f982:function(e,t,l){"use strict";l.r(t);l("b0c0"),l("ac1f"),l("841c"),l("4e82");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-row",[t("el-col",[t("el-select",{staticClass:"filter-item ya-search-field",attrs:{placeholder:"查询字段"},model:{value:e.query.search_field,callback:function(t){e.$set(e.query,"search_field",t)},expression:"query.search_field"}},[t("el-option",{attrs:{value:e.idkey,label:"ID"}}),t("el-option",{attrs:{value:"role_name",label:"名称"}}),t("el-option",{attrs:{value:"role_desc",label:"描述"}}),t("el-option",{attrs:{value:"is_disable",label:"禁用"}})],1),t("el-select",{staticClass:"filter-item ya-search-exp",model:{value:e.query.search_exp,callback:function(t){e.$set(e.query,"search_exp",t)},expression:"query.search_exp"}},e._l(e.exps,(function(e){return t("el-option",{key:e.exp,attrs:{value:e.exp,label:e.name}})})),1),"is_disable"===e.query.search_field?t("el-select",{staticClass:"filter-item ya-search-value",model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}},[t("el-option",{attrs:{value:1,label:"是"}}),t("el-option",{attrs:{value:0,label:"否"}})],1):t("el-input",{staticClass:"filter-item ya-search-value",attrs:{placeholder:"查询内容",clearable:""},model:{value:e.query.search_value,callback:function(t){e.$set(e.query,"search_value",t)},expression:"query.search_value"}}),t("el-select",{staticClass:"filter-item ya-date-field",attrs:{placeholder:"时间类型"},model:{value:e.query.date_field,callback:function(t){e.$set(e.query,"date_field",t)},expression:"query.date_field"}},[t("el-option",{attrs:{value:"create_time",label:"添加时间"}}),t("el-option",{attrs:{value:"update_time",label:"修改时间"}})],1),t("el-date-picker",{staticClass:"filter-item ya-date-value",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.query.date_value,callback:function(t){e.$set(e.query,"date_value",t)},expression:"query.date_value"}}),t("el-button",{staticClass:"filter-item",attrs:{type:"primary",title:"查询/刷新"},on:{click:function(t){return e.search()}}},[e._v("查询")]),t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-refresh",title:"重置"},on:{click:function(t){return e.refresh()}}})],1)],1),t("el-row",[t("el-col",[t("el-button",{attrs:{title:"解除用户"},on:{click:function(t){return e.selectOpen("removeu")}}},[e._v("用户")]),t("el-button",{attrs:{title:"修改菜单"},on:{click:function(t){return e.selectOpen("editmenu")}}},[e._v("菜单")]),t("el-button",{attrs:{title:"是否禁用"},on:{click:function(t){return e.selectOpen("disable")}}},[e._v("禁用")]),t("el-button",{attrs:{title:"删除"},on:{click:function(t){return e.selectOpen("dele")}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加")])],1)],1),t("el-dialog",{attrs:{title:e.selectTitle,visible:e.selectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.selectDialog=t}}},[t("el-form",{ref:"selectRef",staticClass:"dialog-body",style:{height:e.height-200+"px"},attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}})],1),"removeu"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{},[e._v("确定要解除选中的"+e._s(e.name)+"的用户吗？")])]):"editmenu"===e.selectType?t("el-form-item",{attrs:{label:"菜单",prop:""}},[t("span",[t("el-checkbox",{attrs:{title:"展开/收起"},on:{change:function(t){return e.menuExpandAllChange("selMenuRef")}},model:{value:e.menuExpandAll,callback:function(t){e.menuExpandAll=t},expression:"menuExpandAll"}},[e._v("展开")]),t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.menuCheckAllChange("selMenuRef")}},model:{value:e.menuCheckAll,callback:function(t){e.menuCheckAll=t},expression:"menuCheckAll"}},[e._v("全选")])],1),t("el-tree",{ref:"selMenuRef",attrs:{data:e.menuData,props:e.menuProps,"default-checked-keys":e.menu_ids,"node-key":"menu_id","show-checkbox":"","check-strictly":"","expand-on-click-node":!1},on:{check:function(t){return e.apiCheck("selMenuRef")}},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label))]),l.data.children?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.menuCheckAllChangePid(l.node,l.data,"selMenuRef")}}},[e._v("全选")])],1):e._e(),t("span",[l.data.api_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.api_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}])})],1):"disable"===e.selectType?t("el-form-item",{attrs:{label:"是否禁用",prop:""}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.is_disable,callback:function(t){e.is_disable=t},expression:"is_disable"}})],1):"dele"===e.selectType?t("el-form-item",{attrs:{label:"",prop:""}},[t("span",{staticStyle:{color:"red"}},[e._v("确定要删除选中的"+e._s(e.name)+"吗？")])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.selectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.selectSubmit}},[e._v("提交")])],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.data,height:e.height},on:{"sort-change":e.sort,"selection-change":e.select}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:e.idkey,label:"ID",width:"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"role_name",label:"名称","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"role_desc",label:"描述","min-width":"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"80",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.disable([l.row])}},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序","min-width":"80",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"create_time",label:"添加时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"update_time",label:"修改时间","min-width":"155",sortable:"custom"}}),t("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userShow(l.row)}}},[e._v("用户")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.selectOpen("dele",l.row)}}},[e._v("删除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.count>0,expression:"count>0"}],attrs:{total:e.count,page:e.query.page,limit:e.query.limit},on:{"update:page":function(t){return e.$set(e.query,"page",t)},"update:limit":function(t){return e.$set(e.query,"limit",t)},pagination:e.list}}),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog,top:"5vh","before-close":e.cancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialog=t}}},[t("el-form",{ref:"ref",staticClass:"dialog-body",style:{height:e.height+"px"},attrs:{rules:e.rules,model:e.model,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"role_name"}},[t("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.model.role_name,callback:function(t){e.$set(e.model,"role_name",t)},expression:"model.role_name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"role_desc"}},[t("el-input",{attrs:{placeholder:"请输入描述",clearable:""},model:{value:e.model.role_desc,callback:function(t){e.$set(e.model,"role_desc",t)},expression:"model.role_desc"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort",placeholder:"250"}},[t("el-input",{attrs:{type:"number"},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),t("el-form-item",{attrs:{label:"菜单"}},[t("span",[t("el-checkbox",{attrs:{title:"展开/收起"},on:{change:function(t){return e.menuExpandAllChange("menuRef")}},model:{value:e.menuExpandAll,callback:function(t){e.menuExpandAll=t},expression:"menuExpandAll"}},[e._v("展开")]),t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.menuCheckAllChange("menuRef")}},model:{value:e.menuCheckAll,callback:function(t){e.menuCheckAll=t},expression:"menuCheckAll"}},[e._v("全选")])],1),t("el-tree",{ref:"menuRef",attrs:{data:e.menuData,props:e.menuProps,"default-checked-keys":e.model.menu_ids,"node-key":e.menuIdkey,"show-checkbox":"","check-strictly":"","expand-on-click-node":!1},on:{check:function(t){return e.menuCheck("menuRef")}},scopedSlots:e._u([{key:"default",fn:function(l){return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(l.node.label))]),l.data.children?t("span",{staticStyle:{"margin-left":"10px"}},[t("el-checkbox",{attrs:{title:"全选/反选"},on:{change:function(t){return e.menuCheckAllChangePid(l.node,l.data,"menuRef")}}},[e._v("全选")])],1):e._e(),t("span",[l.data.menu_url?t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px"},attrs:{title:l.data.menu_url}}):t("i",{staticClass:"el-icon-link",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unlogin?t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px"},attrs:{title:"免登"}}):t("i",{staticClass:"el-icon-user",staticStyle:{"margin-left":"10px",color:"#fff"}}),l.data.is_unauth?t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px"},attrs:{title:"免权"}}):t("i",{staticClass:"el-icon-unlock",staticStyle:{"margin-left":"10px",color:"#fff"}})])])}}])})],1),e.model[e.idkey]?t("el-form-item",{attrs:{label:"添加时间",prop:"create_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.create_time,callback:function(t){e.$set(e.model,"create_time",t)},expression:"model.create_time"}})],1):e._e(),e.model[e.idkey]?t("el-form-item",{attrs:{label:"修改时间",prop:"update_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.update_time,callback:function(t){e.$set(e.model,"update_time",t)},expression:"model.update_time"}})],1):e._e(),e.model.delete_time?t("el-form-item",{attrs:{label:"删除时间",prop:"delete_time"}},[t("el-input",{attrs:{disabled:""},model:{value:e.model.delete_time,callback:function(t){e.$set(e.model,"delete_time",t)},expression:"model.delete_time"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1),t("el-dialog",{attrs:{title:e.userDialogTitle,visible:e.userDialog,width:"65%",top:"5vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.userDialog=t}}},[t("el-row",[t("el-col",[t("el-button",{attrs:{type:"primary",title:"解除"},on:{click:function(t){return e.userSelectOpen("userRemove")}}},[e._v("解除")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userLoad,expression:"userLoad"}],ref:"userRef",attrs:{data:e.userData,height:e.height-20},on:{"sort-change":e.userSort,"selection-change":e.userSelect}},[t("el-table-column",{attrs:{type:"selection",width:"42",title:"全选/反选"}}),t("el-table-column",{attrs:{prop:"user_id",label:"用户ID",width:"100",sortable:"custom"}}),t("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"role_names",label:"角色","min-width":"130","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"is_super",label:"超管","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_super,callback:function(t){e.$set(l.row,"is_super",t)},expression:"scope.row.is_super"}})]}}])}),t("el-table-column",{attrs:{prop:"is_disable",label:"禁用","min-width":"75",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:l.row.is_disable,callback:function(t){e.$set(l.row,"is_disable",t)},expression:"scope.row.is_disable"}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"75"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.userSelectOpen("userRemove",l.row)}}},[e._v("解除")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.userCount>0,expression:"userCount>0"}],attrs:{total:e.userCount,page:e.userQuery.page,limit:e.userQuery.limit},on:{"update:page":function(t){return e.$set(e.userQuery,"page",t)},"update:limit":function(t){return e.$set(e.userQuery,"limit",t)},pagination:e.userList}})],1),t("el-dialog",{attrs:{title:e.userSelectTitle,visible:e.userSelectDialog,top:"20vh","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.userSelectDialog=t}}},[t("el-form",{ref:"userSelectRef",attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.userName+"ID",prop:""}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:12},disabled:""},model:{value:e.userSelectIds,callback:function(t){e.userSelectIds=t},expression:"userSelectIds"}})],1),"userRemove"===e.userSelectType?t("el-form-item",{attrs:{label:e.name+"ID",prop:""}},[t("span",[e._v(e._s(e.userQuery[e.idkey]))])]):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.userSelectCancel}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.userSelectSubmit}},[e._v("提交")])],1)],1)],1)},a=[],s=(l("d3b7"),l("25f0"),l("159b"),l("98b1")),o=l("333d"),n=l("ed08"),r=l("b775"),c="/admin/system.Role/";function u(e){return Object(r["a"])({url:c+"list",method:"get",params:e})}function d(e){return Object(r["a"])({url:c+"info",method:"get",params:e})}function m(e){return Object(r["a"])({url:c+"add",method:"post",data:e})}function p(e){return Object(r["a"])({url:c+"edit",method:"post",data:e})}function h(e){return Object(r["a"])({url:c+"dele",method:"post",data:e})}function f(e){return Object(r["a"])({url:c+"editmenu",method:"post",data:e})}function b(e){return Object(r["a"])({url:c+"disable",method:"post",data:e})}function g(e){return Object(r["a"])({url:c+"user",method:"get",params:e})}function _(e){return Object(r["a"])({url:c+"userRemove",method:"post",data:e})}var v={name:"SystemRole",components:{Pagination:o["a"]},data:function(){return{name:"角色",height:680,loading:!1,idkey:"role_id",exps:[],query:{page:1,limit:12,search_field:"role_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",dialogLoad:!1,model:{role_id:"",menu_ids:[],role_name:"",role_desc:"",sort:250},rules:{role_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},menuIdkey:"menu_id",menuData:[],menuIds:[],menuProps:{children:"children",label:"menu_name"},menuCheckAll:!1,menuExpandAll:!1,menuCheckAllPid:{},selMenuRefs:"menuRef",selection:[],selectIds:"",selectTitle:"选中操作",selectDialog:!1,selectType:"",is_disable:0,menu_ids:[],userPk:"user_id",userName:"用户",userDialog:!1,userDialogTitle:"",userLoad:!1,userData:[],userCount:0,userQuery:{page:1,limit:12},userSelection:[],userSelectIds:"",userSelectTitle:"选中操作",userSelectDialog:!1,userSelectType:""}},created:function(){this.height=Object(s["a"])(),this.list()},methods:{list:function(){var e=this;this.loading=!0,u(this.query).then((function(t){e.data=t.data.list,e.count=t.data.count,e.menuData=t.data.menu,e.menuIds=t.data.menu_ids,e.exps=t.data.exps,e.loading=!1})).catch((function(){e.loading=!1}))},add:function(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit:function(e){var t=this;this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],d(l).then((function(e){t.reset(e.data)})).catch((function(){}))},cancel:function(){this.dialog=!1,this.reset()},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,e.model[e.idkey]?p(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})):m(e.model).then((function(t){e.list(),e.dialog=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},reset:function(e){this.model=e||this.$options.data().model,void 0!==this.$refs["ref"]&&(this.$refs["ref"].resetFields(),this.$refs["ref"].clearValidate()),this.menuCheckAll=!1,this.menuExpandAll=!1},search:function(){this.query.page=1,this.list()},refresh:function(){var e=this.query.limit;this.query=this.$options.data().query,this.$refs["table"].clearSort(),this.query.limit=e,this.list()},sort:function(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select:function(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds:function(e){return Object(n["a"])(e,this.idkey)},selectAlert:function(){this.$alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:function(e){}})},selectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["table"].clearSelection(),this.$refs["table"].toggleRowSelection(t)),this.selection.length?(this.selectTitle="选中操作","removeu"===e?this.selectTitle=this.name+"解除用户":"editmenu"===e?this.selectTitle=this.name+"修改菜单":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel:function(){this.selectDialog=!1},selectSubmit:function(){if(this.selection.length){var e=this.selectType;"removeu"===e?this.removeu(this.selection):"editmenu"===e?this.editmenu(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removeu:function(e){var t=this;e.length?(this.loading=!0,_({role_id:this.selectGetIds(e),user_ids:[]}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},editmenu:function(e){var t=this;e.length?(this.loading=!0,f({ids:this.selectGetIds(e),menu_ids:this.menu_ids}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1}))):this.selectAlert()},disable:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length){this.loading=!0;var i=e[0].is_disable;l&&(i=this.is_disable),b({ids:this.selectGetIds(e),is_disable:i}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.list()}))}else this.selectAlert()},dele:function(e){var t=this;e.length?h({ids:this.selectGetIds(e)}).then((function(e){t.list(),t.$message.success(e.msg)})).catch((function(){t.loading=!1})):this.selectAlert()},menuCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"menuRef";this.selMenuRefs=e,this.menuCheckSetKeys()},menuCheckAllChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"menuRef";this.selMenuRefs=t,this.menuCheckAll?this.menuIds.forEach((function(t){e.$refs[e.selMenuRefs].setChecked(t,!0,!0)})):this.$refs[this.selMenuRefs].setCheckedKeys([]),this.menuCheckSetKeys()},menuExpandAllChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"menuRef";this.selMenuRefs=e;for(var t=this.menuExpandAll,l=this.$refs[this.selMenuRefs].store._getAllNodes().length,i=0;i<l;i++)this.$refs[this.selMenuRefs].store._getAllNodes()[i].expanded=t},menuCheckAllChangePid:function(e,t){var l=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"menuRef";this.selMenuRefs=i,this.menuCheckAllPid[t.menu_id]=e.checked,this.$refs[this.selMenuRefs].setChecked(t.menu_id,!this.menuCheckAllPid[t.menu_id],!0),t.children.forEach((function(e){l.$refs[l.selMenuRefs].setChecked(e.menu_id,!l.menuCheckAllPid[t.menu_id],!0)})),this.menuCheckSetKeys()},menuCheckSetKeys:function(){"menuRef"===this.selMenuRefs?this.model.menu_ids=this.$refs[this.selMenuRefs].getCheckedKeys():this.menu_ids=this.$refs[this.selMenuRefs].getCheckedKeys()},userShow:function(e){this.userDialog=!0,this.userDialogTitle=this.name+this.userName+"："+e.role_name,this.userQuery.role_id=e.role_id,this.userList()},userList:function(){var e=this;this.userLoad=!0,g(this.userQuery).then((function(t){e.userData=t.data.list,e.userCount=t.data.count,e.userLoad=!1})).catch((function(){e.userLoad=!1}))},userSort:function(e){this.userQuery.sort_field=e.prop,this.userQuery.sort_value="","ascending"===e.order&&(this.userQuery.sort_value="asc",this.userList()),"descending"===e.order&&(this.userQuery.sort_value="desc",this.userList())},userSelect:function(e){this.userSelection=e,this.userSelectIds=this.userSelectGetIds(e).toString()},userSelectGetIds:function(e){return Object(n["a"])(e,this.userPk)},userSelectAlert:function(){this.$alert("请选择需要操作的"+this.userName,"提示",{type:"warning",callback:function(e){}})},userSelectOpen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.$refs["userRef"].clearSelection(),this.$refs["userRef"].toggleRowSelection(t)),this.userSelection.length?(this.userSelectTitle="选中操作","userRemove"===e&&(this.userSelectTitle=this.name+"解除用户"),this.userSelectDialog=!0,this.userSelectType=e):this.userSelectAlert()},userSelectCancel:function(){this.userSelectDialog=!1},userSelectSubmit:function(){if(this.userSelection.length){var e=this.userSelectType;"userRemove"===e&&this.userRemove(this.userSelection),this.userSelectDialog=!1}else this.userSelectAlert()},userRemove:function(e){var t=this;e.length?(this.userLoad=!0,_({role_id:this.userQuery.role_id,user_ids:this.userSelectGetIds(e)}).then((function(e){t.userList(),t.$message.success(e.msg)})).catch((function(){t.userLoad=!1}))):this.userSelectAlert()}}},y=v,k=l("2877"),w=Object(k["a"])(y,i,a,!1,null,null,null);t["default"]=w.exports},f9fe:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-tabs",[e.checkPermission(["admin/system.Setting/systemInfo"])?t("el-tab-pane",{attrs:{label:"系统设置",lazy:""}},[t("setting-system")],1):e._e(),e.checkPermission(["admin/system.Setting/captchaInfo"])?t("el-tab-pane",{attrs:{label:"验证码设置",lazy:""}},[t("setting-captcha")],1):e._e(),e.checkPermission(["admin/system.Setting/cacheInfo"])?t("el-tab-pane",{attrs:{label:"缓存设置",lazy:""}},[t("setting-cache")],1):e._e(),e.checkPermission(["admin/system.Setting/tokenInfo"])?t("el-tab-pane",{attrs:{label:"Token设置",lazy:""}},[t("setting-token")],1):e._e(),e.checkPermission(["admin/system.Setting/logInfo"])?t("el-tab-pane",{attrs:{label:"日志设置",lazy:""}},[t("setting-log")],1):e._e(),e.checkPermission(["admin/system.Setting/apiInfo"])?t("el-tab-pane",{attrs:{label:"接口设置",lazy:""}},[t("setting-api")],1):e._e(),e.checkPermission(["admin/system.Setting/emailInfo"])?t("el-tab-pane",{attrs:{label:"邮件设置",lazy:""}},[t("setting-email")],1):e._e(),e.checkPermission(["admin/system.Setting/serverInfo"])?t("el-tab-pane",{attrs:{label:"服务器信息",lazy:""}},[t("setting-server")],1):e._e()],1)],1)},a=[],s=l("e350"),o=l("f72b"),n=l("20d7"),r=l("73c5"),c=l("f940"),u=l("9c2c"),d=l("17f6"),m=l("6a69"),p=l("9079"),h={name:"SystemSetting",directives:{},components:{SettingApi:o["default"],SettingCache:n["default"],SettingCaptcha:r["default"],SettingEmail:c["default"],SettingLog:u["default"],SettingServer:d["default"],SettingSystem:m["default"],SettingToken:p["default"]},data:function(){return{name:"系统设置"}},created:function(){},methods:{checkPermission:s["a"]}},f=h,b=l("2877"),g=Object(b["a"])(f,i,a,!1,null,null,null);t["default"]=g.exports}}]);